(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{377:function(e,t,a){e.exports=a.p+"static/media/logo-update.8166fb93.png"},384:function(e,t,a){e.exports=a.p+"static/media/mu-logo-white-footer.56fd092c.png"},385:function(e,t,a){e.exports=a.p+"static/media/IRC_LOGO_White.11ce1d35.png"},386:function(e,t,a){e.exports=a.p+"static/media/SFI_logo_2017_greyscaled.799490f8.png"},387:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBBNUVDNzlGRUIzMTFFNzg5MEY5NzkwNTY0OUMyQkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBBNUVDN0FGRUIzMTFFNzg5MEY5NzkwNTY0OUMyQkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMEE1RUM3N0ZFQjMxMUU3ODkwRjk3OTA1NjQ5QzJCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMEE1RUM3OEZFQjMxMUU3ODkwRjk3OTA1NjQ5QzJCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps+YsGAAABVqSURBVHjatFp5kBxndX/d0z1Hzz2zM3trtbtaHV5JXkuyZOETHxjKirEFAeRKDAkuSAEhCU5CMJA4QCpQRaCwQ4CkFEIRDFagIMbgQ7axdVuSda7kZXWtdvaY2blnemb67vy+3l552fKB/0hX/aqP6e3+3vfe+73f+3qFoaEh+v/cbNsmjuOI43myLYsymQwpiuL8xuNaIpmkUrFIkWiUWi2FVKX1O3+/fsUAlWWZMtk551zweACeVE0nr+Ah1TTxkvl7k7EwVWoNMvGehc2TxAvexsaxv6Erj3TOE0APMAzcAPQBa4B2QIZxLWZgs9kMFvP51Yauid3p5IfkplLoTITuqre08ure+MP5stxoT0S3yI2W1tce36GbZicM6cCeG+hu39potd6jasZlvDiYiIQG8czVfg8vRSXvg03dmvKL/AoMR4mEpPdidG3rVnR/YrZQHRPehmGca1gQuBp4D16yBh4K4LiMY4kd22RneI4P4Vo34Mf1iZaiHh8e6Nq87ea778zmK5m1Q8sHjp8dv7C6J7ni5Pmps5tXda24lJV3DPb1JiaypakVPanUzFzBTCdiwYnZfD4Vj/INRYuoqvZQs9lSYkEPn8tOhkYPjMk33nJVpyzG3xcPSX2VhjbR15kYnMrl8yMD3R0PfednGvd7hKgPUAFmyH3ADkDEwF/SNO0AwkxUVJX9/iJmgE3YnYIgkGEYL/uw6bq+Hrv7EU6b1w319axbuZyWd6Qo6PcSIZS8HssJqWAgSC3dJr9XxGWbPAJPHt5Dkk+kBsJRNzTaf+4Mjc1O0bbVwyRpdZrKzFKiu5viiRTpNk+ih0N46eTjDDo9foG+uHP3R97KgywcdeCTwEeBCrz0hGVZB0zLPKy0lLQoil83dP1stVp9NhAIaB6PZyUM6qhUKk/BSCUajd6uG+ZP37lhVSSVjPfsemY/hYMBuu/OG6m/O02qqmNgPDVV03lhuTqfQzwMVMmkC/kZOj11iTANdH4uS9V6k7wIpqFkG53TNMqePkW98QRt6OmnpN9HEq9To1kkUkoU8vHpt8rBlcAjwK0w7J8ajcZ/w2N3gCRsGHQKxzJyy/R6vVIkEjnMcg1eZfk3BmNHTdMcDIVCn20qynTQ61Huv+vGrcyoi1NzdGh0nGJBiXrSbcyR8LhGJRhXrsukWyZlijn6j/1P097xMzRdLhCPZzPDR3r6iLc4euzoYcpUy4QcpZlqhdLBELUHAiQ3ilSrFGhypkL7xnKPv54HeYDR0HbgMeA5DPxWQMZxL7y3Fl6a8Pp8qzH4MwjP46Io6FJAInguCMPOcTyX84pedr4eXrwAo1/1WM2Beq1MB0+O06plXSSCAX+yez81wJzXr10NhuWc0IS3ybR1Gp25SC1NJeQWabhWbjXgGY0O1s6RrlvkF0XyIyMCHtEx/MjlS9QX8JJHrzksHfSLFPaLodczkBl3PfDvMOrLuPlFGVs4HGbeycCTT8JjqaAktSE8N+P4A7g2AMP/DPfj1NvAuYTzAI5Pw8i5lqLVTMuu7Dt1nipyi+pNlW4ZWUP33ngtPfb8AdC9SMP9y0jEpITDPAasIB8NpyToJoLTsEgFTM2GJ4m8yE02SA2eLjVkTJZA+XyTfmKp9KHlafLh7/A+UjRTF5YwJWPJrcDPgR+zsIQHvoDBDsLGI7imYMCPYuD34/gTQAfuOYn948CrQAHnjJTaANA2rcP5lmgsuszgxNZAZwovYOTC0fLONHm9uJUXaNcLB5CTAg2vWE6XC7O08+DThLDGvax+cqh5JhnwmhOmpg0Yzj4ZluiW4avo4LnzhHJDCZ+Pcg2FYg51cMR7uNZCDi6UARaeu4A8vLED5GgVisWXA5L0UUmSehGS0zDuaxj0rbjn+8DngSeBM0AOqDMiAmaAUeB59jw8y2MY5vZoONiTisUdb4WQM8fHL9NENkshKUAvHT9DIyv7QUBB6o4k6LY1I8hFg347PUNB0UeaajixxYQD2xvwbC+I5q71m2jP2FlqqRo1dZPmQFqDUYlsTMgrF/P7+EXeY16/361xfwMY7GFSIKBi5h6E56ZAKrvgTSZD3uVOhPZmDMWUCqCVy+VdPcnIz3RLoCcPniANgzt57jJN5uYwMJ2uW7uK+jvb6SfP7iMd3uqLt4MxZ2giP0dh5PZ6EEschhsISWeUsNED5p0tV+iR3U9RtdlEDhNVWyr1JGOkChxC3LKrDS0jLMq7Tjfs7gEOwjgOhGHDc+z3z8OwB3HtI8Au5B5CxAQpWG+sDBBOrVaLUC6oVqvx8WtW3bD9nddTLBKjx3bvpU3rhmgaEs3jRxhKJm1aP0A/fnIfjU3MUMEs0U+P7AfN+xxjDo6Pk8B5nAlzRsrNT56MMGbGichJvA5hqtKFokz3rlpLF+WLnF/ge5mBDPA/fQYYB55ZYFLmQYAV988x5QLsZtdgWBgveDeMfAWGXHwjI0FKzDhnAidypUOyot1986b1hNpCzx47SkpQoXpRoYP/exbhliZ/WKRf7j1EehTs6Q+CUUE0GLxiotCjePOMYTibzR7ZrpEsL20QCrN7x+YNtKW/m9KJEGWiNb1p2qO8axwjhD8C/m2RR9m2FvhHN3R3LwwcxFMHboBxD7qX3gF8C/igey6yCGAC2s3x4MY1/R8I+gVQvE53gj17EYaNkko2mDHsDUBkq5RTS6Qj15SqjhKhOYMPgvohUhyycSiQ2cjP28mOWUoyNu2Khmk4kSAvSstkNg/hHRHboqHhhRB9P2NA4MASJ3yJFW23Hl4JPXdj918GwsAXgX8AHgBaruDusUzzIRhoomYaIJQf3XMHN2IiOCpqg6yQRVaTIyHswYRZxInwhABPiKhxpo8s3oL8sqiI7sDjemnhzcw45kGWJt2xBK3r6KCBZJxqCsJdQC2EZDsxNlGZKVT2LpAMq3v7F3UJbBtxu4O/X9z6LNoGgSOuRmXEk3elXRfwG9f7qMHWNr/f/y/VpvruY2fOkY07fIKf7tl6E20YGKKuSBtCyKSiXHcSw4Q25S2PA6TdvOfcAobCipopsNyZb2sQonWtRRF/GD9DEMDqUtOgStOkdDIei4elG5iBTwHbgBeWeO99wAng+OuIb+axja731gHTbhjfDrwErGZExboJ4KsYSLnSUMYLyEcIGAhoDy1LJqhhKzSVK5IPYej3eZ0JNMX5/k5QPU6iMJXieI9jucQU6UKcwvvQqzX0j8gXMCz+DDVVhWD3ob5OZovlcr3peHDE9cDJJYbcBrz8etzhFvYH3YIuAnG3jfqeWwMZIR1ikYGQnqnX64cDorA9lWqjck2mUq1Cz40dp5xSJM7kaLivj5LxqDN4m7Od8OOQeDiinrYkQs6Da0znwhBzXpQ7xGLOR1SmlEUZ8VIiHKBIQICMw8AigbhP5EdYDp4CrgMai4xIuWXjudcJT9tl2/FF959mDbX7rPvcv78JOApk0T49V222XqjLjR221Ub5eo0e3/cbasoahTmJ0C/Sqr5eCOy5eY+5HMfUC5NxPkDWWw7pcIvHgts4kxlYIhERkIxESEAuJqBwzpzLZFTd2iO4g6my7nvRgNlgvUuuvdnGQnTWFQyPueh08zIhCOKj77h65e0bhwchpDnq8aXpj7feQb86dojqsyrUSoYmKzmEFnpBw61z8KyIJLw4MwvDUA5cinGyj1tgUBuhaSHcU/A4R1XoUh9qdKVapd6Ott5UPHI773beC/Vw8VZ1w80p6O6sbQH+3A3NpdsH3VIRd8+ZwQZq4X+VyqUHZrL5z3pRDpqQVOyl165cTTu23krJUJhuHlpLH8bx3dcikHjbGbyFUDXxTo9TxF2jeO53VTMbNJJ6slKkAtqshmJQXUWe8j46eXG2lC/XDvFuaQi5hLGw1d1GN8gMY8rFURFEF1xD1rj3fcHNOxbiPwa+4nb/V6RaEWqlXqslb9y47gEJXTzToIquQUCrCC9wn+Cj/kg7nZyYoP2vQtLqnBN6EMoUCQWcPJx/GOcQzZUqxc9f4yHZKk2ZcvUShaWg04EgOWloWVciFg5ey7sFnBm3YZGBZZdM2thqxE033URr1qxhyoTVuCxw2O3yo8A3gL8G0sDHgH8FPuWUK9sOtKVSftTB4p6jJ59soafjLJ2KpSpNZwtUrNScsJySC/TCmVPo+epwIOeQRzoZpQgaYmeFjHcNcz3J6iDLR15wOgbUPo4GlnXTMnQoyzraqLMtQYVSKV+pN15mYTnnGjWwyMCme30EgzzU1dVFHSimx44du8r1ruqClYwO1zj223rgT91O4wz+9v3o1YRkW6oxPNR/qwfhpypNN5s4miuWCbOMULFQQFHwoWpEU0BhZ/WtSeVmHRqUn7drITxtbl7J4CJb6mACPOADe4oB9I0a5J3tXL92eGXqifTL1/Fu2NXcLoK414KA1cD3sjAbHR2ldDq9HmP9IgbNlgOXufIuA3za9Thrmfa6LRSbnEvAHtx/GYNZd2lq9hRvqhgEdCXampmZLOVLNcrJRTo+cd5Z46SF8uCxKd8s4z5jXnda9JqRrJOAkT64VTR4kjiR+kNpiPoWCKlAhXKJSuU87XvlVC6bLx3j3UL+IrCKzYphGja6gC5oRtbf9aIG9U9OTlIwGBwbGhr6KK5/1SWkgivJim4u/sAloHG3PLS59/nBUJO96VjAYCtfmGkReZIrVtDdN4gXbae+OdaBOQUMmqkZuHFeXLuRyTiO1T7H/SgNvMFRmxSmsM9PKSlEjUaDalBDnG2S3KhQQNRifp/QtcCc34dx/6koyrBpWneDVNbqurYLxh3A8YdzudzDO3fu1BCmeZf62fZ1NgFuKWGM+7T7G9Oj512lwwrap/GcnzUVvVu30WbZmkMbxXqDQpEA5TUIbNt08ozXefIYUCMhBTKNe0132q64Zt0NS0kYzlopKegjocmTF16sYrJMFod6kzwQENnprKmourxg4DMIpQJC8AHb1neKgudRjvOygR/D9Z+ji//F9PT0CRjKFpIWF/3Morx9xN3vd73KysVfAj8E27yoaFYConlLAqr/zPkMejiRWqEWXT6fR1PtdywQDA9ZgkmG13R0JiMbx2usiTftK8ljsPLh451cjIZDFBQkqtSblIhGMIEe6utdQZG2Xu+esXxoQWwzdvw2ZnoHhHEWT5JZvKP+sdVqttbyXRjfuWCY863hta5i6TbpqqIp4LO47+PZublHDUNrC0BDTRVz9MT+Q6QEVFIsjTxeDyLTdtZpvIZIql9FbeOcDoKtvPH8PFOacB1roViPaNhsQUqgAkLSRhcS8Psc4+IRJrp5CsVikINNCCRNW1zcv+fWuPtg2CMw4V7k4wOKqpwMhUIsrp7BYD/masylrdMbLVmY+UKhqakKck8oFSp12vnzF2hZV5qqpkwX8rOodRIpmk5iC+EL3WV5LSQuvHel/HGOYSEw5fXDI452rckyxbwhak/EiS1Xavj7UJCnjhTKA5i5UFPp4hx6fUXJLV74ZZl+BoN+GHl4BEl7A+u34LlBTdV+gDA9jAF/E14UXBKxf6+PGoy4DCO1sn/Z98Yuz0Y2rhnC7NZpbCZDPDqGeLsEwgBz1iCmg6oThvCbs1TI1kkVNMgB0UvbrtlCN61aTxzKgAAjPfAga536ujpp5fJe5KBMEcnnTF6xWqHfTmSq45emfrFUnh2CAc9jtv+ZtUs4/hq8/A00rnsRsqZpmGPhcPjLrHwAjwLPLhHpSz+deQOBwB92dfdsz1bq6Y9v30pFrUZHdo8Tn4SK0XxUzMskyiLpATRDrBfE4OcXf+e/T6xDp/HutZuoM54kDXkoKxpFkMcGyo1PFCgMteP1CshFiXxQSgJKjKErFPXpol/02K+38Pu3GNj/xGKx75QrlUd0VX2ZSbVyqRxAqP4JvPEiznXc8yl45zPYj7pdf8ZlTdOtk334fROQqJTLj20YbL+6oy06GGx56K8+cBf94vmjlNHy5LN8jqzXPJoTfqo+Xye7U0m6Y3gTbVgx5HTu5BEpgC6/M4WwhCGlctUhG3AGogy1EEqGaeYWW4RC7iZCvjjSt0N4g37vAdz8VCQc/hQfjR0pFguWJEkfxMPW1Go1Rh7PYQIeRVm5Gh66BaHLPqPdDmMYc0LgW9MgrCIm4+9kWQ54eO6qk+emDyJEB69a3kFrlodp/Oo8lQ81qG43qWY3yGhZzsDbY1Ea6RuijQMrnVxUoFltCO6kJGEeTBjUTjY8zPLaYg0ufg8FMEmc4JSWplalFFqmc5eDeVkxLr3R1yVWz+7AgH+EQPsVPPdpzOI1yMunsT/NvjWwFTMYMQhjzuH3b8FIni0Uw6BN8PAWnH6beR7XBhDWX+c9Hv/ugydpWToGaSZQ9lKFuhJRGly5guaqstPzbV6x0vnWoKo2xdDbhSDjFPSKLXg0hK7fhFHgRjLh5SDKhA7mFVBONDAry/Vqo8nUgPOlF+8Mseh5s89nTH5tg2e+Cc+9BMO+iz/gms3maHt7OxUKBWbgSKVa+bUJPRiNRK18Ic/oe0tQCn640WocaiktZ1mxWpd/2J8OblvbE1675+gonZ8p0eZVXbRpdQ/5fRLCzw/RLVCj2WDfEzDQFgXQmbPPTkyMMxnHIxxn0dgmJBR2ERoUbZECKcc6eAHNLtgepcWgoOQFY/txrjsr7G/2+Wyh63oeRrKBfgYeaYexU9izMNXhpe1gVwuhehn3tNiHT9ErfhL7hmVaa/HXv0QoIy9apeuHux+uNTX/ZF427rhuLYVEu+ZH1cvMlUxJCnAnXj3fCHtN78XpfDMeS4iHT5+T2yI+z/ilTDOC3y9Nzehe3uZz+Zyiy7OeyWxR8wg+rlyVDc209Ew2D41qtkxT5+cKRaW3I9625+jZE9zb+CeEfraSBkO3w5hu7C8gPNmXJB/7KApvHsJ5BMf3wNtPY78Vxldx/RpMfp+hKR3VcoG60sm9kt/3B7PZ3BPv2jT4pcf3vPoX160bev/h0+M/vG2k76Fnj19+ZHV/722nxicOD/W2952fyh2+fevGew+cOPvKzSNDtx0cvXAuipTLVltKKh6bqzUU1HlvS9WNcCoaKvv9vusvZma/H48G33NxKv+5t2Pggkc5d5njWndZsReiIAZR5XPbrCKMZ/1l3v1+fxRq5NetljI5MzMjoCuxa3VZasq1CLrxqzXdZCvpNgo6E2Y9mIycS3SL62zYvRZ2V+oWlkeMJWP0Ll1q+X3/CcEta/Z8R8Zxc+5y46/ZCzGwiLsqwF6qsHB1X6LOL3nM0zm8abICnU61aRMNuQLjJq98lJx/9uQbvLvu7tW3GKO29IPQ/wkwAMWCcSUlvBnpAAAAAElFTkSuQmCC"},391:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABJIAAAHMCAYAAACOUYI/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDg0NUI1NzlGRUEzMTFFNzg1N0E5QzJBNDkwMjY0ODciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDg0NUI1N0FGRUEzMTFFNzg1N0E5QzJBNDkwMjY0ODciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODQ1QjU3N0ZFQTMxMUU3ODU3QTlDMkE0OTAyNjQ4NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODQ1QjU3OEZFQTMxMUU3ODU3QTlDMkE0OTAyNjQ4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpeUCA8AAAw/SURBVHja7NgxAQAgDMAwwL/nTQIVkEjo2TszBwAAAAB+ngQAAAAAFEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAEBiJAEAAACQGEkAAAAAJEYSAAAAAImRBAAAAECyAgwA03wGlYAolygAAAAASUVORK5CYII="},393:function(e,t,a){e.exports=a.p+"static/media/letters-map-thumbnail.745b7a81.png"},394:function(e,t,a){e.exports=a.p+"static/media/letters-graph-thumbnail.1b69dd8a.png"},409:function(e,t,a){e.exports=a(867)},434:function(e,t,a){},436:function(e,t,a){},438:function(e,t,a){},444:function(e,t,a){},541:function(e,t){},551:function(e,t){},867:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(17),i=a.n(r),l=a(375);window.jQuery=window.$=l;var o=a(5),c=a(6),m=a(8),u=a(7),d=a(9),h=a(2),p=a(4),g=a.n(p),f=a(880),b=a(881),v=a(882),A=a(873),E=(a(432),a(434),a(436),a(438),a(440),a(442),a(444),"http://letters1916.maynoothuniversity.ie"),y=E+"/api/",S=E+"/learn/wp-json/wp/v2/",N=E+"/learn/wp-json/letters1623/",k=E+"/diyhistory/archive/",O=["/browse","/contact-form","/content","/fullsearch","/item","/letter","/letter-transcribe","/password-restore","/register","/transcriptions-desk","/upload-xml","/user-letter","/user-letters","/user-profile","/user-transcriptions","/vizualizations","/vizualizations/map","/admin/list-transcriptions"],w=a(376);function _(){sessionStorage.setItem("carousel_images",[]),sessionStorage.setItem("home_about",[]),sessionStorage.setItem("topics_list",[]),sessionStorage.setItem("sources_list",[]),sessionStorage.setItem("authors_list",[]),sessionStorage.setItem("genders_list",[]),sessionStorage.setItem("languages_list",[]),sessionStorage.setItem("date_created_list",[]),g.a.get(S+"pages/?slug=carousel").then(function(e){sessionStorage.setItem("carousel_images",JSON.stringify(e))}).catch(function(e){console.log(e)}),g.a.get(N+"post",{params:{slug:"about-the-project"}}).then(function(e){var t=e.data,a=t.post_title,s=t.post_excerpt,n={title:a,content:s,slug:t.slug};sessionStorage.setItem("home_about",JSON.stringify(n))}).catch(function(e){console.log(e)}),g.a.get(y+"topics?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("topics_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"sources?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("sources_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"authors?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("authors_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"people?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("people_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"genders?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("genders_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"languages?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("languages_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(y+"date_created?status=1&transcription_status=2").then(function(e){var t=e.data.data;sessionStorage.setItem("date_created_list",JSON.stringify(t))}).catch(function(e){console.log(e)}),g.a.get(N+"post",{params:{slug:"discover-the-collection"}}).then(function(e){var t=e.data,a={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink};sessionStorage.setItem("home_discover_collection",JSON.stringify(a))}).catch(function(e){console.log(e)}),g.a.get(N+"post",{params:{slug:"transcribe-letters"}}).then(function(e){var t=e.data,a={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink};sessionStorage.setItem("home_transcribe_letters",JSON.stringify(a))}).catch(function(e){console.log(e)}),g.a.get(N+"post",{params:{slug:"contribute-letters"}}).then(function(e){var t=e.data,a={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink};sessionStorage.setItem("home_contribute",JSON.stringify(a))}).catch(function(e){console.log(e)})}var j=a(872),C=a(377),I=a.n(C),x=a(28),D=a(870),M=a(871),T=a(877);function B(e,t,a){var s=e.className.split(" "),n=[];if(s.indexOf(t)>-1)for(var r=0;r<s.length;r++){var i=s[r];i===t&&(i=a),n.push(i)}else{for(var l=0;l<s.length;l++){var o=s[l];o===a&&(o=t),n.push(o)}-1===s.indexOf(a)&&n.push(a)}var c=n.join(" ");e.className=c}function P(e,t,a){for(var s=e.className.split(" "),n=[],r=0;r<s.length;r++){var i=s[r];i!==t&&i!==a&&n.push(i)}n.push(a);var l=n.join(" ");e.className=l}function F(e){"undefined"===typeof e&&(e=11);for(var t=[],a=0;a<e;a++){var s=n.a.createElement("li",{key:a},n.a.createElement("div",{className:"mock-card"},n.a.createElement("h4",null,n.a.createElement("div",{className:"mock-title"},"Lorem ipsum dolor sit amet.")),n.a.createElement("div",{className:"mock-keywords"},"Lorem ipsum dolor sit amet."),n.a.createElement("div",{className:"mock-desription"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean id odio neque. Suspendisse libero lorem, consequat ac nulla nec, porttitor ultricies arcu. Nam eget efficitur sem, eu tincidunt neque. Duis.")));t.push(s)}return t}function J(){return n.a.createElement("li",{key:0},n.a.createElement("p",null,"\xa0"),n.a.createElement("h4",{className:"text-center"},"There are no letters matching these criteria"),n.a.createElement("p",null,"\xa0"))}function L(e){var t=[];for(var a in e)t.push(a);for(var s=document.getElementsByClassName("topics-list")[0].childNodes,n=0;n<s.length;n++){var r=s[n],i=r.childNodes[0].childNodes[0].innerText;if(-1===t.indexOf(i))r.classList.add("disabled");else r.className=r.className.replace(/\bdisabled\b/g,""),r.classList.remove("disabled"),r.childNodes[0].children[2].children[0].textContent=e[i]}}function R(e,t){var a=[];for(var s in t)a.push(s);for(var n=document.getElementsByClassName(e)[0].childNodes,r=0;r<n.length;r++){var i=n[r],l=i.childNodes[0].innerText;if(-1===a.indexOf(l))i.classList.add("disabled");else i.className=i.className.replace(/\bdisabled\b/g,""),i.classList.remove("disabled"),i.children[2].children[0].textContent=t[l]}}function Y(e){for(var t=document.getElementsByClassName("topics-list")[0].childNodes,a=0;a<t.length;a++){var s=t[a],n=s.childNodes[0].childNodes[1].childNodes[0],r=n.getAttribute("data-id"),i=n.className,l=s.querySelectorAll(".select-topic")[0].querySelectorAll("i")[0],o=s.querySelectorAll(".topic-label")[0],c=i.split(" ");e.indexOf(r)>-1?-1===c.indexOf("fa-check-circle-o")&&(B(l,"fa-circle-o","fa-check-circle-o"),B(o,"","active")):-1===c.indexOf("fa-circle-o")&&(B(l,"fa-check-circle-o","fa-circle-o"),B(o,"active",""))}}function G(e,t){for(var a=document.getElementsByClassName(e)[0].childNodes,s=0;s<a.length;s++){var n=a[s],r=n.childNodes[2].innerText,i=n.childNodes[1].childNodes[0].className,l=r.split(" ("),o=" ("+l[l.length-1];if(r=(r=r.replace(o,"")).trim(),t.indexOf(r)>-1){var c=n.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],m=n.querySelectorAll(".source-label")[0];-1===i.split(" ").indexOf("fa-check-circle-o")&&(B(c,"fa-circle-o","fa-check-circle-o"),B(m,"","active"))}}}function U(e){var t=e;if("undefined"!==typeof e&&""!==e){var a=e.replace("http://letters1916.maynoothuniversity.ie/learn/index.php/",E+"/wp-post/");if((a=(a=(a=(a=(a=e.replace("http://letters1916.maynoothuniversity.ie/learn/",E+"/wp-post/")).replace(E+"/learn/index.php/",E+"/wp-post/")).replace(E+"/learn/",E+"/wp-post/")).replace("http://letters1623.mucampus.ie/",E)).replace("http://xl1916apps.mucampus.ie/",E)).includes("wp-content")&&(a=a.replace("wp-post/","")),a.includes(E+"/wp-post/")){"/"===a.slice(-1)&&(a=a.slice(0,-1));var s=a.substr(a.lastIndexOf("/")+1),n="";if(""!==(n=(n=a.replace(E+"/wp-post/","")).replace(s,"")))"/"===n.slice(-1)&&(n=n.slice(0,-1)+"%2F");t="/wp-post/"+n+s}}return t}function V(e){var t=e;if(-1===O.indexOf(e)){var a=e.replace("http://letters1916.maynoothuniversity.ie/learn/index.php/",E+"/wp-post/");"/"===(a=a.replace(E+"/learn/index.php/",E+"/wp-post/")).slice(-1)&&(a=a.slice(0,-1));var s=a.substr(a.lastIndexOf("/")+1),n="";if(n=a.replace(E+"/wp-post/",""),""!==(n=(n=a.replace(E+"/learn/","")).replace(s,"")))"/"===n.slice(-1)&&(n=n.slice(0,-1)+"%2F");t="/wp-post/"+n+s}return t}function Q(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText}function z(e,t,a,s){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=new Date,i=new Date;i.setDate(r.getDate()+1);var l=i,o=new Date;if(o.setDate(r.getDate()-1),s&&(l=o),n){var c=r.getFullYear()+1,m=new Date;m.setFullYear(c),l=m}q("lettersusername",e,l),q("letterssessionactive",t,l),q("lettersaccesstoken",a,l)}function H(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),s=0;s<a.length;s++){for(var n=a[s];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}function q(e,t,a){document.cookie=e+"="+t+(null==a?"":";expires="+a.toUTCString())+";domain="+window.location.hostname+";path=/"}function Z(e){return""===e?e:e.replace(".JPG",".jpg").replace(".PNG",".png").replace(".GIF",".gif")}function W(e,t,a){return e.replace(new RegExp(function(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}(t),"g"),a)}var X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleFormChange=a.handleFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.state={email:"",password:"",remember_me:!1,login_error:"",login_error_class:"error-container",redirect:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(x.a)({},s,a))}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state.remember_me,a=this;g.a.post(y+"login",{email:this.state.email,password:this.state.password}).then(function(e){var s=e.data.status;if(void 0!==typeof s&&!0===s){sessionStorage.setItem("userName",e.data.data.userName),sessionStorage.setItem("sessionActive",!0),sessionStorage.setItem("accessToken",e.data.data.accessToken),z(e.data.data.userName,!0,e.data.data.accessToken,!1,t),window.location.pathname.includes("verify-account")?document.location.href="/":window.location.reload()}else{var n=e.data.errors,r="";for(var i in n)r=n[i];a.setState({login_error:r,login_error_class:"error-container-visible"})}}).catch(function(e){console.log(e)})}},{key:"handleLogout",value:function(){var e=sessionStorage.getItem("accessToken");sessionStorage.setItem("sessionActive",!1),sessionStorage.setItem("accessToken",""),sessionStorage.setItem("userName",""),z("",!1,"",!0),""===e?setTimeout(function(){window.location.reload()},1e3):(g.a.defaults.headers.common.Authorization="Bearer "+e,g.a.get(y+"logout").then(function(e){setTimeout(function(){window.location.reload()},1e3)}).catch(function(e){setTimeout(function(){window.location.reload()},1e3),console.log(e)}))}},{key:"componentDidUpdate",value:function(){this.state.redirect&&this.setState({redirect:!1})}},{key:"render",value:function(){var e="";if("true"!==sessionStorage.getItem("sessionActive"))e=n.a.createElement("span",{className:"href-btn",onClick:this.props.loginModalOpen},n.a.createElement("i",{className:"fa fa-user-circle"})," Login/Register");else{var t=sessionStorage.getItem("userName"),a=n.a.createElement("span",null,n.a.createElement("i",{className:"fa fa-user-circle"})," ",t);e=n.a.createElement(D.a,{bsSize:"small",title:a,key:"user-dropdown",id:"session-dropdown"},n.a.createElement(M.a,{eventKey:"1",componentClass:j.a,href:"/user-profile",to:"/user-profile"},n.a.createElement("i",{className:"fa fa-user"})," Profile"),n.a.createElement(M.a,{eventKey:"2",componentClass:j.a,href:"/user-letter/0",to:"/user-letter/0"},n.a.createElement("i",{className:"fa fa-file-o"})," Add new Letter"),n.a.createElement(M.a,{eventKey:"3",componentClass:j.a,href:"/user-letters",to:"/user-letters"},n.a.createElement("i",{className:"fa fa-files-o"})," My letters"),n.a.createElement(M.a,{eventKey:"4",componentClass:j.a,href:"/user-transcriptions",to:"/user-transcriptions"},n.a.createElement("i",{className:"fa fa-file-text-o"})," My transcriptions"),n.a.createElement(M.a,{eventKey:"5",onClick:this.handleLogout},n.a.createElement("i",{className:"fa fa-sign-out"})," Logout"))}var s="";this.state.login_error.length>0&&(s=this.state.login_error);var r,i=n.a.createElement(T.a,{show:this.props.loginModalVisile,onHide:this.props.loginModalHide,bsSize:"small"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,n.a.createElement("i",{className:"fa fa-user-circle"})," Login")),n.a.createElement(T.a.Body,null,n.a.createElement("form",{name:"login-form",onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:this.state.login_error_class},s),n.a.createElement("div",{className:"form-group has-feedback"},n.a.createElement("input",{name:"email",type:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:this.handleFormChange}),n.a.createElement("span",{className:"glyphicon glyphicon-envelope form-control-feedback"})),n.a.createElement("div",{className:"form-group has-feedback"},n.a.createElement("input",{name:"password",type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.handleFormChange}),n.a.createElement("span",{className:"glyphicon glyphicon-lock form-control-feedback"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-8"},n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",null,n.a.createElement("input",{name:"remember_me",type:"checkbox",value:this.state.remember_me,onChange:this.handleFormChange})," Remember Me"))),n.a.createElement("div",{className:"col-xs-4"},n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},"Sign In")),n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(j.a,{to:"/password-restore",onClick:this.props.loginModalHide},"I forgot my password"),n.a.createElement("br",null),n.a.createElement(j.a,{to:"/register",onClick:this.props.loginModalHide},"Register for a new account"))))));return!0===this.state.redirect&&(r=n.a.createElement(A.a,{to:"/"})),n.a.createElement("li",{className:"admin-menu"},r,e,i)}}]),t}(n.a.Component),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).state={term:"",redirect:!1},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({term:e.target.value,redirect:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({redirect:!0})}},{key:"componentDidMount",value:function(){this.setState({redirect:!1})}},{key:"componentDidUpdate",value:function(e,t){!1===t.redirect&&!0===this.state.redirect&&this.setState({redirect:!1})}},{key:"render",value:function(){var e;return!0===this.state.redirect&&(e=n.a.createElement(A.a,{to:{pathname:"/fullsearch/"+this.state.term,state:{from:"header_search"},key:"header_search"}})),n.a.createElement("div",null,n.a.createElement("form",{name:"search-letters-input",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"input-group"},n.a.createElement("input",{onChange:this.handleChange,value:this.state.term,name:"search-bar",type:"text",className:"form-control",placeholder:"Search Letters 1916-1923"}),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{className:"btn btn-default",onClick:this.handleSubmit,type:"button",id:"search-letters-submit"},"Search")))),e)}}]),t}(n.a.Component),$=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"page-header"},n.a.createElement("div",{className:"top-bar"},n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"container"},n.a.createElement("ul",{className:"pull-left social-icons"},n.a.createElement("li",null,n.a.createElement("a",{href:"https://www.facebook.com/lettersof1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-facebook"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"https://twitter.com/Letters1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-twitter"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"http://letters1916.tumblr.com/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-tumblr"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"https://soundcloud.com/letters-1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-soundcloud"}))),n.a.createElement("li",null,n.a.createElement(j.a,{to:"/contact-form",href:"/contact-form"},n.a.createElement("i",{className:"fa fa-envelope"})))),n.a.createElement("ul",{className:"pull-right"},n.a.createElement(X,{loginModalVisile:this.props.loginModalVisile,loginModalHide:this.props.loginModalHide,loginModalOpen:this.props.loginModalOpen}))))),n.a.createElement("div",{className:"wrapper page-header-wrapper"},n.a.createElement("div",{className:"header-logo-row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8 col-md-8"}),n.a.createElement("div",{className:"col-xs-12 col-sm-4 col-md-4 logo-r"})),n.a.createElement("div",{className:"container header-logo-container"},n.a.createElement("div",{className:"col-xs-12 col-sm-8 col-md-8 logo-l"},n.a.createElement(j.a,{to:"/"},n.a.createElement("img",{src:I.a,className:"logo-img img-responsive",alt:"Letters 1916-1923"}))),n.a.createElement("div",{className:"col-xs-12 col-sm-4 col-md-4 logo-r"},n.a.createElement(K,null)))))}}]),t}(s.Component),ee=a(384),te=a.n(ee),ae=a(385),se=a.n(ae),ne=a(386),re=a.n(ne),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={email:"",loader:!1,subscribeResponse:"",subscribeResponseHidden:!0},a.handleEmailChange=a.handleEmailChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleEmailChange",value:function(e){var t=e.target.value;this.setState({email:t})}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.setState({loader:!0});var t=this;g.a.post(y+"subscribe-to-newsletter",{email:this.state.email.trim()}).then(function(e){var a="";"subscribed"===e.data.message.status&&(a="Thank you for subscribing to our mailing list!"),t.setState({subscribeResponse:a,subscribeResponseHidden:!1,formHiddenClass:!0,loader:!1}),setTimeout(function(){t.setState({subscribeResponse:"",subscribeResponseHidden:!0,formHiddenClass:!1})},2e3)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=" hidden",t="";this.state.subscribeResponseHidden||(e="",t=" hidden");var a="";return this.state.loader&&(a=n.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"})),n.a.createElement("div",{className:"newsletter-subscribe-footer"},n.a.createElement("div",{className:"newsletter-subscribe-response"+e},this.state.subscribeResponse),n.a.createElement("form",{onSubmit:this.handleFormSubmit,className:t},n.a.createElement("div",{className:"input-group input-group-sm"},n.a.createElement("input",{name:"email",type:"email",className:"form-control",placeholder:"Email Address",value:this.state.email,onChange:this.handleEmailChange}),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-letters btn-flat"},"Subscribe ",a)))))}}]),t}(n.a.Component),le=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={navItems:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getItems",value:function(){if(null!==sessionStorage.getItem("footermenu_items")&&sessionStorage.getItem("footermenu_items").length>0){var e=JSON.parse(sessionStorage.getItem("footermenu_items")).data;this.parseJSON(e)}else{var t=this;g.a.get(N+"menu/?menu=footer-menu").then(function(e){sessionStorage.setItem("footermenu_items",JSON.stringify(e));var a=e.data;t.parseJSON(a)}).catch(function(e){console.log(e)})}}},{key:"parseJSON",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r="",i=V(s.url);"_blank"===s.target&&(r="noopener noreferrer");var l=n.a.createElement("li",{key:a},n.a.createElement(j.a,{href:i,to:i,target:s.target,rel:r},s.title));t.push(l)}this.setState({navItems:t})}},{key:"componentDidMount",value:function(){this.getItems()}},{key:"render",value:function(){return n.a.createElement("ul",{className:"footer-menu"},this.state.navItems)}}]),t}(s.Component),oe=(new Date).getFullYear(),ce=function(){return n.a.createElement("div",{className:"page-footer"},n.a.createElement("div",{className:"footer-content"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 col-lg-3 pull-left"},n.a.createElement("a",{href:"https://www.maynoothuniversity.ie/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{src:te.a,alt:"Maynooth University",className:"img-responsive footer-logo"})),n.a.createElement("br",null),n.a.createElement("a",{href:"http://research.ie/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{src:se.a,alt:"Irish Research Counsil",className:"img-responsive footer-logo"})),n.a.createElement("br",null),n.a.createElement("a",{href:"https://www.sfi.ie/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{src:re.a,alt:"Science Foundation Ireland",className:"img-responsive footer-logo"}))),n.a.createElement("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3"},n.a.createElement(le,null)),n.a.createElement("div",{className:"col-xs-12 col-sm-5 col-md-6 col-lg-6"},n.a.createElement("ul",{className:"footer-social-links"},n.a.createElement("li",null,n.a.createElement("a",{href:"https://www.facebook.com/lettersof1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-facebook"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"https://twitter.com/Letters1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-twitter"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"http://letters1916.tumblr.com/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-tumblr"}))),n.a.createElement("li",null,n.a.createElement("a",{href:"https://soundcloud.com/letters-1916",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"fa fa-soundcloud"}))),n.a.createElement("li",null,n.a.createElement(j.a,{to:"/contact-form",href:"/contact-form"},n.a.createElement("i",{className:"fa fa-envelope"})))),n.a.createElement(ie,null))))),n.a.createElement("div",{className:"footer-rights"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},"COPYRIGHT \xa9 2016 - ",oe," LETTERS 1916-1923.")))))},me=a(868),ue=a(878),de=a(874),he=a(875),pe=a(876),ge=a(388),fe=a(387),be=a.n(fe);ge.bootstrapUtils.addStyle(ue.a,"none");var ve=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={fixed:!1,navItems:[],redirectTarget:"",redirect:!1},e.handleScroll=e.handleScroll.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getItems",value:function(){if(null!==sessionStorage.getItem("menu_items")&&sessionStorage.getItem("menu_items").length>0){var e=JSON.parse(sessionStorage.getItem("menu_items")).data;this.parseJSON(e)}else{var t=this;g.a.get(N+"menu/?menu=menu-2018").then(function(e){sessionStorage.setItem("menu_items",JSON.stringify(e));var a=e.data;t.parseJSON(a)}).catch(function(e){console.log(e)})}}},{key:"parseJSON",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a];if("0"===s.menu_item_parent){var n=s,r=parseInt(s.ID,10);n.children=this.getchildren(r,e),t.push(n)}}this.createMenu(t)}},{key:"getchildren",value:function(e,t){for(var a=[],s=0;s<t.length;s++){var n=t[s];if(parseInt(n.menu_item_parent,10)===e){var r=parseInt(n.ID,10);n.children=this.getchildren(r,t),a.push(n)}}return a}},{key:"createMenu",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],n=this.createNavItem(a,s);t.push(n)}this.setState({navItems:t})}},{key:"navTo",value:function(e){this.setState({redirect:!0,redirectTarget:e})}},{key:"createNavItem",value:function(e,t){var a,s=V(t.url);if(0===t.children.length)a=n.a.createElement(de.a,{componentClass:j.a,href:s,to:s,key:e},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.title}}));else{var r=this.createNavItemChildren(e,t.children);a=n.a.createElement(he.a,{eventKey:e,key:e,title:t.title,id:"nav-dropdown-"+e,componentClass:j.a,onClick:this.navTo.bind(this,s),to:s,noCaret:!0},r)}return a}},{key:"createNavItemChildren",value:function(e,t){for(var a=[],s=0;s<t.length;s++){var r=t[s],i=V(r.url),l=void 0;if(0===r.children.length)l=n.a.createElement(de.a,{componentClass:j.a,href:i,to:i,key:e+"."+s},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:r.title}}));else{var o=this.menuItemChildren(e,r.children);l=n.a.createElement(he.a,{key:e+"."+s,title:r.title,id:"nav-dropdown-"+e+"."+s,noCaret:!0,componentClass:j.a,onClick:this.navTo.bind(this,i),href:i},o)}a.push(l)}return a}},{key:"componentDidMount",value:function(){this.getItems(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(e,t){!1===t.redirect&&!0===this.state.redirect&&this.setState({redirect:!1,redirectTarget:""})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){window.scrollY>135?this.setState({fixed:!0}):this.setState({fixed:!1})}},{key:"render",value:function(){var e,t="";return this.state.fixed&&(t="fixed"),this.state.redirect&&(e=n.a.createElement(me.a,{push:!0,to:this.state.redirectTarget})),n.a.createElement("div",{className:"navbar-container "+t},n.a.createElement(ue.a,{collapseOnSelect:!0,bsStyle:"none"},n.a.createElement(ue.a.Header,null,n.a.createElement(ue.a.Brand,null,n.a.createElement(de.a,{componentClass:j.a,href:"/",to:"/"},n.a.createElement("img",{src:be.a,alt:"Letters 1916-1923"}))),n.a.createElement(ue.a.Toggle,null)),n.a.createElement(ue.a.Collapse,null,n.a.createElement(pe.a,null,this.state.navItems))),e)}}]),t}(s.Component),Ae=a(389),Ee=a.n(Ae),ye={position:"fixed",bottom:"50px",right:"30px",cursor:"pointer",transition:"opacity 0.2s linear 0s, visibility",opacity:"1",visibility:"visible",zIndex:"999"},Se=function(){return n.a.createElement(Ee.a,{showUnder:160,style:ye},n.a.createElement("div",{className:"scroll-up"},n.a.createElement("i",{className:"fa-chevron-up fa"})))},Ne=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={visible:!0},e.isVisible=e.isVisible.bind(Object(h.a)(Object(h.a)(e))),e.acceptConsent=e.acceptConsent.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"isVisible",value:function(){"true"===H("l191623_cookies_consent")&&this.setState({visible:!1})}},{key:"acceptConsent",value:function(){var e=new Date,t=new Date;t.setDate(e.getDate()+30),q("l191623_cookies_consent","true",t),this.setState({visible:!1})}},{key:"componentDidMount",value:function(){this.isVisible()}},{key:"render",value:function(){var e="";return this.state.visible||(e=" hidden"),n.a.createElement("div",{className:"cookies-consent-container"+e},n.a.createElement("div",{className:"cookies-consent-content"},n.a.createElement("p",null,"The Letters 1916-23 website uses cookies to ensure the best experience for our visitors. By continuing to use the Letters 1916-23 website you are agreeing to our ",n.a.createElement("a",{href:"/wp-post/letters-1916-1923-cookie-policy"},n.a.createElement("i",{className:"fa fa-question-circle"})," cookies policy")),n.a.createElement("button",{type:"button",className:"btn btn-letters",onClick:this.acceptConsent},"Accept")))}}]),t}(n.a.Component),ke=a(879),Oe=a(15),we=a.n(Oe),_e=a(390),je=a.n(_e),Ce=a(391),Ie=a.n(Ce),xe=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).handleSelect=s.handleSelect.bind(Object(h.a)(Object(h.a)(s))),s.parseCarouselJSON=s.parseCarouselJSON.bind(Object(h.a)(Object(h.a)(s))),s.state={loading:!0,index:0,direction:null,nextIcon:n.a.createElement("span",{className:"fa fa-angle-right"}),prevIcon:n.a.createElement("span",{className:"fa fa-angle-left"}),images:[]},s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSelect",value:function(e,t){this.setState({index:e,direction:t.direction})}},{key:"getImages",value:function(){if(null!==sessionStorage.getItem("carousel_images")&&sessionStorage.getItem("carousel_images").length>0){var e=JSON.parse(sessionStorage.getItem("carousel_images")).data[0].content.rendered;this.parseCarouselJSON(e)}else{var t=this;g.a.get(S+"pages/?slug=carousel").then(function(e){var a=e.data[0].content.rendered;t.parseCarouselJSON(a)}).catch(function(e){console.log(e)})}}},{key:"parseCarouselJSON",value:function(e){var t=je.a.load(e),a=[];t("figure").each(function(e,s){var r=t(this).children("img").attr("src"),i=t(this).children("a").children("img").attr("title"),l=t(this).children("figcaption").html(),o={backgroundImage:"url("+r+")",backgroundSize:"cover"},c="";""!==i&&(c=n.a.createElement("h3",null,c));var m="";""!==l&&(m=n.a.createElement("p",null,l));var u=n.a.createElement(ke.a.Item,{key:e},n.a.createElement("div",{className:"carousel-img",style:o}),n.a.createElement("img",{width:1170,height:585,alt:"",src:Ie.a}),n.a.createElement(ke.a.Caption,null,c,m));a.push(u)}),this.setState({images:a,loading:!1})}},{key:"componentDidMount",value:function(){this.getImages()}},{key:"render",value:function(){var e,t=this.state,a=t.index,s=t.direction;e=this.state.loading?n.a.createElement("div",{style:{minHeight:"250px",paddingTop:"100px"}},n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}))):n.a.createElement(ke.a,{activeIndex:a,direction:s,onSelect:this.handleSelect,nextIcon:this.state.nextIcon,prevIcon:this.state.prevIcon,index:this.state.index},this.state.images);return n.a.createElement("div",{style:{minHeight:"250px"}},e)}}]),t}(n.a.Component),De=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={about:[],loading:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadAbout",value:function(){if(null!==sessionStorage.getItem("home_about")&&sessionStorage.getItem("home_about").length>0){var e=JSON.parse(sessionStorage.getItem("home_about"));this.setState({about:e,loading:!1})}else{var t=this;g.a.get(N+"post",{params:{slug:"about-the-project"}}).then(function(e){var a=e.data,s={title:a.post_title,content:Q(a.post_excerpt),slug:a.slug};t.setState({about:s,loading:!1})}).catch(function(e){console.log(e)})}}},{key:"componentDidMount",value:function(){this.loadAbout()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",null,n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}))):n.a.createElement("div",null,n.a.createElement("h2",null,this.state.about.title),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.about.content},className:"wrap-text"}),n.a.createElement("br",null),n.a.createElement(j.a,{className:"btn btn-default",to:"/wp-post/about-the-project"},"Read more...")),n.a.createElement("div",null,e)}}]),t}(s.Component),Me=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={block1:{url:"",thumbnail:[],title:"",content:""},block2:{url:"",thumbnail:[],title:"",content:""},block3:{url:"",thumbnail:[],title:"",content:""}},e.createBlock=e.createBlock.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadBlock1",value:function(){if(null!==sessionStorage.getItem("home_discover_collection")&&sessionStorage.getItem("home_discover_collection").length>0){var e=JSON.parse(sessionStorage.getItem("home_discover_collection")),t=this.createBlock(e,!0);this.setState({block1:{url:t.url,thumbnail:t.thumbnail,title:t.title,content:t.content}})}else{var a=this;g.a.get(N+"post",{params:{slug:"discover-the-collection"}}).then(function(e){var t=e.data,s={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink},n=a.createBlock(s,!0);a.setState({block1:{url:n.url,thumbnail:n.thumbnail,title:n.title,content:n.content}})}).catch(function(e){console.log(e)})}}},{key:"loadBlock2",value:function(){if(null!==sessionStorage.getItem("home_transcribe_letters")&&sessionStorage.getItem("home_transcribe_letters").length>0){var e=JSON.parse(sessionStorage.getItem("home_transcribe_letters")),t=this.createBlock(e,!1);this.setState({block2:{url:t.url,thumbnail:t.thumbnail,title:t.title,content:t.content}})}else{var a=this;g.a.get(N+"post",{params:{slug:"transcribe-letters"}}).then(function(e){var t=e.data,s={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink},n=a.createBlock(s,!1);a.setState({block2:{url:n.url,thumbnail:n.thumbnail,title:n.title,content:n.content}})}).catch(function(e){console.log(e)})}}},{key:"loadBlock3",value:function(){if(null!==sessionStorage.getItem("home_contribute")&&sessionStorage.getItem("home_contribute").length>0){var e=JSON.parse(sessionStorage.getItem("home_contribute")),t=this.createBlock(e,!1);this.setState({block3:{url:t.url,thumbnail:t.thumbnail,title:t.title,content:t.content}})}else{var a=this;g.a.get(N+"post",{params:{slug:"contribute-letters"}}).then(function(e){var t=e.data,s={title:t.post_title,content:t.post_excerpt,slug:t.slug,thumbnail:t.thumbnail,permalink:t.permalink},n=a.createBlock(s,!1);a.setState({block3:{url:n.url,thumbnail:n.thumbnail,title:n.title,content:n.content}})}).catch(function(e){console.log(e)})}}},{key:"createBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return!1;var a="wp-post"+e.permalink.replace(E,"");return t&&(a="/browse"),{url:a,thumbnail:e.thumbnail,title:e.title,content:e.content}}},{key:"componentDidMount",value:function(){this.loadBlock1(),this.loadBlock2(),this.loadBlock3()}},{key:"render",value:function(){return n.a.createElement("section",{className:"home-blocks"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("div",{className:"home-block"},n.a.createElement("div",{className:"home-block-thumbnail"},n.a.createElement(j.a,{href:this.state.block1.url,to:this.state.block1.url},n.a.createElement("img",{src:this.state.block1.thumbnail,alt:this.state.block1.title,className:"img-responsive"}))),n.a.createElement("h4",null,n.a.createElement(j.a,{href:this.state.block1.url,to:this.state.block1.url},this.state.block1.title)),n.a.createElement("p",null,this.state.block1.content))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("div",{className:"home-block"},n.a.createElement("div",{className:"home-block-thumbnail"},n.a.createElement(j.a,{href:this.state.block2.url,to:this.state.block2.url},n.a.createElement("img",{src:this.state.block2.thumbnail,alt:this.state.block2.title,className:"img-responsive"}))),n.a.createElement("h4",null,n.a.createElement(j.a,{href:this.state.block2.url,to:this.state.block2.url},this.state.block2.title)),n.a.createElement("p",null,this.state.block2.content))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("div",{className:"home-block"},n.a.createElement("div",{className:"home-block-thumbnail"},n.a.createElement(j.a,{href:this.state.block3.url,to:this.state.block3.url},n.a.createElement("img",{src:this.state.block3.thumbnail,alt:this.state.block3.title,className:"img-responsive"}))),n.a.createElement("h4",null,n.a.createElement(j.a,{href:this.state.block3.url,to:this.state.block3.url},this.state.block3.title)),n.a.createElement("p",null,this.state.block3.content))))))}}]),t}(n.a.Component),Te=a(62),Be=a.n(Te),Pe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("highlights_list")&&sessionStorage.getItem("highlights_list").length>0){var e=JSON.parse(sessionStorage.getItem("highlights_list"));this.setItems(e)}else{var t=this;g.a.get(N+"category?slug=highlights&posts_per_page=9").then(function(e){var a=e.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.post_excerpt.replace(/<[^>]+>/gi," ");(r=r.replace("&amp;","&")).length>100&&(r=r.substring(0,100)+"...");var i=n.a.createElement("div",{className:"item",key:a},n.a.createElement(j.a,{to:"/wp-post/"+s.post_name},n.a.createElement("img",{src:s.thumbnail,className:"img-responsive highlights-thumbnail",alt:s.post_title})),n.a.createElement("div",{className:"home-collection"},n.a.createElement("h4",null,n.a.createElement(j.a,{to:"/wp-post/"+s.post_name},s.post_title)),n.a.createElement("p",null,r)));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",{className:"container"},n.a.createElement(Be.a,{className:"owl-theme",autoplay:!1,autoplayhoverpause:"true",margin:10,nav:!0,items:4,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navContainerClass:"news-nav-class",dots:!1,responsive:{0:{items:1},600:{items:2},767:{items:3},992:{items:4}}},this.state.items)),n.a.createElement("section",{className:"home-highlights"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("h2",{className:"section-title"},n.a.createElement("span",null,"Highlights")),e))))}}]),t}(n.a.Component),Fe=a(393),Je=a.n(Fe),Le=a(394),Re=a.n(Le),Ye=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=document.createElement("script"),t=document.createTextNode('!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?"http":"https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");');e.appendChild(t),document.body.appendChild(e)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("a",{className:"twitter-timeline","data-height":"480",href:"https://twitter.com/Letters1916","data-widget-id":"382284620286275584","data-background":"#fcfcf9"},"Tweets by @Letters1916"))}}]),t}(n.a.Component),Ge=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"home-vizualizations"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("div",{className:"vizualization-block"},n.a.createElement("h3",{className:"section-title"},n.a.createElement("span",null,"Interactive Map")),n.a.createElement("p",{className:"text-justify"},"Our interactive world map helps you discover the local and global networks in which Irish people interacted a century ago."),n.a.createElement(j.a,{to:"/vizualizations/map"},n.a.createElement("img",{src:Je.a,alt:"map vizualization thumbnail",className:"img-thumbnail img-responsive"})))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("div",{className:"vizualization-block"},n.a.createElement("h3",{className:"section-title"},n.a.createElement("span",null,"Network diagram")),n.a.createElement("p",null,"Based on more than 5000 letters by over 2000 correspondents, this diagram provides an insight into their professional and private relationships."),n.a.createElement(j.a,{to:"/vizualizations/graph"},n.a.createElement("img",{src:Re.a,alt:"graph vizualization thumbnail",className:"img-thumbnail img-responsive"})))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement(Ye,null)))))))}}]),t}(n.a.Component),Ue=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("homenews_list")&&sessionStorage.getItem("homenews_list").length>0){var e=JSON.parse(sessionStorage.getItem("homenews_list"));this.setItems(e)}else{var t=this;g.a.get(N+"category?slug=news&posts_per_page=12&orderby=date").then(function(e){var a=e.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=Q(s.post_excerpt);r.length>100&&(r=r.substring(0,100)+"...");var i=n.a.createElement("div",{className:"item",key:a},n.a.createElement("h4",null,n.a.createElement(j.a,{to:"/wp-post/"+s.post_name},s.post_title)),n.a.createElement("div",{className:"news-thumb"},n.a.createElement(j.a,{to:"/wp-post/"+s.post_name},n.a.createElement("img",{src:s.thumbnail,className:"img-responsive highlights-thumbnail",alt:s.post_title})),n.a.createElement("p",null,r)));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement(Be.a,{className:"owl-theme home-news",loop:!0,margin:10,nav:!0,items:1,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navContainerClass:"news-nav-class",dots:!1},this.state.items),n.a.createElement("div",null,n.a.createElement("h2",null,"News"),e)}}]),t}(n.a.Component),Ve=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"carousel-wrapper"},n.a.createElement("div",{className:"container"},n.a.createElement(xe,null))),n.a.createElement("section",{className:"home-section"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-7 col-md-8"},n.a.createElement(De,null)),n.a.createElement("div",{className:"col-xs-12 col-sm-5 col-md-4"},n.a.createElement(Ue,null))))),n.a.createElement(Me,null),n.a.createElement(Pe,null),n.a.createElement(Ge,null))}}]),t}(s.Component),Qe=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.items,t=[],a=0;a<e.length;a++){var s=e[a],r=s.path,i=s.label,l=i;r.length>0&&(l=n.a.createElement(j.a,{to:r},i));var o=n.a.createElement("li",{key:a},l);t.push(o)}return n.a.createElement("div",{className:"breadcrumbs-container"},n.a.createElement("ul",{className:"breadcrumbs-list"},n.a.createElement("li",null,n.a.createElement(j.a,{to:"/"},n.a.createElement("i",{className:"fa fa-home"})," Home")),t))}}]),t}(n.a.Component),ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={paginationItems:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"createPagination",value:function(){if(this.props){var e=this.props.current_page,t=this.props.total_pages,a=0,s=0;e<t&&(s=e+1),e>1&&(a=e-1);var r=[],i=n.a.createElement("li",{key:"first"},n.a.createElement("span",{className:"href-btn",onClick:this.props.pagination_function.bind(this,1)},n.a.createElement("i",{className:"fa-step-backward fa"}))),l=n.a.createElement("li",{key:"prev"},n.a.createElement("span",{className:"href-btn",onClick:this.props.pagination_function.bind(this,a)},n.a.createElement("i",{className:"fa-backward fa"})));r.push(i),r.push(l);for(var o=0;o<parseInt(t,10);o++){var c=o+1,m="";e===c&&(m="active");var u=n.a.createElement("li",{key:c,className:m},n.a.createElement("span",{className:"href-btn",onClick:this.props.pagination_function.bind(this,c)},c));"active"===m&&(u=n.a.createElement("li",{key:c,className:m},n.a.createElement("span",null,c))),parseInt(e,10)<4&&o<10?r.push(u):o>parseInt(e,10)-6&&o<parseInt(e,10)+4&&r.push(u)}var d=n.a.createElement("li",{key:"next"},n.a.createElement("span",{className:"href-btn",onClick:this.props.pagination_function.bind(this,s)},n.a.createElement("i",{className:"fa-forward fa"}))),h=n.a.createElement("li",{key:"last"},n.a.createElement("span",{className:"href-btn",onClick:this.props.pagination_function.bind(this,t)},n.a.createElement("i",{className:"fa-step-forward fa"})));r.push(d),r.push(h),this.setState({paginationItems:r})}}},{key:"componentDidMount",value:function(){this.createPagination()}},{key:"componentDidUpdate",value:function(e,t){e.total_pages!==this.props.total_pages?this.createPagination():e.current_page!==this.props.current_page?this.createPagination():e.paginate!==this.props.paginate&&this.createPagination()}},{key:"render",value:function(){return n.a.createElement("div",{className:"pagination-container"},n.a.createElement("ul",{className:"pagination pagination-sm"},this.state.paginationItems))}}]),t}(s.Component),He=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state={term:s.props.term,loading:!1,browseItems:[],paginationItems:[],current_page:1,from:1,last_page:1,path:y+"search/",total:1,paginate:10,gotopage_value:1,temp_page:1,submitted_search:!1,submit_search:!1},s.gotoPage=s.gotoPage.bind(Object(h.a)(Object(h.a)(s))),s.showPage=s.showPage.bind(Object(h.a)(Object(h.a)(s))),s.updatePaginate=s.updatePaginate.bind(Object(h.a)(Object(h.a)(s))),s.updatePageNumber=s.updatePageNumber.bind(Object(h.a)(Object(h.a)(s))),s.pageNumberSubmit=s.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(s))),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"gotoPage",value:function(e){parseInt(e,10)>0&&parseInt(e,10)!==this.state.current_page&&this.setState({current_page:e,loading:!0})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({gotopage_value:t,current_page:t,loading:!0})}},{key:"showPage",value:function(){var e=this,t=this.props.term;if(""!==t){var a=this.state.path+t;g.a.get(a,{params:{page:this.state.current_page,paginate:this.state.paginate}}).then(function(t){for(var a=t.data.data,s=a.data,r=[],i=0;i<s.length;i++){var l=s[i],o=JSON.parse(l.element),c=n.a.createElement("img",{className:"list-thumbnail img-responsive",src:Z(E+"/diyhistory/archive/square_thumbnails/"+o.pages[0].archive_filename),alt:o.title}),m="";if(""!==o.pages[0].transcription){var u=o.pages[0].transcription.replace(/<[^>]+>/gi," ");(u=u.replace("&amp;","&")).length>400&&(u=u.substring(0,400)),m=u+"..."}var d=n.a.createElement("li",{"data-id":l.id,key:i,className:"img-clearfix"},n.a.createElement(j.a,{to:"item/"+l.id},c),n.a.createElement("h4",null,n.a.createElement(j.a,{to:"/item/"+l.id},o.title),n.a.createElement("br",null)),n.a.createElement("p",null,m));r.push(d)}if(0===r.length){var h=n.a.createElement("li",{key:0},n.a.createElement("i",null,"There are no letters matching your search criteria"));r.push(h)}e.setState({loading:!1,browseItems:r,current_page:a.current_page,last_page:a.last_page,total:a.total,submit_search:!1,submitted_search:!0})}).catch(function(e){console.log(e)})}else this.setState({loading:!1,submit_search:!1})}},{key:"componentDidMount",value:function(){this.showPage()}},{key:"componentDidUpdate",value:function(e,t){!0===this.props.submit_search&&e.term!==this.props.term&&this.setState({loading:!0}),t.current_page===this.state.current_page&&t.paginate===this.state.paginate||!0!==this.state.loading||this.showPage(),t.submit_search!==this.props.submit_search&&this.showPage()}},{key:"render",value:function(){var e,t="",a="results";this.state.total>0&&(1===this.state.total&&(a="result"),t=n.a.createElement("div",{className:"results-found"},n.a.createElement("i",null,"Found ",this.state.total," ",a))),e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"search-items"},this.state.browseItems);var s="",r="",i="";10===this.state.paginate&&(s="active"),25===this.state.paginate&&(r="active"),50===this.state.paginate&&(i="active");var l=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:s},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:r},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:i},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.gotoPage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"})))))),o=n.a.createElement("div",null,n.a.createElement("p",null,"\xa0"),n.a.createElement("p",null,"\xa0"),n.a.createElement("p",null,"\xa0"));return(""!==this.props.term&&this.state.browseItems.length>0||this.state.submitted_search)&&(o=n.a.createElement("div",{className:"search-letters-container"},n.a.createElement("h3",null,"Letters",t),l,e,l)),n.a.createElement("div",null,o)}}]),t}(s.Component),qe=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state={term:s.props.term,loading:!1,browseItems:[],paginationItems:[],current_page:1,from:1,last_page:1,path:N+"search/",per_page:0,to:1,total:1,paginate:10,gotopage_value:1,temp_page:1,submit_search:!1,submitted_search:!1},s.gotoPage=s.gotoPage.bind(Object(h.a)(Object(h.a)(s))),s.showPage=s.showPage.bind(Object(h.a)(Object(h.a)(s))),s.updatePaginate=s.updatePaginate.bind(Object(h.a)(Object(h.a)(s))),s.updatePageNumber=s.updatePageNumber.bind(Object(h.a)(Object(h.a)(s))),s.pageNumberSubmit=s.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(s))),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"gotoPage",value:function(e){parseInt(e,10)>0&&parseInt(e,10)!==this.state.current_page&&this.setState({current_page:e,loading:!0})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({gotopage_value:t,current_page:t,loading:!0})}},{key:"showPage",value:function(){var e=this,t=this.props.term;if(""!==t){var a=this.state.path;g.a.get(a,{params:{s:t,page:this.state.current_page,posts_per_page:this.state.paginate}}).then(function(t){for(var a=t.data.data,s=a.data,r=[],i=0;i<s.length;i++){var l=s[i],o=void 0;""!==l.thumbnail&&(o=n.a.createElement("img",{className:"list-thumbnail img-responsive",src:l.thumbnail,alt:l.post_title}));var c="";if(""!==l.description){var m=Q(l.description);m.length>400&&(m=m.substring(0,400)),c=m+"..."}var u="";""!==l.permalink&&(u=l.permalink.replace(E+"/",""));var d=n.a.createElement("li",{"data-id":l.ID,key:i,className:"img-clearfix"},n.a.createElement(j.a,{to:"wp-post/"+u},o),n.a.createElement("h4",null,n.a.createElement(j.a,{to:"/wp-post/"+u},l.post_title)),n.a.createElement("p",null,c));r.push(d)}if(0===r.length){var h=n.a.createElement("li",{key:0},n.a.createElement("i",null,"There are no articles matching your search criteria"));r.push(h)}e.setState({loading:!1,browseItems:r,current_page:a.current_page,last_page:a.last_page,total:a.total,submit_search:!1,submitted_search:!0})}).catch(function(e){console.log(e)})}else this.setState({loading:!1,submit_search:!1})}},{key:"componentDidMount",value:function(){this.showPage()}},{key:"componentDidUpdate",value:function(e,t){!0===this.props.submit_search&&e.term!==this.props.term&&this.setState({loading:!0}),t.current_page===this.state.current_page&&t.paginate===this.state.paginate||!0!==this.state.loading||this.showPage(),t.submit_search!==this.props.submit_search&&this.showPage()}},{key:"render",value:function(){var e,t="",a="articles";this.state.total>0&&(1===this.state.total&&(a="article"),t=n.a.createElement("div",{className:"results-found"},n.a.createElement("i",null,"Found ",this.state.total," ",a))),e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"search-items"},this.state.browseItems);var s="",r="",i="";10===this.state.paginate&&(s="active"),25===this.state.paginate&&(r="active"),50===this.state.paginate&&(i="active");var l=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:s},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:r},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:i},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.gotoPage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"})))))),o=n.a.createElement("div",null,n.a.createElement("p",null,"\xa0"),n.a.createElement("p",null,"\xa0"),n.a.createElement("p",null,"\xa0"));return(""!==this.props.term&&this.state.browseItems.length>0||this.state.submitted_search)&&(o=n.a.createElement("div",{className:"search-letters-container"},n.a.createElement("h3",null,"Content ",t),l,e,l)),n.a.createElement("div",null,o)}}]),t}(s.Component),Ze=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={term:"",submit_search:!1,search_letters:!0,search_content:!0},e.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submit_search:!0})}},{key:"toggleCheckbox",value:function(e){var t=!0;"true"===e.target.value&&(t=!1),"search-letters"===e.target.name&&this.setState({search_letters:t}),"search-content"===e.target.name&&this.setState({search_content:t})}},{key:"componentWillMount",value:function(){var e="";"undefined"!==typeof this.props.match.params.term&&(e=this.props.match.params.term),this.setState({term:e})}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.submit_search&&this.setState({submit_search:!1}),e.match.url!==this.props.match.url&&this.setState({term:this.props.match.params.term,submit_search:!0})}},{key:"render",value:function(){var e=[],t=[];return this.state.search_letters&&(e=n.a.createElement(He,{term:this.state.term,submit_search:this.state.submit_search})),this.state.search_content&&(t=n.a.createElement(qe,{term:this.state.term,submit_search:this.state.submit_search})),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"Search",path:""}]}),n.a.createElement("h2",null,"Search"),n.a.createElement("div",{style:{margin:"20px 0 0 0"}},n.a.createElement("form",{name:"general-search-input",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"input-group"},n.a.createElement("input",{onChange:this.handleChange,value:this.state.term,name:"search-bar",type:"text",className:"form-control",placeholder:"Search Letters 1916-1923"}),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{className:"btn btn-default",onClick:this.handleSubmit,type:"button",id:"search-letters-submit"},"Search"))),n.a.createElement("div",{className:"search-checkboxes"},n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",null,n.a.createElement("input",{onChange:this.toggleCheckbox.bind(this),name:"search-letters",type:"checkbox",checked:this.state.search_letters,value:this.state.search_letters})," search letters")),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",null,n.a.createElement("input",{onChange:this.toggleCheckbox.bind(this),name:"search-content",type:"checkbox",checked:this.state.search_content,value:this.state.search_content})," search content"))))),e,t)))}}]),t}(s.Component),We=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,topics:[],autocomplete_visible:!1,autocomplete_value:""},e.toggleElementChildren=e.toggleElementChildren.bind(Object(h.a)(Object(h.a)(e))),e.toggleAutocomplete=e.toggleAutocomplete.bind(Object(h.a)(Object(h.a)(e))),e.autocomplete=e.autocomplete.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggleElementChildren",value:function(e){e.preventDefault();var t=e.currentTarget;if(null===t.nextSibling)return!1;var a=t.attributes["data-toggle"].value,s="closed";"closed"===a&&(s="open"),t.setAttribute("data-toggle",s),B(t.nextSibling,a,s),B(t,a,s)}},{key:"loadTopics",value:function(){if(null!==sessionStorage.getItem("topics_list")&&sessionStorage.getItem("topics_list").length>0){for(var e=JSON.parse(sessionStorage.getItem("topics_list")),t=[],a=0;a<e.length;a++){var s=e[a],n=this.topicItem(s,a);t.push(n)}this.setState({loading:!1,topics:t})}else{var r=this;g.a.get(y+"topics?status=1&transcription_status=2").then(function(e){var t=e.data.data;console.log(typeof t);for(var a=[],s=0;s<t.length;s++){var n=t[s],i=r.topicItem(n,s);a.push(i)}r.setState({loading:!1,topics:a})}).catch(function(e){console.log(e)})}}},{key:"topicItem",value:function(e,t){var a=e.children,s=[],r=[],i="";return a.length>0&&(s=this.topicChildren(a,t),r=n.a.createElement("span",{className:"toggle-children",onClick:this.toggleElementChildren,"data-toggle":"closed"},n.a.createElement("i",{className:"fa fa-angle-left"})),i=" has-children"),n.a.createElement("li",{key:t,"data-key":t},n.a.createElement("span",{className:"href-btn",onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},e.name),n.a.createElement("span",{className:"select-topic"},n.a.createElement("i",{className:"fa fa-circle-o","data-id":e.id})),n.a.createElement("span",{className:"topic-label"+i,"data-toggle":"closed"},e.name," (",n.a.createElement("span",{className:"count","data-default":e.count},e.count),")")),r,s)}},{key:"topicChildren",value:function(e,t){var a=[],s=[];if(e.length>0){for(var r=0;r<e.length;r++){var i=e[r],l=this.topicItem(i,t+"."+r);a.push(l)}s=n.a.createElement("ul",{className:"topics-list-children","data-parent":t},a)}return s}},{key:"toggleAutocomplete",value:function(){return!1}},{key:"autocomplete",value:function(e){this.setState({autocomplete_value:e.target.value})}},{key:"componentDidMount",value:function(){this.loadTopics()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",null,n.a.createElement("h5",{onClick:this.toggleAutocomplete},"Keywords"),n.a.createElement("ul",{className:"topics-list"},this.state.topics)),n.a.createElement("div",{className:"topics-container"},e)}}]),t}(n.a.Component),Xe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("sources_list")&&sessionStorage.getItem("sources_list").length>0){var e=JSON.parse(sessionStorage.getItem("sources_list"));this.setItems(e)}else{var t=this;g.a.get(y+"sources").then(function(e){var a=e.data.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.source;""===s.source&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.source),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.source))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"sources-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Sources"),e)}}]),t}(n.a.Component),Ke=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("authors_list")&&sessionStorage.getItem("authors_list").length>0){var e=JSON.parse(sessionStorage.getItem("authors_list"));this.setItems(e)}else{var t=this;g.a.get(y+"authors?status=1&transcription_status=2").then(function(e){var a=e.data.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.creator;""===s.creator&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.creator),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.creator))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"authors-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Authors"),e)}}]),t}(n.a.Component),$e=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("genders_list")&&sessionStorage.getItem("genders_list").length>0){var e=JSON.parse(sessionStorage.getItem("genders_list"));this.setItems(e)}else{var t=this;g.a.get(y+"genders?status=1&transcription_status=2").then(function(e){var a=e.data.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.gender;""===s.gender&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.gender),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.gender))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",null,n.a.createElement("h5",null,"Gender"),n.a.createElement("ul",{className:"genders-list"},this.state.items)),n.a.createElement("div",{className:"topics-container"},e)}}]),t}(n.a.Component),et=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("languages_list")&&sessionStorage.getItem("languages_list").length>0){var e=JSON.parse(sessionStorage.getItem("languages_list"));this.setItems(e)}else{var t=this;g.a.get(y+"languages?status=1&transcription_status=2").then(function(e){var a=e.data.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.language;""===s.language&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.language),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.language))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"languages-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Language"),e)}}]),t}(n.a.Component),tt=a(407),at=(a(771),a(21)),st=a.n(at),nt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={disabled:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=st()("1916-01-01"),t=this.props,a=t.value;null!==a&&(e=a);var s=n.a.createElement("div",{className:"input-group input-group-sm"},n.a.createElement(tt.a,{dateFormat:"YYYY-MM-DD",selected:a,onChange:t.onChange,highlightDates:t.dates,openToDate:e,placeholderText:t.placeholder}),n.a.createElement("span",{className:"input-group-btn",onClick:t.clearFunction},n.a.createElement("button",{type:"button",className:"btn btn-letters btn-flat btn-sm"},n.a.createElement("i",{className:"fa fa-times"}))));return n.a.createElement("div",{className:"datepicker-wrapper"},s)}}]),t}(n.a.Component),rt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,startValue:null,endValue:null,startOpen:!1,endOpen:!1,calendarDates:[],excludedDates:[]},a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a.setItems=a.setItems.bind(Object(h.a)(Object(h.a)(a))),a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.startDateClear=a.startDateClear.bind(Object(h.a)(Object(h.a)(a))),a.endDateClear=a.endDateClear.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("date_created_list")&&sessionStorage.getItem("date_created_list").length>0){var e=JSON.parse(sessionStorage.getItem("date_created_list"));this.setItems(e)}else{var t=this;g.a.get(y+"date_created?status=1&transcription_status=2").then(function(e){var a=e.data.data;t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a].date_created;if(s.split("-").length>=2&&10===(s=s.replace("T00:00:00","")).length){var n=st()(s);t.includes(n)||t.push(n)}}this.setState({loading:!1,calendarDates:t})}},{key:"updateItems",value:function(e){for(var t=Object.keys(e).map(function(e){return e}),a=[],s=0;s<t.length;s++){var n=t[s];if(n.split("-").length>=2&&10===(n=n.replace("T00:00:00","")).length){var r=st()(n);a.includes(r)||a.push(r)}}this.setState({loading:!1,calendarDates:a})}},{key:"onChange",value:function(e,t){if("endValue"===e&&null!==this.state.startValue){var a=st()(this.state.startValue);st()(t)<a&&(t=this.state.startValue)}this.setState(Object(x.a)({},e,t))}},{key:"startDateClear",value:function(){this.setState({startValue:null})}},{key:"endDateClear",value:function(){this.setState({endValue:null})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"componentDidUpdate",value:function(e,t){if(t.startValue!==this.state.startValue||t.endValue!==this.state.endValue){var a=null,s=null;null!==this.state.startValue&&(a=st()(this.state.startValue).format("YYYY-MM-DD")),null!==this.state.endValue&&(s=st()(this.state.endValue).format("YYYY-MM-DD"));var n={startValue:a,endValue:s};this.props.returnfunction(n)}e.availableDates!==this.props.availableDates&&this.updateItems(this.props.availableDates)}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(nt,{placeholder:"From",value:this.state.startValue,onChange:this.onChange.bind(this,"startValue"),clearFunction:this.startDateClear,dates:this.state.calendarDates})),n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(nt,{placeholder:"To",value:this.state.endValue,onChange:this.onChange.bind(this,"endValue"),clearFunction:this.endDateClear,dates:this.state.calendarDates}))),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Date sent"),e)}}]),t}(n.a.Component),it=a(32),lt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,browseItems:[],page:1,current_page:1,temp_page:1,path:y+"index",topics_path:y+"topicsbyid/",total:0,sort:"desc",paginate:10,paginationHTML:[],length:0,firstLoad:1,selectedTopics:[],keywords_ids:[],sources:[],authors:[],genders:[],languages:[],dates_sent:[],date_start:[],date_end:[],queryStatus:1,queryTranscriptionStatus:2},e.updatePage=e.updatePage.bind(Object(h.a)(Object(h.a)(e))),e.showPage=e.showPage.bind(Object(h.a)(Object(h.a)(e))),e.updatePaginate=e.updatePaginate.bind(Object(h.a)(Object(h.a)(e))),e.updateSort=e.updateSort.bind(Object(h.a)(Object(h.a)(e))),e.updatePageNumber=e.updatePageNumber.bind(Object(h.a)(Object(h.a)(e))),e.pageNumberSubmit=e.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(e))),e.topicFilter=e.topicFilter.bind(Object(h.a)(Object(h.a)(e))),e.filterContent=e.filterContent.bind(Object(h.a)(Object(h.a)(e))),e.browserItems=e.browserItems.bind(Object(h.a)(Object(h.a)(e))),e.sourcesFilter=e.sourcesFilter.bind(Object(h.a)(Object(h.a)(e))),e.authorsFilter=e.authorsFilter.bind(Object(h.a)(Object(h.a)(e))),e.gendersFilter=e.gendersFilter.bind(Object(h.a)(Object(h.a)(e))),e.languagesFilter=e.languagesFilter.bind(Object(h.a)(Object(h.a)(e))),e.datecreatedFilter=e.datecreatedFilter.bind(Object(h.a)(Object(h.a)(e))),e.setSessionStorage=e.setSessionStorage.bind(Object(h.a)(Object(h.a)(e))),e.checkSessionStorage=e.checkSessionStorage.bind(Object(h.a)(Object(h.a)(e))),e.clearFilters=e.clearFilters.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updatePage",value:function(e){e>0&&e!==this.state.current_page&&this.setState({loading:!0,current_page:e,temp_page:e})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updateSort",value:function(e){e!==this.state.sort&&this.setState({sort:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({current_page:t,loading:!0})}},{key:"topicFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-topic")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".topic-label")[0],n=a.className,r=this.state.selectedTopics,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.getAttribute("data-id");if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}this.setState({loading:!0,selectedTopics:i,keywords_ids:i}),B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active")}},{key:"sourcesFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.sources,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,sources:i})}},{key:"authorsFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.authors,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,authors:i})}},{key:"gendersFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.genders,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,genders:i})}},{key:"languagesFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.languages,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,languages:i})}},{key:"datecreatedFilter",value:function(e){var t=e.startValue,a=e.endValue;this.setState({loading:!0,date_start:t,date_end:a})}},{key:"clearFilters",value:function(){this.state.selectedTopics===[]&&this.state.keywords_ids===[]&&this.state.sources===[]&&this.state.authors===[]&&this.state.genders===[]&&this.state.languages===[]&&this.state.date_start===[]&&this.state.date_end===[]||this.setState({loading:!0,selectedTopics:[],keywords_ids:[],sources:[],authors:[],genders:[],languages:[],date_start:[],date_end:[]})}},{key:"selectedTopicsToggleChildren",value:function(e,t){var a=this.state.selectedTopics,s=i.a.findDOMNode(e).children;if("object"===typeof s[3])for(var n=s[3],r=i.a.findDOMNode(n).children,l=0;l<r.length;l++){var o=i.a.findDOMNode(r[l]).children,c=i.a.findDOMNode(o[0]).children,m=c[0].getAttribute("data-id");if("fa fa-circle-o"===t)-1===a.indexOf(m)&&a.push(m);else if(a.indexOf(m)>-1){var u=a.indexOf(m);a.splice(u,1)}if("object"===typeof o[3]){var d=i.a.findDOMNode(o[3]).parentNode;this.selectedTopicsToggleChildren(d,t)}var h="fa-check-circle-o",p="fa-circle-o";"fa fa-circle-o"===t&&(h="fa-circle-o",p="fa-check-circle-o"),P(c[0],h,p)}this.setState({selectedTopics:a})}},{key:"filterContent",value:function(){var e=this,t=y+"indexfiltered/";g.a.get(t,{params:{sort:this.state.sort,page:this.state.current_page,paginate:this.state.paginate,keywords:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,status:this.state.queryStatus,transcription_status:this.state.queryTranscriptionStatus}}).then(function(t){var a=t.data.data,s=a.data,r=[];r="undefined"!==typeof s&&s.length>0?e.browserItems(s):n.a.createElement(J,null);var i=a.current_page;a.last_page<a.current_page?(i=a.last_page,e.setState({loading:!1,browseItems:r,current_page:i,last_page:a.last_page,total:a.total,firstLoad:0})):e.setState({loading:!1,browseItems:r,last_page:a.last_page,total:a.total,firstLoad:0}),Y(e.state.keywords_ids),G("sources-list",e.state.sources),G("authors-list",e.state.authors),G("genders-list",e.state.genders),G("languages-list",e.state.languages)}).catch(function(e){console.log(e)})}},{key:"updateFilters",value:function(){var e=this,t=y+"indexfilteredfilters/";g.a.get(t,{params:{sort:this.state.sort,page:1,paginate:this.state.paginate,keywords:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,status:this.state.queryStatus,transcription_status:this.state.queryTranscriptionStatus}}).then(function(t){var a=t.data.data;L(a.keywords),R("sources-list",a.sources),R("authors-list",a.authors),R("genders-list",a.genders),R("languages-list",a.languages),e.setState({dates_sent:a.dates_sent})}).catch(function(e){console.log(e)})}},{key:"showPage",value:function(){var e=this,t=this.state.path;g.a.get(t,{params:{page:this.state.current_page,sort:this.state.sort,paginate:this.state.paginate}}).then(function(t){var a=t.data.data,s=a.data,n=[];"undefined"!==typeof s&&(n=e.browserItems(s)),e.setState({loading:!1,browseItems:n,current_page:a.current_page,last_page:a.last_page,total:a.total,firstLoad:0})}).catch(function(e){console.log(e)})}},{key:"browserItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=JSON.parse(s.element),i=void 0;r.pages.length>0&&(i=n.a.createElement("img",{className:"list-thumbnail img-responsive",src:Z(E+"/diyhistory/archive/square_thumbnails/"+r.pages[0].archive_filename),alt:r.title}));for(var l=[],o=0;o<r.topics.length;o++){var c=r.topics[o],m="";o>0&&(m=", ");var u=n.a.createElement("span",{"data-id":c.topic_ID,key:o},m,c.topic_name);l.push(u)}var d="";if(null!==r.pages[0].transcription&&""!==r.pages[0].transcription){var h=r.pages[0].transcription.replace(/<[^>]+>/gi," ");h=W(h,"&amp;","&"),(h=W(h,"&#39;","'")).length>400&&(h=h.substring(0,400)),d=h+"..."}var p=n.a.createElement("li",{"data-id":s.id,key:a,className:"img-clearfix"},n.a.createElement(j.a,{to:"item/"+s.id},i),n.a.createElement("h4",null,n.a.createElement(j.a,{to:"item/"+s.id},r.title)),n.a.createElement("span",{className:"browse-item-keywords"},"Keywords: ",l),n.a.createElement("p",{dangerouslySetInnerHTML:{__html:d}}));t.push(p)}return t}},{key:"checkSessionStorage",value:function(){if(null!==sessionStorage.getItem("browse")){var e=JSON.parse(sessionStorage.getItem("browse"));this.setState({sort:e.sort,current_page:e.current_page,paginate:e.paginate,keywords_ids:e.keywords_ids,sources:e.sources,authors:e.authors,genders:e.genders,languages:e.languages,date_start:e.date_start,date_end:e.date_end,queryStatus:e.queryStatus,queryTranscriptionStatus:e.queryTranscriptionStatus})}}},{key:"setSessionStorage",value:function(){var e={sort:this.state.sort,current_page:this.state.current_page,paginate:this.state.paginate,selectedTopics:this.state.selectedTopics,keywords_ids:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,queryStatus:this.state.queryStatus,queryTranscriptionStatus:this.state.queryTranscriptionStatus};sessionStorage.setItem("browse",JSON.stringify(e))}},{key:"componentDidMount",value:function(){Object(it.loadProgressBar)(),this.checkSessionStorage();var e=this;setTimeout(function(){e.filterContent(),e.updateFilters()},500)}},{key:"componentDidUpdate",value:function(e,t){if(t.loading!==this.state.loading&&(t.current_page!==this.state.current_page||t.paginate!==this.state.paginate||t.sort!==this.state.sort||t.keywords_ids!==this.state.keywords_ids||t.sources!==this.state.sources||t.authors!==this.state.authors||t.genders!==this.state.genders||t.languages!==this.state.languages||t.date_start!==this.state.date_start||t.date_end!==this.state.date_end)){this.setSessionStorage();var a=this;setTimeout(function(){a.filterContent(),a.updateFilters()},500)}}},{key:"render",value:function(){var e;if(this.state.loading&&1===this.state.firstLoad){var t=F(11);e=n.a.createElement("ul",{className:"browse-items"},t)}else e=this.state.loading&&0===this.state.firstLoad?n.a.createElement("ul",{className:"browse-items blur"},this.state.browseItems):n.a.createElement("ul",{className:"browse-items"},this.state.browseItems);var a="",s="";"desc"===this.state.sort&&(a="active"),"asc"===this.state.sort&&(s="active");var r="",i="",l="";10===this.state.paginate&&(r="active"),25===this.state.paginate&&(i="active"),50===this.state.paginate&&(l="active");var o=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Sort",id:"sort-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updateSort.bind(this,"desc"),className:a},n.a.createElement("i",{className:"fa fa-sort-amount-desc"})," Created date Desc"),n.a.createElement(M.a,{key:"2",onClick:this.updateSort.bind(this,"asc"),className:s},n.a.createElement("i",{className:"fa fa-sort-amount-asc"})," Created date Asc")),n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:r},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:i},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:l},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.updatePage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"}))))));return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"Browse",path:""}]}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement("h3",{className:"column-title"},"Filters",n.a.createElement("small",{className:"pull-right",style:{cursor:"pointer"},onClick:this.clearFilters,title:"Clear all filters"},"clear all ",n.a.createElement("i",{className:"fa fa-times-circle-o"})))),n.a.createElement("div",{className:"col-xs-12 col-sm-9"},n.a.createElement("h2",null,"Browse"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement(We,{returnfunction:this.topicFilter,selected:this.state.selectedTopics}),n.a.createElement(Xe,{returnfunction:this.sourcesFilter}),n.a.createElement(Ke,{returnfunction:this.authorsFilter}),n.a.createElement($e,{returnfunction:this.gendersFilter}),n.a.createElement(et,{returnfunction:this.languagesFilter}),n.a.createElement(rt,{returnfunction:this.datecreatedFilter,availableDates:this.state.dates_sent})),n.a.createElement("div",{className:"col-xs-12 col-sm-9"},o,n.a.createElement("div",{className:"list-items-container"},e),o)))}}]),t}(s.Component),ot=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={email:"",submitStatus:!1,error:!1,errorText:"",success:!1,successText:""},a.handleFormChange=a.handleFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(x.a)({},s,a))}},{key:"handleFormSubmit",value:function(e){if(e.preventDefault(),this.state.submitStatus)return!1;this.setState({submitStatus:!1});var t=this;g.a.post(y+"password-reset-email",{email:this.state.email}).then(function(e){e.data.status?t.setState({email:"",submitStatus:!0,error:!1,errorText:"",success:!0,successText:e.data.message}):t.setState({submitStatus:!1,error:!0,errorText:e.data.errors,success:!1,successText:""}),t.setState({submitStatus:!1})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[];e.push({label:"Password Restore",path:""});var t="error-container";this.state.error&&(t="error-container-visible");var a=[];this.state.submitStatus&&(a=n.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch"}));var s="";this.state.success||(s=n.a.createElement("p",null,"To reset your password please enter below the email you used when you subscribed with Letters 1916-1923."));var r=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("div",{className:t},this.state.errorText)),n.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group has-feedback"},n.a.createElement("input",{name:"email",type:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:this.handleFormChange}),n.a.createElement("span",{className:"glyphicon glyphicon-envelope form-control-feedback"})),n.a.createElement("button",{type:"submit",className:"btn btn-letters"},"Reset My Password ",a))));this.state.success&&(r=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 text-center",style:{padding:"20px 0"}},this.state.successText)));var i=n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},s)),r);return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:e}),n.a.createElement("h1",null,"Password Restore"),n.a.createElement("div",{className:"item-container"},i))))}}]),t}(s.Component),ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",password_confirm:"",passwordStrength:0,strengthClass:"",strengthLabel:"",submitStatus:!1,error:!1,errorText:"",success:!1,successText:""},a.handleFormChange=a.handleFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.errorValidation=a.errorValidation.bind(Object(h.a)(Object(h.a)(a))),a.passwordStrengthCalculate=a.passwordStrengthCalculate.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;"password"===s&&this.passwordStrengthCalculate(a),this.setState(Object(x.a)({},s,a))}},{key:"handleFormSubmit",value:function(e){if(e.preventDefault(),this.errorValidation()){if(this.state.submitStatus)return!1;this.setState({submitStatus:!0});var t=this,a={email:this.state.email.trim(),password:this.state.password.trim(),password_confirmation:this.state.password_confirm.trim(),token:this.props.match.params.token};g()({method:"POST",url:y+"password-reset",data:a,crossDomain:!0}).then(function(e){e.data.status?t.setState({email:"",password:"",password_confirm:"",passwordStrength:0,strengthClass:"",strengthLabel:"",error:!1,errorText:"",success:!0,successText:e.data.message}):t.setState({submitStatus:!1,error:!0,errorText:e.data.errors,success:!1,successText:""})}).catch(function(e){console.log(e),t.setState({submitStatus:!1})})}}},{key:"errorValidation",value:function(){return-1===this.state.email.search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?(this.emailInput.focus(),this.setState({error:!0,errorText:"Please enter a valid E-mail Address to continue!"}),!1):this.state.password.trim().length<5?(this.passwordInput.focus(),this.setState({error:!0,errorText:"Your new password must contain at least 6 characters"}),!1):this.state.password.trim()!==this.state.password_confirm.trim()?(this.passwordConfirmInput.focus(),this.setState({error:!0,errorText:"Password and password confirm don't match. Please try again."}),!1):(this.setState({error:!1,errorText:""}),!0)}},{key:"passwordStrengthCalculate",value:function(e){var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),a=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"),s="",n="";e.trim().length>0&&(t.test(e)?(s=" green",n="Strong"):a.test(e)?(s=" orange",n="Medium"):(s=" red",n="Weak")),this.setState({strengthClass:s,strengthLabel:n})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[];"true"===sessionStorage.getItem("sessionActive")&&(t=n.a.createElement(A.a,{to:"/user-profile"}));var a=[];a.push({label:"Password Reset",path:""});var s="error-container";this.state.error&&(s="error-container-visible");var r=[];this.state.submitStatus&&(r=n.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch"}));var i="";this.state.success||(i=n.a.createElement("p",null,"To reset your password please enter the email you provided during registration and your new password below."));var l=n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("div",{className:s},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.errorText}})))),n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"E-mail")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{className:"form-control",name:"email",type:"email",autoComplete:"off",placeholder:"Enter a valid email address",value:this.state.email,onChange:this.handleFormChange.bind(this),ref:function(t){e.emailInput=t}})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"Password")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{className:"form-control",name:"password",type:"password",autoComplete:"off",placeholder:"Enter your password",value:this.state.password,onChange:this.handleFormChange.bind(this),ref:function(t){e.passwordInput=t}}))),n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement("div",{style:{paddingRight:"10px"}},n.a.createElement("div",{className:"password-strength"+this.state.strengthClass},n.a.createElement("div",{className:this.state.strengthClass}),n.a.createElement("div",{className:"password-text"},this.state.strengthLabel))))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"Confirm Password")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{className:"form-control",name:"password_confirm",type:"password",placeholder:"Confirm your password",autoComplete:"off",value:this.state.password_confirm,onChange:this.handleFormChange.bind(this),ref:function(t){e.passwordConfirmInput=t}})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 text-center"},n.a.createElement("button",{type:"submit",className:"btn btn-letters"},"Reset My Password ",r)))));this.state.success&&(l=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 text-center",style:{padding:"20px 0"}},this.state.successText)));var o=n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},i)),l);return n.a.createElement("div",{className:"container"},t,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:a}),n.a.createElement("h1",null,"Password Reset"),n.a.createElement("div",{className:"item-container"},o))))}}]),t}(s.Component),mt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={form:{name:"",email:"",password:"",password_confirm:"",license_agreement:!1,subscribe_to_newsletter:!1},submitStatus:0,errorStatus:!1,errorMessage:"",passwordStrength:0,strengthClass:"",strengthLabel:"",showResponse:!1,responseText:"",licenseAgreementText:"",subscribeToNewsletterText:""},a.loadRights=a.loadRights.bind(Object(h.a)(Object(h.a)(a))),a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a.passwordStrengthCalculate=a.passwordStrengthCalculate.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadRights",value:function(){var e=this;g.a.get(N+"post",{params:{slug:"terms-and-conditions-all-users"}}).then(function(t){var a=t.data;if("OK"===t.statusText){var s=n.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.rendered}});e.setState({licenseAgreementText:s})}}).catch(function(e){console.log(e)}),g.a.get(N+"post",{params:{slug:"newsletter-subscription"}}).then(function(t){var a=t.data;if("OK"===t.statusText){var s=n.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.rendered}});e.setState({subscribeToNewsletterText:s})}}).catch(function(e){console.log(e)})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,s="checkbox"===t.type?t.checked:t.value,n=Object.assign({},this.state);n.form[a]=s,"password"===a&&this.passwordStrengthCalculate(s),this.setState({newState:n})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!0===this.errorValidation()){if(this.state.submitStatus)return!1;this.setState({submitStatus:!0});var t={name:this.state.form.name.trim(),email:this.state.form.email.trim(),password:this.state.form.password.trim(),password_confirmation:this.state.form.password_confirm.trim(),license_agreement:this.state.form.license_agreement,subscribe_to_newsletter:this.state.form.subscribe_to_newsletter},a=this;g()({method:"POST",url:y+"register",data:t,crossDomain:!0}).then(function(e){a.setState({submitStatus:!1,showResponse:!0,responseText:e.data.message})}).catch(function(e){var t=e.response.data,s="";for(var n in t.errors)s=t.errors[n];""===s&&(s=t.message),a.setState({submitStatus:!1,errorStatus:!0,errorMessage:s})})}}},{key:"componentDidMount",value:function(){Object(it.loadProgressBar)(),this.loadRights()}},{key:"errorValidation",value:function(){return 0===this.state.form.name.trim().length?(this.nameInput.focus(),this.setState({errorStatus:!0,errorMessage:"Please enter your Full Name to continue!"}),!1):-1===this.state.form.email.search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?(this.emailInput.focus(),this.setState({errorStatus:!0,errorMessage:"Please enter a valid E-mail Address to continue!"}),!1):this.state.form.password.trim().length<5?(this.passwordInput.focus(),this.setState({errorStatus:!0,errorMessage:"Your new password must contain at least 6 characters"}),!1):this.state.form.password.trim()!==this.state.form.password_confirm.trim()?(this.passwordInput.focus(),this.setState({errorStatus:!0,errorMessage:"Password and password confirm don't match. Please try again."}),!1):!1===this.state.form.license_agreement?(this.licenceAgreementInput.focus(),this.setState({errorStatus:!0,errorMessage:"You must accept the license agreement to continue."}),!1):(this.setState({errorStatus:!1,errorMessage:""}),!0)}},{key:"passwordStrengthCalculate",value:function(e){var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),a=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"),s="",n="";e.trim().length>0&&(t.test(e)?(s=" green",n="Strong"):a.test(e)?(s=" orange",n="Medium"):(s=" red",n="Weak")),this.setState({strengthClass:s,strengthLabel:n})}},{key:"render",value:function(){var e,t,a,s=this,r={label:t,path:""},i=[];if("true"===sessionStorage.getItem("sessionActive"))i=n.a.createElement(A.a,{to:{pathname:"/user-profile"}});else{var l=[];if(this.state.submitStatus&&(l=n.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch"})),t="User registration",this.state.showResponse)e=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("p",{className:"text-center"},this.state.responseText)));else{var o="error-container";this.state.errorStatus&&(o="error-container-visible"),e=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-12"},n.a.createElement("p",{className:"text-center"},"Please complete the following form to register for a new account with Letters 1916-1923."),n.a.createElement("form",{name:"registration-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:o},this.state.errorMessage),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"Name")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("input",{className:"form-control",name:"name",type:"text",placeholder:"Enter your full name",value:this.state.form.name,onChange:this.handleChange.bind(this),ref:function(e){s.nameInput=e}})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"E-mail Address")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("input",{className:"form-control",name:"email",type:"email",autoComplete:"off",placeholder:"Enter a valid email address",value:this.state.form.email,onChange:this.handleChange.bind(this),ref:function(e){s.emailInput=e}})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"Password")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("input",{className:"form-control",name:"password",type:"password",autoComplete:"off",placeholder:"Enter your password",value:this.state.form.password,onChange:this.handleChange.bind(this),ref:function(e){s.passwordInput=e}})),n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement("div",{className:"password-strength"+this.state.strengthClass},n.a.createElement("div",{className:this.state.strengthClass}),n.a.createElement("div",{className:"password-text"},this.state.strengthLabel))))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4 text-right"},n.a.createElement("label",null,"Confirm Password")),n.a.createElement("div",{className:"col-xs-12 col-sm-5"},n.a.createElement("input",{className:"form-control",name:"password_confirm",type:"password",placeholder:"Confirm your password",autoComplete:"off",value:this.state.form.password_confirm,onChange:this.handleChange.bind(this)})))),n.a.createElement("hr",null),n.a.createElement("h4",null,"License Agreement"),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"license-agreement-text"},this.state.licenseAgreementText),n.a.createElement("label",null,n.a.createElement("input",{name:"license_agreement",type:"checkbox",onChange:this.handleChange.bind(this),ref:function(e){s.licenceAgreementInput=e}})," Accept license agreement")),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",null,this.state.subscribeToNewsletterText),n.a.createElement("label",null,n.a.createElement("input",{name:"subscribe_to_newsletter",type:"checkbox",onChange:this.handleChange.bind(this)})," Subscribe to newsletter")),n.a.createElement("button",{type:"submit",className:"btn btn-letters"},"Submit ",l))))}a=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:r}),n.a.createElement("h1",null,t),n.a.createElement("div",{className:"item-container letter-form-container"},e))))}return n.a.createElement("div",null,i,a)}}]),t}(s.Component),ut=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,error:!1,errorMsg:""},a.verifyAccount=a.verifyAccount.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"verifyAccount",value:function(){var e=this;g.a.get(y+"verify-account/"+this.props.match.params.activation_code).then(function(t){!0===t.data.status?e.setState({loading:!1,error:!1,errorMsg:""}):!1===t.data.status&&e.setState({loading:!1,error:!0,errorMsg:t.data.errors})}).catch(function(t){console.log(t),e.setState({loading:!1,error:!0,errorMsg:""})})}},{key:"componentDidMount",value:function(){this.verifyAccount()}},{key:"render",value:function(){var e=n.a.createElement("div",{className:"loader-container active-img-loader"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}));this.state.loading||(e=this.state.error?n.a.createElement("div",{style:{padding:"30px 0 50px 0"}},n.a.createElement("h4",null,"Error in verifying user account"),n.a.createElement("p",null,this.state.errorMsg)):n.a.createElement("div",{style:{padding:"30px 0 50px 0"}},n.a.createElement("h4",null,"Welcome to Letters 1916-1923!"),n.a.createElement("p",null,"Your new user account has been successfully verified. ",n.a.createElement("br",null),"Please login to start using your new user account.")));return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"Verify Account",path:""}]}),n.a.createElement("h1",null,"Verify new User Account"))),n.a.createElement("div",{className:"item-container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},e))))}}]),t}(s.Component),dt=a(161),ht=a.n(dt),pt=a(164),gt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={files:[],dissaproved_files:[],post_status:!1,upload_loader:!1,progress_bar_text:"",progress_bar_width:0,view_updated_page_btn:[],redirect:[]},e.onDrop=e.onDrop.bind(Object(h.a)(Object(h.a)(e))),e.uploadFiles=e.uploadFiles.bind(Object(h.a)(Object(h.a)(e))),e.viewUpdated=e.viewUpdated.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({files:[],dissaproved_files:[],post_status:!1,upload_loader:!1,progress_bar_text:"",progress_bar_width:0})}},{key:"onDrop",value:function(e){for(var t=[],a=[],s=0;s<e.length;s++){var n=e[s];"text/xml"===n.type?t.push(n):a.push(n)}this.setState({files:t,dissaproved_files:a})}},{key:"viewUpdated",value:function(e){this.setState({redirect:n.a.createElement(A.a,{to:e})})}},{key:"uploadFiles",value:function(){if(0===this.state.files.length)return!1;if(!0===this.state.post_status)return!1;this.setState({post_status:!0});var e=this.state.files,t=this,a=y+"fileupload",s=new FormData;e.forEach(function(e){s.append("data[]",e)}),s.append("format","xml_tei_letter19xx");var r=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+r,t.setState({upload_loader:!0}),g()({method:"post",url:a,data:s,crossDomain:!0,config:{headers:{"Content-Type":"multipart/form-data"}},onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total),s="Uploading... "+parseFloat(a).toFixed(2)+"%",n=a+"%";t.setState({progress_bar_text:s,progress_bar_width:n})}}).then(function(e){var a=e.data;if(200===a.status){t.setState({files:[],dissaproved_files:[],post_status:!1,progress_bar_text:a.message});var s=a.data.document_id,r=n.a.createElement(j.a,{to:"/letter/"+s,className:"btn btn-default"},"View updated letter page ",n.a.createElement("i",{className:"fa fa-chevron-right"}));setTimeout(function(){t.setState({upload_loader:!1,progress_bar_text:"",progress_bar_width:0,view_updated_page_btn:r})},2e3)}}).catch(function(e){t.setState({post_status:!1}),console.log(e)})}},{key:"render",value:function(){var e="",t="",a=n.a.createElement("button",{className:"btn btn-success",onClick:this.uploadFiles,disabled:!0},n.a.createElement("i",{className:"fa fa-upload"})," Upload");this.state.files.length>0&&(e=n.a.createElement("div",null,n.a.createElement("b",null,"Selected file"),n.a.createElement("ul",null,this.state.files.map(function(e){return n.a.createElement("span",{key:e.name},e.name," - ",e.size," bytes")}))),a=n.a.createElement("button",{className:"btn btn-success",onClick:this.uploadFiles},n.a.createElement("i",{className:"fa fa-upload"})," Upload")),this.state.dissaproved_files.length>0&&(t=n.a.createElement("div",null,"The file ",n.a.createElement("b",{className:"dissaproved"},this.state.dissaproved_files.map(function(e){return n.a.createElement("span",{key:e.name,className:"dissaproved-file"},e.name)}))," is not allowed!"));var s,r="",i=this.state.progress_bar_width,l=this.state.progress_bar_text;!0===this.state.upload_loader&&(s={width:i},r=n.a.createElement("div",{className:"upload-status-container",id:"upload-xml-status"},n.a.createElement("div",{className:"upload-status-bar-inner",style:s}),n.a.createElement("div",{className:"upload-status-bar-text"},l)));return n.a.createElement("div",null,this.state.redirect,n.a.createElement("b",null,"Upload new XML file"),n.a.createElement("div",null,n.a.createElement("div",{className:"dropzone"},n.a.createElement(pt.a,{multiple:!1,onDrop:this.onDrop.bind(this),style:{width:"100%",height:"auto"}},n.a.createElement("p",null,"To upload a new XML file drag and drop the file into the box",n.a.createElement("br",null)," - or - ",n.a.createElement("br",null),"click in the box to browse your computer for the file."),e,t)),r,n.a.createElement("br",null),a," ",this.state.view_updated_page_btn))}}]),t}(s.Component),ft=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,title:"",source:"",creator:"",sent_location:"",language:"",document_id:0,recipient:"",time_zone:"",collection:"",description:"",date_created:"",number_pages:0,request_time:"",terms_of_use:"",collection_id:"",creator_gender:"",doc_collection:"",creator_location:"",modified_timestamp:"",recipient_location:"",copyright_statement:"",year_of_death_of_author:0,thumbnails:[],images:[],imagesPaths:[],transcriptions:[],transcriptionActive:"",imageActive:"",imageActiveLoading:!0,imageActiveLoaderHeight:400,photoIndex:0,isOpen:!1,downloadLink:[],notFound:!1},a.toggleLetterInfo=a.toggleLetterInfo.bind(Object(h.a)(Object(h.a)(a))),a.showPage=a.showPage.bind(Object(h.a)(Object(h.a)(a))),a.showBigImage=a.showBigImage.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggleLetterInfo",value:function(e){e.stopPropagation(),B(this.infoTrigger.children[0],"","closed"),B(this.infoContainer,"","closed")}},{key:"componentWillUnmount",value:function(){this.setState({loading:!0})}},{key:"showPage",value:function(e){this.setState({transcriptionActive:this.state.transcriptions[e],imageActive:this.state.images[e],imageActiveLoading:!0})}},{key:"handleImageLoaded",value:function(e){var t=this.imageContainer.clientHeight;this.setState({imageActiveLoading:!1,imageActiveLoaderHeight:t})}},{key:"showBigImage",value:function(e){this.setState({isOpen:!0,photoIndex:e})}},{key:"loadItem",value:function(){var e=this,t="",a=0,s=0;if("undefined"!==typeof e.props.match.params.itemId)a=e.props.match.params.itemId,t=y+"show/"+a;else{if("undefined"===typeof e.props.match.params.letterId)return!1;s=e.props.match.params.letterId,t=y+"show-letter/"+s}var r=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+r,g.a.get(t).then(function(t){if(t.data.status){var a=t.data.data,s="";if(a.date_created.length>0){var r=(s=new Date(a.date_created)).getDate();r<10&&(r="0"+r);s=r+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]+" "+s.getFullYear()}for(var i=[],l=[],o=[],c=[],m=0;m<a.pages.length;m++){var u=a.pages[m],d=m+1,h=k+"square_thumbnails/"+u.archive_filename;h=Z(h);var p=n.a.createElement("div",{className:"item",key:m},n.a.createElement("div",{className:"img-thumbnail item-thumb",onClick:e.showPage.bind(e,m)},n.a.createElement("img",{"data-id":u.page_id,src:h,alt:"",className:"img-responsive page-thumbnail"}),n.a.createElement("label",{className:"item-count"},d)));i.push(p);var g=k+"fullsize/"+u.archive_filename;g=Z(g);var f=n.a.createElement("img",{onClick:e.showBigImage.bind(e,m),key:"image-"+m,"data-id":u.page_id,src:g,alt:"",className:"letter-details-big-img img-thumbnail img-responsive",onLoad:e.handleImageLoaded.bind(e,m),ref:function(t){e.imageContainer=t}});l.push(f),c.push(g);var b=void 0;""!==u.transcription&&(b=n.a.createElement("div",{"data-id":u.page_id,key:"transcription-"+m,className:"page-transcription"},n.a.createElement("h4",null,"Page transcription"),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:u.transcription}}))),o.push(b)}var v=[];"undefined"!==typeof a.file&&a.file.link.length>0&&(v=n.a.createElement("a",{download:!0,href:a.file.link},a.file.original_filename," ",n.a.createElement("i",{className:"fa fa-download"}))),e.setState({loading:!1,title:a.title,source:a.source,creator:a.creator,language:a.language,sent_location:a.sent_location,document_id:a.document_id,recipient:a.recipient,time_zone:a.time_zone,collection:a.collection,description:a.description,date_created:s,number_pages:a.number_pages,request_time:a.request_time,terms_of_use:a.terms_of_use,collection_ID:a.collection_ID,creator_gender:a.creator_gender,doc_collection:a.doc_collection,creator_location:a.creator_location,modified_timestamp:a.modified_timestamp,recipient_location:a.recipient_location,copyright_statement:a.copyright_statement,year_of_death_of_author:a.year_of_death_of_author,thumbnails:i,images:l,transcriptions:o,imageActive:l[0],imagePaths:c,transcriptionActive:o[0],downloadLink:v})}else e.setState({notFound:!0,loading:!1})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadItem()}},{key:"componentDidUpdate",value:function(e,t){e.match.params.itemId===this.props.match.params.itemId&&e.match.params.letterId===this.props.match.params.letterId||this.loadItem()}},{key:"render",value:function(){var e,t,a=this,s=[{label:"Browse",path:"/browse"},{label:this.state.title,path:""}],r=this.state.thumbnails;if(this.state.imageActiveLoading){var i={height:this.state.imageActiveLoaderHeight+"px"};t=n.a.createElement("div",{className:"loader-container active-img-loader",style:i},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}),n.a.createElement("div",{className:"hidden"},this.state.imageActive))}else t=this.state.imageActive;if(this.state.loading)e=n.a.createElement("div",{className:"item-container"},n.a.createElement("div",{className:"loader-container item-loader"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})));else if(this.state.notFound)e=n.a.createElement("div",{className:"item-container",style:{padding:"20px 0"}},n.a.createElement("h4",{className:"text-center"},"Entry not found"));else{var l,o,c,m,u,d,h,p,g,f,b,v=this.state,A=v.photoIndex,E=v.isOpen,y=v.imagePaths,S="";"true"===this.props.isAdmin&&(S=n.a.createElement(gt,null)),""!==this.state.creator&&(l=n.a.createElement("tr",null,n.a.createElement("th",null,"From:"),n.a.createElement("td",null,this.state.creator))),""!==this.state.date_created&&(o=n.a.createElement("tr",null,n.a.createElement("th",null,"Date Sent:"),n.a.createElement("td",null,this.state.date_created))),""!==this.state.sent_location&&(c=n.a.createElement("tr",null,n.a.createElement("th",null,"Sent from:"),n.a.createElement("td",null,this.state.creator_location))),""!==this.state.doc_collection&&(m=n.a.createElement("tr",null,n.a.createElement("th",null,"Original collection:"),n.a.createElement("td",null,this.state.doc_collection))),""!==this.state.language&&(u=n.a.createElement("tr",null,n.a.createElement("th",null,"Written in:"),n.a.createElement("td",null,this.state.language))),""!==this.state.number_pages&&(d=n.a.createElement("tr",null,n.a.createElement("th",null,"Pages:"),n.a.createElement("td",null,this.state.number_pages))),""!==this.state.recipient&&(h=n.a.createElement("tr",null,n.a.createElement("th",null,"Recipient:"),n.a.createElement("td",null,this.state.recipient))),""!==this.state.recipient_location&&(p=n.a.createElement("tr",null,n.a.createElement("th",null,"Recipient Location:"),n.a.createElement("td",null,this.state.recipient_location))),""!==this.state.source&&(g=n.a.createElement("tr",null,n.a.createElement("th",null,"Source:"),n.a.createElement("td",null,this.state.source))),this.props.isAdmin&&this.state.downloadLink.length>0&&(f=n.a.createElement("tr",null,n.a.createElement("th",null,"Download XML:"),n.a.createElement("td",null,this.state.downloadLink))),this.props.isAdmin&&(b=n.a.createElement("tr",null,n.a.createElement("th",null,"Document ID:"),n.a.createElement("td",null,this.state.document_id)));var N=n.a.createElement("div",null,n.a.createElement("table",{className:"letter-details-table"},n.a.createElement("tbody",null,l,o,c,h,p,u,d,g,m,f,b)));e=n.a.createElement("div",{className:"item-container"},n.a.createElement("h2",null,this.state.title),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8 col-md-8 col-lg-7"},n.a.createElement("div",{className:"letter-info-container",ref:function(e){a.infoContainer=e}},n.a.createElement("h4",null,"Letter information",n.a.createElement("div",{className:"btn btn-default btn-xs pull-right toggle-info-btn",ref:function(e){a.infoTrigger=e},onClick:this.toggleLetterInfo.bind(this)},n.a.createElement("i",{className:"fa fa-angle-down"}))),N),this.state.transcriptionActive,n.a.createElement("p",{className:"letter-description"},this.state.description)),n.a.createElement("div",{className:"col-xs-12 col-sm-4 col-md-4 col-lg-5"},n.a.createElement("div",{className:"letter-big-img-container"},t),n.a.createElement(Be.a,{className:"owl-theme item-pages-thumbnails",loop:!1,margin:10,nav:!0,responsive:{0:{items:2},500:{items:2},992:{items:3}},navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navContainerClass:"item-thumbnails-nav",dots:!1},r),S)),E&&n.a.createElement(ht.a,{mainSrc:y[A],nextSrc:y[(A+1)%y.length],prevSrc:y[(A+y.length-1)%y.length],onCloseRequest:function(){return a.setState({isOpen:!1})},onMovePrevRequest:function(){return a.setState({photoIndex:(A+y.length-1)%y.length})},onMoveNextRequest:function(){return a.setState({photoIndex:(A+1)%y.length})}}))}return n.a.createElement("div",{className:"container item-view"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),e)))}}]),t}(s.Component),bt=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("p",{className:"text-center"},"This is a protected page.",n.a.createElement("br",null),"To view this page you must first ",n.a.createElement("button",{className:"btn btn-default btn-xs",onClick:this.props.loginModalOpen},"login")," or ",n.a.createElement(j.a,{className:"btn btn-default btn-xs",to:"/register",href:"/register"},"register."))}}]),t}(s.Component),vt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={files:[],dissaproved_files:[],post_status:!1,upload_loader:!1,progress_bar_text:"",progress_bar_width:0},e.onDrop=e.onDrop.bind(Object(h.a)(Object(h.a)(e))),e.uploadFiles=e.uploadFiles.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({files:[],dissaproved_files:[],post_status:!1,upload_loader:!1,progress_bar_text:"",progress_bar_width:0})}},{key:"onDrop",value:function(e){for(var t=[],a=[],s=0;s<e.length;s++){var n=e[s];"text/xml"===n.type?t.push(n):a.push(n)}this.setState({files:t,dissaproved_files:a})}},{key:"uploadFiles",value:function(){if(0===this.state.files.length)return!1;if(!0===this.state.post_status)return!1;this.setState({post_status:!0});var e=this.state.files,t=this,a=y+"fileupload",s=new FormData;e.forEach(function(e){s.append("data[]",e)}),s.append("format","xml_tei_letter19xx");var n=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+n,t.setState({upload_loader:!0}),g()({method:"post",url:a,data:s,crossDomain:!0,config:{headers:{"Content-Type":"multipart/form-data"}},onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total),s="Uploading... "+parseFloat(a).toFixed(2)+"%",n=a+"%";t.setState({progress_bar_text:s,progress_bar_width:n})}}).then(function(e){var a=e.data;200===a.status&&(t.setState({files:[],dissaproved_files:[],post_status:!1,progress_bar_text:a.message}),setTimeout(function(){t.setState({upload_loader:!1,progress_bar_text:"",progress_bar_width:0})},2e3))}).catch(function(e){t.setState({post_status:!1}),console.log(e)})}},{key:"render",value:function(){var e="",t="";this.state.files.length>0&&(e=n.a.createElement("div",null,n.a.createElement("h3",null,"Files list"),n.a.createElement("ul",null,this.state.files.map(function(e){return n.a.createElement("li",{key:e.name},e.name," - ",e.size," bytes")})))),this.state.dissaproved_files.length>0&&(t=n.a.createElement("div",null,n.a.createElement("h3",null,"Dissaproved Files list"),n.a.createElement("ul",null,this.state.dissaproved_files.map(function(e){return n.a.createElement("li",{key:e.name,className:"dissaproved-file"},e.name," - ",e.size," bytes")}))));var a,s="",r=this.state.progress_bar_width,i=this.state.progress_bar_text;!0===this.state.upload_loader&&(a={width:r},s=n.a.createElement("div",{className:"upload-status-container",id:"upload-xml-status"},n.a.createElement("div",{className:"upload-status-bar-inner",style:a}),n.a.createElement("div",{className:"upload-status-bar-text"},i)));var l=n.a.createElement("div",null,n.a.createElement("div",{className:"dropzone"},n.a.createElement(pt.a,{onDrop:this.onDrop.bind(this)},n.a.createElement("p",null,"To upload one or more XML files drag and drop them into the box",n.a.createElement("br",null)," - or - ",n.a.createElement("br",null),"click in the box to browse your computer for the files."))),s,e,t,n.a.createElement("br",null),n.a.createElement("button",{className:"btn btn-success",onClick:this.uploadFiles},n.a.createElement("i",{className:"fa fa-upload"})," Upload"));return"true"!==sessionStorage.getItem("sessionActive")&&(l=n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen})),n.a.createElement("div",null,n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"Upload XML",path:""}]}),n.a.createElement("h1",null,n.a.createElement("span",null,"Upload new XML files")),n.a.createElement("div",{className:"item-container"},l)))))}}]),t}(s.Component),At=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t,a=n.a.createElement("div",null,n.a.createElement("h2",null,"Letters of 1916-1923"),n.a.createElement("p",null,"Letters of 1916 is Ireland\u2019s first crowdsourced public humanities project. It has created an online collection of letters about Ireland written around the time of the Easter Rising. Letters cover all aspects of life, from major political events, the Easter Rising and the Great War, to letters that provide us with a candid and unmediated glimpse into ordinary life, love and work a century ago. There are thousands of letters in the collection connecting hundreds of lives."),n.a.createElement("p",null,"Letters have been collected from public institutions around the world as well as from private, family collections. This database allows you to explore the letters in great detail facilitating two modes of discovery: search and browse."),n.a.createElement("p",null,"If you are looking for a specific word, person, place, or event, go to the Search page and enter the term in the simple search box. If you don\u2019t have a specific query, go to the Browse page where you can explore the collection by date or theme."),n.a.createElement("p",null,"Once letters are displayed, you can further refine your search by filtering options on the right hand side of the page. New letters are constantly being added to this database, so search results may differ from time to time."),n.a.createElement("p",null,"Both images of the letters and transcripts are available to view. This provides the best of both words. Images convey the personality of the letter writer: their handwriting, their writing style, notes and doodles, giving us insights into their mood and state of mind."),n.a.createElement("p",null,"Transcriptions, on the other hand, make it easier to read difficult handwriting. These letters have been transcribed by thousands of people around the world and proofed by the Letters of 1916 team. Even so, there will be errors in transcription. Please let us know if you spot any of these by clicking on the Share & Feedback tab and reporting the error."),n.a.createElement("p",null,"We are constantly adding new letters to the collection, both institutional and private. Letters can be added to the Contribute database directly through this link. If you have too many letters to be added one by one, please get in touch with us here."));"about"===this.props.match.params.contentName&&(e=a,t="Letters of 1916-1923");var s=[{label:t,path:""}];return n.a.createElement("div",null,n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),e))))}}]),t}(s.Component),Et=a(95),yt=a.n(Et),St=a(73),Nt=a.n(St),kt=a(397),Ot=a.n(kt),wt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={images:a.props.images},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:{display:"block",minHeight:"1px",width:"100%",overflow:"auto"}},n.a.createElement(Ot.a,{images:this.state.images,enableImageSelection:!1}))}}]),t}(s.Component),_t=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,content:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getPage",value:function(){var e=this.props.match.params.slug,t=this;g.a.get(N+"post",{params:{slug:e}}).then(function(e){var a=e.data;"OK"===e.statusText&&t.setState({content:a,loading:!1})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.getPage()}},{key:"componentDidUpdate",value:function(e,t){e.match.url!==this.props.match.url&&(this.setState({loading:!0}),this.getPage())}},{key:"cleanContentURLs",value:function(e){var t;return"undefined"!==typeof e&&""!==e&&(t=yt()("<div>"+e+"<div>",{replace:function(e){if("a"===e.name&&"undefined"!==typeof e.attribs.href){var t=U(e.attribs.href);if(t.includes("wp-post")&&"undefined"!==typeof e.children[0]&&"undefined"!==typeof e.children[0].data){var a=e.children[0].data;return a=Nt()(e.children),t=t.replace(E,""),n.a.createElement(j.a,{to:t},a)}}if("div"===e.name&&"undefined"!==typeof e.attribs.class&&e.attribs.class.includes("final-tiles-gallery")&&"undefined"!==typeof e.children[0].attribs.class){var s=[];if(e.children[0].attribs.class.includes("ftg-items"))for(var r=e.children[0],i=0;i<r.children.length;i++){var l=r.children[i];if("undefined"!==typeof l.attribs.class&&l.attribs.class.includes("tile")){var o="",c="";if("undefined"!==typeof l.children[0]&&"undefined"!==typeof l.children[0].children[1]&&"undefined"!==typeof l.children[0].children[1].attribs.class&&(c=l.children[0].children[1].attribs.class.includes("ftg-social")?(o=l.children[0].children[0]).children[0]:(o=l.children[0]).children[0]),"undefined"!==typeof c){var m=320,u=120;"undefined"!==typeof c.attribs.width&&(m=parseInt(c.attribs.width,10)),"undefined"!==typeof c.attribs.height&&(u=parseInt(c.attribs.height,10));var d="";"undefined"!==typeof o.attribs.href&&(d=o.attribs.href);var h={src:c.attribs.src,thumbnail:c.attribs.src,thumbnailWidth:m,thumbnailHeight:u,caption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),thumbnailCaption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),isSelected:!1};s.push(h)}}}return n.a.createElement("div",{className:"grid-gallery"},n.a.createElement(wt,{images:s,enableImageSelection:!1}))}}})),t}},{key:"render",value:function(){var e,t,a,s=[];if(this.state.loading)a=n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}));else{var r="",i=this.cleanContentURLs(this.state.content.rendered);t=n.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.content.post_title}}),e=i,"undefined"!==typeof this.state.content.categories&&this.state.content.categories.length>0&&s.push({label:this.state.content.categories[0].name,path:"/wp-category/"+this.state.content.categories[0].slug}),""!==this.state.content.post_modified&&(r=n.a.createElement("div",{className:"post-date"},this.state.content.post_modified)),s.push({label:t,path:""}),a=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),n.a.createElement("h1",null,t),n.a.createElement("div",{className:"wp-content item-container"},r,e))))}return n.a.createElement("div",null,a)}}]),t}(s.Component),jt=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state={loading:!1,browseItems:[],current_page:1,path:N+"category-list/",per_page:0,total:1,paginate:10,gotopage_value:1,temp_page:1,category_name:""},s.gotoPage=s.gotoPage.bind(Object(h.a)(Object(h.a)(s))),s.showPage=s.showPage.bind(Object(h.a)(Object(h.a)(s))),s.updatePaginate=s.updatePaginate.bind(Object(h.a)(Object(h.a)(s))),s.updatePageNumber=s.updatePageNumber.bind(Object(h.a)(Object(h.a)(s))),s.pageNumberSubmit=s.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(s))),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"gotoPage",value:function(e){parseInt(e,10)>0&&parseInt(e,10)!==this.state.current_page&&this.setState({current_page:e,loading:!0})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({gotopage_value:t,current_page:t,loading:!0})}},{key:"showPage",value:function(){var e=this,t=this.props.match.params.slug;if(""!==t){var a=this.state.path;g.a.get(a,{params:{slug:t,page:this.state.current_page,posts_per_page:this.state.paginate,orderby:"date"}}).then(function(t){for(var a=t.data.data,s=a.data,r=[],i=0;i<s.length;i++){var l=s[i],o=void 0;""!==l.thumbnail&&(o=n.a.createElement("img",{className:"list-thumbnail img-responsive",src:l.thumbnail,alt:l.post_title}));var c="";if(""!==l.description){var m=Q(l.description);m.length>400&&(m=m.substring(0,400)),c=m+"..."}var u=n.a.createElement("li",{"data-id":l.ID,key:i,className:"img-clearfix"},n.a.createElement(j.a,{to:"wp-post/"+l.post_name},o),n.a.createElement("h4",null,n.a.createElement(j.a,{to:"/wp-post/"+l.post_name},l.post_title)),n.a.createElement("p",null,c));r.push(u)}if(0===r.length){var d=n.a.createElement("li",{key:0},n.a.createElement("i",null,"There are no articles matching your search criteria"));r.push(d)}var h="";"undefined"!==typeof a.category[0]&&(h=a.category[0].cat_name),e.setState({loading:!1,browseItems:r,current_page:a.current_page,last_page:a.last_page,total:a.total,submit_search:!1,category_name:h})}).catch(function(e){console.log(e)})}else this.setState({loading:!1,submit_search:!1})}},{key:"componentDidMount",value:function(){this.showPage()}},{key:"componentDidUpdate",value:function(e,t){t.current_page===this.state.current_page&&t.paginate===this.state.paginate||!0!==this.state.loading||this.showPage()}},{key:"render",value:function(){var e,t=[];e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"search-items"},this.state.browseItems);var a="",s="",r="";10===this.state.paginate&&(a="active"),25===this.state.paginate&&(s="active"),50===this.state.paginate&&(r="active");var i=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:a},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:s},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:r},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.gotoPage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"})))))),l="";return""!==this.props.term&&(t.push({label:this.state.category_name,path:""}),l=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:t}),n.a.createElement("h1",null,this.state.category_name),n.a.createElement("div",{className:"item-container"},i,e,i))))),n.a.createElement("div",null,l)}}]),t}(s.Component),Ct=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,content:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getPage",value:function(){var e=this.props.match.params.slug,t=this;g.a.get(S+"pages",{params:{slug:e}}).then(function(e){var a=e.data[0];e.data.length>0&&t.setState({content:a,loading:!1})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.getPage()}},{key:"componentDidUpdate",value:function(e,t){e.match.url!==this.props.match.url&&(this.setState({loading:!0}),this.getPage())}},{key:"render",value:function(){var e,t,a,s=[];return this.state.loading?a=n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):(t=n.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.content.title.rendered}}),e=n.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content.content.rendered}}),s.push({label:t,path:""}),a=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),n.a.createElement("h1",null,t),n.a.createElement("div",{className:"item-container"},e))))),n.a.createElement("div",null,a)}}]),t}(s.Component),It=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",null)}}]),t}(s.Component),xt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={fullScreenBtnClass:"fa-expand",fullScreenStatus:0,iframeWidth:"100%",iframeHeight:"600",containerStyle:[],content:[]},a.getPage=a.getPage.bind(Object(h.a)(Object(h.a)(a))),a.toggleFullScreen=a.toggleFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.cancelFullScreen=a.cancelFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.requestFullScreen=a.requestFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.requestFullScreen=a.requestFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.cleanContentURLs=a.cleanContentURLs.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getPage",value:function(){var e=this;g.a.get(N+"post",{params:{slug:"interactive-map"}}).then(function(t){var a=t.data;"OK"===t.statusText&&e.setState({content:a,loading:!1})}).catch(function(e){console.log(e)})}},{key:"toggleFullScreen",value:function(){if(0===parseInt(this.state.fullScreenStatus,10)){this.requestFullScreen(document.body),this.setState({fullScreenBtnClass:"fa-compress",fullScreenStatus:1,containerHeight:{position:"fixed",left:"0",top:"0",right:"0",bottom:"0",zIndex:"999"}})}else this.cancelFullScreen(document),this.setState({fullScreenBtnClass:"fa-expand",fullScreenStatus:0,containerHeight:[],iframeHeight:"600"})}},{key:"cancelFullScreen",value:function(e){var t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullscreen;return t&&t.call(e),!1}},{key:"requestFullScreen",value:function(e){var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;t&&t.call(e);var a=this;return setTimeout(function(){a.setState({iframeHeight:window.innerHeight})},1e3),!1}},{key:"cleanContentURLs",value:function(e){var t;return"undefined"!==typeof e&&""!==e&&(t=yt()("<div>"+e+"<div>",{replace:function(e){if("a"===e.name&&"undefined"!==typeof e.attribs.href){var t=U(e.attribs.href);if(t.includes("wp-post")&&"undefined"!==typeof e.children[0]&&"undefined"!==typeof e.children[0].data){var a=e.children[0].data;return a=Nt()(e.children),t=t.replace(E,""),n.a.createElement(j.a,{to:t},a)}}if("div"===e.name&&"undefined"!==typeof e.attribs.class&&e.attribs.class.includes("final-tiles-gallery")&&"undefined"!==typeof e.children[0].attribs.class){var s=[];if(e.children[0].attribs.class.includes("ftg-items"))for(var r=e.children[0],i=0;i<r.children.length;i++){var l=r.children[i];if("undefined"!==typeof l.attribs.class&&l.attribs.class.includes("tile")){var o="",c="";if("undefined"!==typeof l.children[0]&&"undefined"!==typeof l.children[0].children[1]&&"undefined"!==typeof l.children[0].children[1].attribs.class&&(c=l.children[0].children[1].attribs.class.includes("ftg-social")?(o=l.children[0].children[0]).children[0]:(o=l.children[0]).children[0]),"undefined"!==typeof c){var m=320,u=120;"undefined"!==typeof c.attribs.width&&(m=parseInt(c.attribs.width,10)),"undefined"!==typeof c.attribs.height&&(u=parseInt(c.attribs.height,10));var d="";"undefined"!==typeof o.attribs.href&&(d=o.attribs.href);var h={src:c.attribs.src,thumbnail:c.attribs.src,thumbnailWidth:m,thumbnailHeight:u,caption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),thumbnailCaption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),isSelected:!1};s.push(h)}}}return n.a.createElement("div",{className:"grid-gallery"},n.a.createElement(wt,{images:s,enableImageSelection:!1}))}}})),t}},{key:"componentWillMount",value:function(){this.getPage()}},{key:"render",value:function(){var e,t=this.cleanContentURLs(this.state.content.rendered),a=this.state.content.post_title,s=[],r='<iframe style="border: none;" src="'+E+'/magellan_vizualizations/map/index.html" width="'+this.state.iframeWidth+'" height="'+this.state.iframeHeight+'"></iframe>',i=n.a.createElement("div",null,n.a.createElement("div",null,t),n.a.createElement("div",{className:"map-container",style:this.state.containerHeight},n.a.createElement("i",{className:"btn btn-white fa toggle-fullscreen "+this.state.fullScreenBtnClass,onClick:this.toggleFullScreen.bind(this)}),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}})));return s.push({label:"Visual Exploration",path:"/wp-post/visual-exploration"}),s.push({label:a,path:""}),e=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),n.a.createElement("h1",null,a),n.a.createElement("div",{className:"item-container"},i)))),n.a.createElement("div",null,e)}}]),t}(n.a.Component),Dt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={fullScreenBtnClass:"fa-expand",fullScreenStatus:0,iframeWidth:"100%",iframeHeight:"600",containerStyle:[],content:[]},a.getPage=a.getPage.bind(Object(h.a)(Object(h.a)(a))),a.toggleFullScreen=a.toggleFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.cancelFullScreen=a.cancelFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.requestFullScreen=a.requestFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.requestFullScreen=a.requestFullScreen.bind(Object(h.a)(Object(h.a)(a))),a.cleanContentURLs=a.cleanContentURLs.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getPage",value:function(){var e=this;g.a.get(N+"post",{params:{slug:"letter-network"}}).then(function(t){var a=t.data;"OK"===t.statusText&&e.setState({content:a,loading:!1})}).catch(function(e){console.log(e)})}},{key:"toggleFullScreen",value:function(){if(0===parseInt(this.state.fullScreenStatus,10)){this.requestFullScreen(document.body),this.setState({fullScreenBtnClass:"fa-compress",fullScreenStatus:1,containerHeight:{position:"fixed",left:"0",top:"0",right:"0",bottom:"0",zIndex:"999"}})}else this.cancelFullScreen(document),this.setState({fullScreenBtnClass:"fa-expand",fullScreenStatus:0,containerHeight:[],iframeHeight:"600"})}},{key:"cancelFullScreen",value:function(e){var t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullscreen;return t&&t.call(e),!1}},{key:"requestFullScreen",value:function(e){var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;t&&t.call(e);var a=this;return setTimeout(function(){a.setState({iframeHeight:window.innerHeight})},1e3),!1}},{key:"cleanContentURLs",value:function(e){var t;return"undefined"!==typeof e&&""!==e&&(t=yt()("<div>"+e+"<div>",{replace:function(e){if("a"===e.name&&"undefined"!==typeof e.attribs.href){var t=U(e.attribs.href);if(t.includes("wp-post")&&"undefined"!==typeof e.children[0]&&"undefined"!==typeof e.children[0].data){var a=e.children[0].data;return a=Nt()(e.children),t=t.replace(E,""),n.a.createElement(j.a,{to:t},a)}}if("div"===e.name&&"undefined"!==typeof e.attribs.class&&e.attribs.class.includes("final-tiles-gallery")&&"undefined"!==typeof e.children[0].attribs.class){var s=[];if(e.children[0].attribs.class.includes("ftg-items"))for(var r=e.children[0],i=0;i<r.children.length;i++){var l=r.children[i];if("undefined"!==typeof l.attribs.class&&l.attribs.class.includes("tile")){var o="",c="";if("undefined"!==typeof l.children[0]&&"undefined"!==typeof l.children[0].children[1]&&"undefined"!==typeof l.children[0].children[1].attribs.class&&(c=l.children[0].children[1].attribs.class.includes("ftg-social")?(o=l.children[0].children[0]).children[0]:(o=l.children[0]).children[0]),"undefined"!==typeof c){var m=320,u=120;"undefined"!==typeof c.attribs.width&&(m=parseInt(c.attribs.width,10)),"undefined"!==typeof c.attribs.height&&(u=parseInt(c.attribs.height,10));var d="";"undefined"!==typeof o.attribs.href&&(d=o.attribs.href);var h={src:c.attribs.src,thumbnail:c.attribs.src,thumbnailWidth:m,thumbnailHeight:u,caption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),thumbnailCaption:n.a.createElement("a",{className:"btn btn-letters btn-block btn-flat",href:d,target:"_blank",rel:"noopener noreferrer"},"More..."),isSelected:!1};s.push(h)}}}return n.a.createElement("div",{className:"grid-gallery"},n.a.createElement(wt,{images:s,enableImageSelection:!1}))}}})),t}},{key:"componentWillMount",value:function(){this.getPage()}},{key:"render",value:function(){var e,t=this.cleanContentURLs(this.state.content.rendered),a=this.state.content.post_title,s=[],r='<iframe style="border: none;" src="'+E+'/magellan_vizualizations/graph/index.html" width="'+this.state.iframeWidth+'" height="'+this.state.iframeHeight+'"></iframe>',i=n.a.createElement("div",null,t,n.a.createElement("div",{className:"map-container",style:this.state.containerHeight},n.a.createElement("i",{className:"btn btn-white fa toggle-fullscreen "+this.state.fullScreenBtnClass,onClick:this.toggleFullScreen.bind(this)}),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}})));return s.push({label:"Visual Exploration",path:"/wp-post/visual-exploration"}),s.push({label:a,path:""}),e=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),n.a.createElement("h1",null,a),n.a.createElement("div",{className:"item-container"},i)))),n.a.createElement("div",null,e)}}]),t}(n.a.Component),Mt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,content:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.type;"map"===e&&this.embedMap(),"graph"===e&&this.embedGraph()}},{key:"embedMap",value:function(){this.setState({loading:!1,content:n.a.createElement(xt,null)})}},{key:"embedGraph",value:function(){this.setState({loading:!1,content:n.a.createElement(Dt,null)})}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):this.state.content,n.a.createElement("div",null,e)}}]),t}(s.Component),Tt=a(162),Bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={name:"",email:"",subject:"",message:"",form_error:"",form_error_class:"error-container",response_text:"",form_status:!0,disabled:"disabledg",response:[],buttonTxt:n.a.createElement("span",null,"Send ",n.a.createElement("i",{className:"fa fa-send-o"})),recaptchaLoaded:!1},e.handleFormSubmit=e.handleFormSubmit.bind(Object(h.a)(Object(h.a)(e))),e.handleFormChange=e.handleFormChange.bind(Object(h.a)(Object(h.a)(e))),e.onLoadRecaptcha=e.onLoadRecaptcha.bind(Object(h.a)(Object(h.a)(e))),e.verifyCallback=e.verifyCallback.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(x.a)({},s,a))}},{key:"handleFormSubmit",value:function(e){if(e.preventDefault(),!0===this.formSubmitErrorCheck())return!1;var t={name:this.state.name,email:this.state.email,subject:this.state.subject,message:this.state.message,recaptchaResponse:this.state.recaptchaResponse};this.setState({buttonTxt:n.a.createElement("span",null,"Sending... ",n.a.createElement("i",{className:"fa fa-send-o"})," ",n.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch"}))});var a=this;g.a.post(N+"contact-form",t).then(function(e){!0===e.data?a.setState({form_status:!1,response_text:n.a.createElement("div",{style:{padding:"50px 15px"}},n.a.createElement("p",null,"Thank you for contacting us. A member fo the staff will respond shortly.")),buttonTxt:n.a.createElement("span",null,"Send success ",n.a.createElement("i",{className:"fa fa-check"}))}):a.setState({form_error:n.a.createElement("p",null,"There was an error. Your contact form was not sent. Please try again or send us an email directly at ",n.a.createElement("a",{href:"mailto:letters1916.23@gmail.com"},"letters1916.23@gmail.com")),form_error_class:"error-container-visible",buttonTxt:n.a.createElement("span",null,"Send error ",n.a.createElement("i",{className:"fa fa-times"}))}),setTimeout(function(){a.setState({buttonTxt:n.a.createElement("span",null,"Send ",n.a.createElement("i",{className:"fa fa-send-o"}))})},2e3)}).catch(function(e){console.log(e)})}},{key:"formSubmitErrorCheck",value:function(){var e=!1;return this.state.name.trim().length<3?(this.setState({form_error:"Your name must contain at least four (4) characters",form_error_class:"error-container-visible"}),e=!0):-1===this.state.email.trim().search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?(this.setState({form_error:"Please enter a valid email address",form_error_class:"error-container-visible"}),e=!0):this.state.subject.trim().length<3?(this.setState({form_error:"Your subject must contain at least four (4) characters",form_error_class:"error-container-visible"}),e=!0):this.state.message.trim().length<10?(this.setState({form_error:"Your message must contain at least ten (10) characters",form_error_class:"error-container-visible"}),e=!0):(e=!1,this.setState({form_error:"",form_error_class:"error-container"})),e}},{key:"onLoadRecaptcha",value:function(){this.recaptcha&&this.recaptcha.reset()}},{key:"verifyCallback",value:function(e){this.setState({recaptchaResponse:e,disabled:""})}},{key:"componentDidMount",value:function(){Object(Tt.loadReCaptcha)(),this.recaptcha&&this.recaptcha.reset()}},{key:"render",value:function(){var e,t,a=this,s=[],r=n.a.createElement("div",null,n.a.createElement(Tt.ReCaptcha,{ref:function(e){a.recaptcha=e},render:"explicit",size:"normal",sitekey:"6Lfcv3kUAAAAAM--VtGXkN4kgGwyCdEojRyUfh5M",onloadCallback:this.onLoadRecaptcha,verifyCallback:this.verifyCallback}),n.a.createElement("br",null));return this.state.loading?t=n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):("Contact Us",e=this.state.form_status?n.a.createElement("form",{name:"contact-form",onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8"},n.a.createElement("div",{className:this.state.form_error_class},this.state.form_error),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Your name",n.a.createElement("sup",null,"*")),n.a.createElement("input",{name:"name",type:"text",className:"form-control",placeholder:"Please enter your name",value:this.state.name,onChange:this.handleFormChange})),n.a.createElement("div",{className:"form-group has-feedback"},n.a.createElement("label",null,"Your email",n.a.createElement("sup",null,"*")),n.a.createElement("input",{name:"email",type:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:this.handleFormChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Subject"),n.a.createElement("input",{name:"subject",type:"text",className:"form-control",placeholder:"Please enter the subject of your message",value:this.state.subject,onChange:this.handleFormChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Your Message"),n.a.createElement("textarea",{name:"message",className:"form-control",rows:"10",placeholder:"Please enter your message",onChange:this.handleFormChange,value:this.state.message})),r,n.a.createElement("button",{disabled:this.state.disabled,type:"submit",className:"btn btn-primary"},this.state.buttonTxt),n.a.createElement("br",null),n.a.createElement("div",{className:"text-right"},n.a.createElement("small",null,n.a.createElement("i",null,"Fields marked with an asterisk (*) are mandatory")))))):this.state.response_text,s.push({label:"Contact Us",path:""}),t=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:s}),n.a.createElement("h1",null,"Contact Us"),n.a.createElement("div",{className:"item-container"},e))))),n.a.createElement("div",null,t)}}]),t}(s.Component),Pt=a(398),Ft=a(399),Jt=a.n(Ft),Lt=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state={imgWidth:"auto",imgHeight:"100%",positionX:0,positionY:0,fullScreenBtnClass:"fa-expand",fullScreenStatus:!1,dragging:!1},s.imgRef=n.a.createRef(),s.handleStop=s.handleStop.bind(Object(h.a)(Object(h.a)(s))),s.handleStart=s.handleStart.bind(Object(h.a)(Object(h.a)(s))),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){}},{key:"updateViewer",value:function(e){var t=this.imgRef.current.getBoundingClientRect(),a=t.top,s=t.right,n=t.bottom,r=s-t.left,i=n-a;if("zoomin"===e){var l=r+25*r/100,o=i+25*i/100;return l+="px",o+="px",this.setState({imgWidth:l,imgHeight:o}),!1}if("zoomout"===e){var c=r-25*r/100,m=i-25*i/100;return m<=400?(c="auto",m="400px"):(c+="px",m+="px"),this.setState({imgWidth:c,imgHeight:m}),!1}if("scrollup"===e){var u=this.state.positionY;return u=parseInt(u,10)-100,this.setState({positionY:u}),!1}if("scrolldown"===e){var d=this.state.positionY;return d=parseInt(d,10)+100,this.setState({positionY:d}),!1}if("scrollright"===e){var h=this.state.positionX;return h=parseInt(h,10)+100,this.setState({positionX:h}),!1}if("scrollleft"===e){var p=this.state.positionX;return p=parseInt(p,10)-100,this.setState({positionX:p}),!1}if("expand"===e)return this.toggleFullScreen(),B(document.getElementById("transcription-container"),"container","container-fluid"),!1}},{key:"handleStop",value:function(e){var t=this.imgRef.current.style.transform,a=(t=t.replace("translate(","").replace(")","")).split(","),s=a[0].trim().replace("px",""),n=a[1].trim().replace("px","");return this.setState({positionX:parseInt(s,10),positionY:parseInt(n,10),dragging:!1}),!1}},{key:"handleStart",value:function(e){this.setState({dragging:!0})}},{key:"toggleFullScreen",value:function(){if(!1===this.state.fullScreenStatus)return this.requestFullScreen(document.body),this.setState({fullScreenBtnClass:"fa-compress",fullScreenStatus:!0}),!1;this.cancelFullScreen(document),this.setState({fullScreenBtnClass:"fa-expand",fullScreenStatus:!1})}},{key:"cancelFullScreen",value:function(e){var t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullscreen;return t&&t.call(e),!1}},{key:"requestFullScreen",value:function(e){var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;t&&t.call(e);var a=this;return setTimeout(function(){a.setState({iframeHeight:window.innerHeight})},1e3),!1}},{key:"render",value:function(){var e=Z(k+"fullsize/"+this.props.page.archive_filename),t={width:this.state.imgWidth,height:this.state.imgHeight},a="";this.state.dragging&&(a=" dragging");var s=n.a.createElement(Jt.a,{defaultPosition:{x:0,y:0},position:{x:this.state.positionX,y:this.state.positionY},onStart:this.handleStart,onStop:this.handleStop},n.a.createElement("img",{draggable:"false",ref:this.imgRef,className:"transcription-img"+a,src:e,alt:"",style:t})),r=n.a.createElement(Pt.a,{className:"transcription-img-container",defaultSize:{width:"100%",height:400},maxWidth:"100%",minWidth:"100%"},n.a.createElement("div",{className:"transcription-img-controllers"},n.a.createElement("ul",null,n.a.createElement("li",{key:0},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"zoomin")},n.a.createElement("i",{className:"fa fa-plus"}))),n.a.createElement("li",{key:1},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"zoomout")},n.a.createElement("i",{className:"fa fa-minus"}))),n.a.createElement("li",{key:2},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"scrollup")},n.a.createElement("i",{className:"fa fa-caret-up"}))),n.a.createElement("li",{key:3},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"scrolldown")},n.a.createElement("i",{className:"fa fa-caret-down"}))),n.a.createElement("li",{key:4},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"scrollleft")},n.a.createElement("i",{className:"fa fa-caret-left"}))),n.a.createElement("li",{key:5},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"scrollright")},n.a.createElement("i",{className:"fa fa-caret-right"}))),n.a.createElement("li",{key:6},n.a.createElement("span",{className:"href-btn",onClick:this.updateViewer.bind(this,"expand")},n.a.createElement("i",{className:"fa "+this.state.fullScreenBtnClass}))))),n.a.createElement("div",{className:"transcription-img-container-inner"},s));return n.a.createElement("div",null,r)}}]),t}(n.a.Component),Rt=function(e){function t(e,a){var s;return Object(o.a)(this,t),(s=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state={thumbnails:[],images:[],loading:!1},s.renderThumbnails=s.renderThumbnails.bind(Object(h.a)(Object(h.a)(s))),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderThumbnails",value:function(){this.setState({thumbnails:void 0,loading:!1})}},{key:"componentDidMount",value:function(){this.renderThumbnails()}},{key:"componentDidUpdate",value:function(e,t){e.selected===this.props.selected&&e.pages===this.props.pages||this.renderThumbnails()}},{key:"render",value:function(){var e=[];if("undefined"!==typeof this.props.pages&&this.props.pages.length>0)for(var t=this.props.pages,a=0;a<t.length;a++){var s=t[a],r=s.transcription_status,i=[];0===parseInt(r,10)&&(i=n.a.createElement("small",{className:"label label-success"},"Open")),1===parseInt(r,10)&&(i=n.a.createElement("small",{className:"label label-warning"},"Waiting Approval")),2===parseInt(r,10)&&(i=n.a.createElement("small",{className:"label label-danger"},"Completed"));var l=a+1,o="";a===this.props.selected&&(o=" selected");var c=Z(k+"square_thumbnails/"+s.archive_filename),m=n.a.createElement("div",{className:"item"+o,key:a},n.a.createElement("span",{className:"href-btn img-thumbnail",onClick:this.props.function.bind(this,a)},n.a.createElement("div",{className:"transcription-page-select-status"},i),n.a.createElement("img",{"data-id":s.page_id,src:c,alt:"",className:"img-responsive page-thumbnail"}),n.a.createElement("label",{className:"item-count"},l)));e.push(m)}var u=n.a.createElement(Be.a,{className:"owl-theme item-pages-thumbnails",loop:!1,margin:10,nav:!0,responsive:{0:{items:1},400:{items:4},992:{items:8},1200:{items:12}},navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navContainerClass:"item-thumbnails-nav",dots:!1},e);return n.a.createElement("div",null,u)}}]),t}(n.a.Component);var Yt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={saving:[],error:[],docked:!0,positionX:0,positionY:0,handle:!1,isResizing:!1,undockedWidth:500,resize:!1,width:"600px",height:"auto",dragover:!1,textarea_disabled:!1,allowSave:!1},a.elementName="editor_"+a.props.id,a.onInput=a.onInput.bind(Object(h.a)(Object(h.a)(a))),a.updateTranscription=a.updateTranscription.bind(Object(h.a)(Object(h.a)(a))),a.resetAllowSave=a.resetAllowSave.bind(Object(h.a)(Object(h.a)(a))),a.resizing=a.resizing.bind(Object(h.a)(Object(h.a)(a))),a.unsetResize=a.unsetResize.bind(Object(h.a)(Object(h.a)(a))),a.updateEditorView=a.updateEditorView.bind(Object(h.a)(Object(h.a)(a))),a.setHandle=a.setHandle.bind(Object(h.a)(Object(h.a)(a))),a.startDrag=a.startDrag.bind(Object(h.a)(Object(h.a)(a))),a.endDrag=a.endDrag.bind(Object(h.a)(Object(h.a)(a))),a.dragStop=a.dragStop.bind(Object(h.a)(Object(h.a)(a))),a.dragOver=a.dragOver.bind(Object(h.a)(Object(h.a)(a))),a.dragEnter=a.dragEnter.bind(Object(h.a)(Object(h.a)(a))),a.dragLeave=a.dragLeave.bind(Object(h.a)(Object(h.a)(a))),a.editorRef=n.a.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateEditorView",value:function(e){if("undefined"!==typeof e.page.transcription_status){this.setState({textarea_disabled:!1});var t=e.page.transcription;null===t&&(t=""),this.updateTranscription(t)}else{this.setState({textarea_disabled:!1});var a=e.page.transcription;null===a&&(a=""),this.updateTranscription(a)}}},{key:"componentDidMount",value:function(){Object(it.loadProgressBar)();var e=this,t="";if("undefined"!==typeof e.props.page.transcription_status?parseInt(e.props.page.transcription_status,10)>0&&this.setState({textarea_disabled:!0,allowSave:!1}):this.setState({textarea_disabled:!1,allowSave:!1}),window.CKEDITOR.instances[this.elementName])try{window.CKEDITOR.instances[this.elementName].destroy(!0)}catch(a){console.log(a)}this.props.updatePages!==[]&&window.CKEDITOR.replace(this.elementName,{on:{instanceReady:function(a){t=null!==e.props.page.transcription?e.props.page.transcription:"",e.updateTranscription(t);var s=null;window.CKEDITOR.instances[e.elementName].on("change",function(t){if(!e.state.allowSave)return t.stop(),t.cancel(),!1;var a=window.CKEDITOR.instances[this.elementName].getData();null!==s&&clearTimeout(s),this.props.disableNav(),s=setTimeout(function(){e.onInput(a)},2e3)}.bind(e))}}}),window.addEventListener("dragover",this.dragOver),window.addEventListener("drop",this.endDrag)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.dragOver),window.removeEventListener("drop",this.endDrag)}},{key:"componentWillReceiveProps",value:function(e){if(e.page.transcription!==this.props.page.transcription||e.page.transcription_status!==this.props.page.transcription_status||e.page.archive_filename!==this.props.page.archive_filename){this.updateEditorView(e),this.setState({transcription_content:e.page.transcription,allowSave:!1});var t=this;setTimeout(function(){t.resetAllowSave()},50)}}},{key:"onInput",value:function(e){if(this.state.allowSave){this.setState({saving:n.a.createElement("span",null,n.a.createElement("i",null,"Saving")," ",n.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch"}))});var t=this.props.letterId,a=this.props.page.archive_filename,s="";""!==e&&(s=""!==(o=e)&&(o=o.replace(/&nbsp;/g," ").replace(/&#8203;/g,"").replace(/^<br ?>/gi,"<lb/>").replace(/<br *\/?>/gi,"<lb/>").replace(/<addresstag>/gi,"<address>").replace(/<\/addresstag>/gi,"</address>").replace(/<addtag>/gi,"<add>").replace(/<\/addtag>/gi,"</add>").replace(/<uncleartag>/gi,"<unclear>").replace(/<\/uncleartag>/gi,"</unclear>").replace(/<notetag>/gi,"<note>").replace(/<\/notetag>/gi,"</note>").replace(/<sictag>/gi,"<sic>").replace(/<\/sictag>/gi,"</sic>").replace(/<datetag>/gi,"<date>").replace(/<\/datetag>/gi,"</date>")));var r=this,i=y+"update-letter-transcription-page/"+t,l=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+l,g()({method:"POST",url:i,crossDomain:!0,data:{archive_filename:a,transcription:s}}).then(function(e){if(e.data.status)r.setState({saving:[]}),r.props.updatePages(e.data.data);else{var t={error:!0,msg:e.data.message};r.props.error(t),r.setState({saving:n.a.createElement("span",null,n.a.createElement("i",null,"Save error ")," ",n.a.createElement("i",{className:"fa fa-times"}))}),setTimeout(function(){r.setState({saving:[]})},1e3)}r.props.enableNav()}).catch(function(e){console.log(e)})}var o}},{key:"updateTranscription",value:function(e){var t,a=this,s=""!==(t=e)&&(t=t.replace(/<lb *\/?>/gi,"<br>").replace(/<address>/gi,"<addresstag>").replace(/<\/address>/gi,"</addresstag>").replace(/<add>/gi,"<addtag>").replace(/<\/add>/gi,"</addtag>").replace(/<unclear>/gi,"<uncleartag>").replace(/<\/unclear>/gi,"</uncleartag>").replace(/<note>/gi,"<notetag>").replace(/<\/note>/gi,"</notetag>").replace(/<sic>/gi,"<sictag>").replace(/<\/sic>/gi,"</sictag>").replace(/<date>/gi,"<datetag>").replace(/<\/date>/gi,"</datetag>"));null!==window.CKEDITOR.instances[a.elementName]&&(a.setState({allowSave:!1}),setTimeout(function(){window.CKEDITOR.instances[a.elementName].setData(s,a.resetAllowSave)},50))}},{key:"resetAllowSave",value:function(){var e=this;setTimeout(function(){e.setState({allowSave:!0})},50)}},{key:"setHandle",value:function(e){this.setState({handle:!0})}},{key:"unsetHandle",value:function(e){e.preventDefault();var t=this;setTimeout(function(){t.setState({handle:!1})},50)}},{key:"startDrag",value:function(e){e.stopPropagation(),this.state.handle?(e.dataTransfer.setData("text/html",e.target.id),e.dataTransfer.dropEffect="move"):e.preventDefault()}},{key:"endDrag",value:function(e){var t=e.clientX-this.state.undockedWidth-78,a=e.clientY-19;return this.setState({handle:!1,docked:!1,positionX:t,positionY:a,dragover:!1}),!1}},{key:"dragStop",value:function(e){var t=this;return setTimeout(function(){t.setState({docked:!0,positionX:0,positionY:0,handle:!1,dragover:!1})},50),e.stopPropagation(),e.preventDefault(),!1}},{key:"dragOver",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"dragEnter",value:function(e){this.setState({dragover:!0}),e.preventDefault(),e.stopPropagation()}},{key:"dragLeave",value:function(e){return this.setState({dragover:!1}),e.preventDefault(),!1}},{key:"setResize",value:function(e){e.preventDefault(),this.setState({resize:!0})}},{key:"unsetResize",value:function(e){e.preventDefault(),this.setState({resize:!1})}},{key:"resizeMouseMove",value:function(e){this.state.resize&&this.resizing(e.clientX,e.clientY)}},{key:"resizing",value:function(e,t){var a=this.editorRef.current,s=e-a.offsetLeft+8,n=t-a.offsetTop+8;this.setState({width:s,height:n})}},{key:"render",value:function(){var e=[],t="";this.state.docked||(e={position:"fixed",top:this.state.positionY,left:this.state.positionX,zIndex:"999",width:this.state.width,height:this.state.height},t=" active");var a="";this.state.dragover&&(a=" over");var s,r=n.a.createElement("div",{className:"transcription-editor-move-handle",onMouseDown:this.setHandle.bind(this),onMouseUp:this.unsetHandle.bind(this)},n.a.createElement("i",{className:"fa fa-arrows"})),i="";if(this.state.textarea_disabled){i="hidden";var l="";null!==this.props.page.transcription&&(l=this.props.page.transcription),s=n.a.createElement("div",{className:"transcription-container",dangerouslySetInnerHTML:{__html:l}})}return n.a.createElement("div",null,s,n.a.createElement("div",{className:i},n.a.createElement("div",{className:"transcription-editor-dropzone"+t+a,onDrop:this.dragStop.bind(this),onDragEnter:this.dragEnter.bind(this),onDragOver:this.dragOver.bind(this),onDragLeave:this.dragLeave.bind(this)}),n.a.createElement("div",{className:"transcription-editor",ref:this.editorRef,style:e,draggable:"true",onDragStart:this.startDrag.bind(this)},r,n.a.createElement("div",{className:"transcription-saving-container"},n.a.createElement("div",{className:"transcription-saving"},this.state.saving)),n.a.createElement("textarea",{name:this.elementName}))))}}]),t}(n.a.Component),Gt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,title:"",pages:[],page:[],containerClass:"container",error:!1,msg:"",isAdmin:a.props.isAdmin,prevlocation:"",prevlocationpath:"",transcription_status:-1,navDisabled:!1,selectedPage:0,adminModal:!1},a.showPage=a.showPage.bind(Object(h.a)(Object(h.a)(a))),a.updatePages=a.updatePages.bind(Object(h.a)(Object(h.a)(a))),a.updateErrorState=a.updateErrorState.bind(Object(h.a)(Object(h.a)(a))),a.disableNav=a.disableNav.bind(Object(h.a)(Object(h.a)(a))),a.enableNav=a.enableNav.bind(Object(h.a)(Object(h.a)(a))),a.showAdminModal=a.showAdminModal.bind(Object(h.a)(Object(h.a)(a))),a.handleClose=a.handleClose.bind(Object(h.a)(Object(h.a)(a))),a.handleFormChange=a.handleFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(x.a)({},s,a))}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t,a=this.state.page;"undefined"!==typeof a.archive_filename&&(t=a.archive_filename);var s,n=0,r=this;if("undefined"===typeof this.props.match.params.itemId)return!1;n=this.props.match.params.itemId,s=y+"update-letter-transcription-page-status/"+n;var i=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+i,g.a.post(s,{archive_filename:t,transcription_status:this.state.transcription_status}).then(function(e){if(!0===e.data.status){for(var a=e.data.data,s=[],n=0;n<a.length;n++){var i=a[n];i.archive_filename===t&&(s=i)}r.setState({page:s,pages:a,adminModal:!1})}}).catch(function(e){console.log(e)})}},{key:"showAdminModal",value:function(){this.setState({adminModal:!0})}},{key:"handleClose",value:function(){this.setState({adminModal:!1})}},{key:"loadItem",value:function(){var e,t=0,a=this;if("undefined"===typeof this.props.match.params.itemId)return!1;t=this.props.match.params.itemId,e=y+"letter-transcribe/"+t;var s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g.a.get(e).then(function(e){var t=e.data.data;!0===e.data.status?a.setState({title:t.title,pages:t.pages,page:t.pages[0],transcription_status:t.pages[0].transcription_status,loading:!1}):a.setState({title:t.title,error:!0,msg:e.data.message,loading:!1})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadItem(),"undefined"!==typeof this.props.history.location.prevlocation&&this.setState({prevlocation:this.props.history.location.prevlocation,prevlocationpath:this.props.history.location.prevlocationpath})}},{key:"disableNav",value:function(e){this.state.navDisabled||this.setState({navDisabled:!0})}},{key:"enableNav",value:function(){this.state.navDisabled&&this.setState({navDisabled:!1})}},{key:"showPage",value:function(e){if(!this.state.navDisabled){var t=this.state.pages[e];this.setState({page:t,selectedPage:e});var a=0;"undefined"!==typeof t.transcription_status&&(a=parseInt(t.transcription_status,10),this.setState({transcription_status:a}))}}},{key:"updatePages",value:function(e){this.setState({pages:e})}},{key:"updateErrorState",value:function(e){this.setState({error:e.error,msg:e.msg})}},{key:"render",value:function(){var e,t,a=[];if("true"!==sessionStorage.getItem("sessionActive"))a=[{label:"My transcriptions",path:""}],e=n.a.createElement("div",null,n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}));else if(this.state.error)a=[{label:"My transcriptions",path:"/user-transcriptions"},{label:t=this.state.title,path:""}],e=n.a.createElement("p",{className:"text-center"},this.state.msg);else{this.state.loading?e=n.a.createElement("div",{className:"loader-container item-loader"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):!1===this.state.loading&&(t=this.state.title,e=n.a.createElement("div",null,n.a.createElement("div",{className:"text-right"},n.a.createElement("a",{className:"btn btn-default btn-xs",target:"_blank",href:"/wp-post/how-to-transcribe"},"How to transcribe")),n.a.createElement(Rt,{pages:this.state.pages,disabled:this.state.navDisabled,function:this.showPage,selected:this.state.selectedPage}),n.a.createElement(Lt,{page:this.state.page}),n.a.createElement(Yt,{updatePages:this.updatePages,letterId:this.props.match.params.itemId,page:this.state.page,id:"letter-edit",error:this.updateErrorState,disableNav:this.disableNav,enableNav:this.enableNav})));var s={label:"My transcriptions",path:"/user-transcriptions"};""!==this.state.prevlocation&&(s={label:this.state.prevlocation,path:this.state.prevlocationpath}),a.push(s),a.push({label:t,path:""})}return n.a.createElement("div",null,n.a.createElement("div",{className:"container",id:"transcription-container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:a}),n.a.createElement("h1",null,n.a.createElement("span",null,t)),n.a.createElement("div",{className:"item-container"},e)))))}}]),t}(s.Component),Ut=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={headerText:"",bodyText:"",buttonCancel:"",buttonSuccess:"",buttonCancelText:"",buttonSuccessText:"",showModal:!1},a.handleShow=a.handleShow.bind(Object(h.a)(Object(h.a)(a))),a.handleClose=a.handleClose.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({showModal:!0})}},{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.setState({headerText:this.props.headerText,bodyText:this.props.bodyText,buttonCancel:this.props.buttonCancel,buttonSuccess:this.props.buttonSuccess,buttonCancelText:this.props.buttonCancelText,buttonSuccessText:this.props.buttonSuccessText,returnFunction:this.props.returnFunction,showModal:this.props.showModal})}},{key:"render",value:function(){var e=n.a.createElement(T.a,{show:this.state.showModal,onHide:this.handleClose,bsSize:"small"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,this.state.headerText)),n.a.createElement(T.a.Body,null,this.state.bodyText),n.a.createElement(T.a.Footer,null,this.state.buttonCancel,this.state.buttonSuccess));return n.a.createElement("div",null,e)}}]),t}(n.a.Component),Vt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,userName:"",userEmail:"",createdAt:"",numLetters:"",numTranscriptions:"",showUpdateModal:!1,updateSubmitStatus:!1,updateName:"",updateEmail:"",updateErrorShow:!1,updateErrorMessage:"",showPasswordModal:!1,passwordSubmitStatus:!1,updatePassword:"",updatePasswordConfirm:"",passwordErrorShow:!1,passwordErrorMessage:"",strengthClass:"",strengthLabel:"",forgetMeErrorShow:!1,forgetMeErrorMessage:"",showForgetMeConfirm:!1},a.loadItem=a.loadItem.bind(Object(h.a)(Object(h.a)(a))),a.handleUpdateModalShow=a.handleUpdateModalShow.bind(Object(h.a)(Object(h.a)(a))),a.handleUpdateModalClose=a.handleUpdateModalClose.bind(Object(h.a)(Object(h.a)(a))),a.handleUpdateFormChange=a.handleUpdateFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handleUpdateFormSubmit=a.handleUpdateFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.updateErrorValidation=a.updateErrorValidation.bind(Object(h.a)(Object(h.a)(a))),a.handlePasswordModalShow=a.handlePasswordModalShow.bind(Object(h.a)(Object(h.a)(a))),a.handlePasswordModalClose=a.handlePasswordModalClose.bind(Object(h.a)(Object(h.a)(a))),a.handlePasswordFormChange=a.handlePasswordFormChange.bind(Object(h.a)(Object(h.a)(a))),a.handlePasswordFormSubmit=a.handlePasswordFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.passwordStrengthCalculate=a.passwordStrengthCalculate.bind(Object(h.a)(Object(h.a)(a))),a.passwordErrorValidation=a.passwordErrorValidation.bind(Object(h.a)(Object(h.a)(a))),a.showForgetMeConfirm=a.showForgetMeConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideForgetMeConfirm=a.hideForgetMeConfirm.bind(Object(h.a)(Object(h.a)(a))),a.forgetMeSubmit=a.forgetMeSubmit.bind(Object(h.a)(Object(h.a)(a))),a.handleLogout=a.handleLogout.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleUpdateModalShow",value:function(){this.setState({showUpdateModal:!0,updateName:this.state.userName,updateEmail:this.state.userEmail})}},{key:"handleUpdateModalClose",value:function(){this.setState({showUpdateModal:!1})}},{key:"handleUpdateFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(x.a)({},s,a))}},{key:"handleUpdateFormSubmit",value:function(e){if(e.preventDefault(),this.updateErrorValidation()){if(this.state.updateSubmitStatus)return!1;this.setState({updateSubmitStatus:!0});var t=this,a=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+a,g.a.post(y+"update-user",{name:this.state.updateName.trim(),email:this.state.updateEmail.trim()}).then(function(e){t.setState({updateSubmitStatus:!1,showUpdateModal:!1,userName:t.state.updateName,userEmail:t.state.updateEmail})}).catch(function(e){console.log(e)})}}},{key:"updateErrorValidation",value:function(){return 0===this.state.updateName.trim().length?(this.nameInput.focus(),this.setState({updateErrorShow:!0,updateErrorMessage:"Your Full Name cannot be blank!"}),!1):-1===this.state.updateEmail.search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?(this.emailInput.focus(),this.setState({updateErrorShow:!0,updateErrorMessage:"Please enter a valid E-mail Address to continue!"}),!1):(this.setState({updateErrorShow:!1,updateErrorMessage:""}),!0)}},{key:"handlePasswordModalShow",value:function(){this.setState({showPasswordModal:!0})}},{key:"handlePasswordModalClose",value:function(){this.setState({showPasswordModal:!1})}},{key:"handlePasswordFormChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;"updatePassword"===s&&this.passwordStrengthCalculate(a),this.setState(Object(x.a)({},s,a))}},{key:"handlePasswordFormSubmit",value:function(e){if(e.preventDefault(),this.passwordErrorValidation()){if(this.state.passwordSubmitStatus)return!1;this.setState({passwordSubmitStatus:!0});var t=this,a=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+a,g.a.post(y+"update-user-password",{password:this.state.updatePassword.trim(),password_confirmation:this.state.updatePasswordConfirm.trim()}).then(function(e){t.setState({passwordSubmitStatus:!1,showPasswordModal:!1,updatePassword:"",updatePasswordConfirm:""})}).catch(function(e){console.log(e)})}}},{key:"passwordStrengthCalculate",value:function(e){var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),a=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"),s="",n="";e.trim().length>0&&(t.test(e)?(s=" green",n="Strong"):a.test(e)?(s=" orange",n="Medium"):(s=" red",n="Weak")),this.setState({strengthClass:s,strengthLabel:n})}},{key:"passwordErrorValidation",value:function(){return this.state.updatePassword.trim().length<5?(this.passwordInput.focus(),this.setState({passwordErrorShow:!0,passwordErrorMessage:"Your new password must contain at least 6 characters"}),!1):this.state.updatePassword.trim()!==this.state.updatePasswordConfirm.trim()?(this.passwordConfirmInput.focus(),this.setState({passwordErrorShow:!0,passwordErrorMessage:"Password and password confirm don't match. Please try again."}),!1):(this.setState({passwordErrorShow:!1,passwordErrorMessage:""}),!0)}},{key:"showForgetMeConfirm",value:function(){this.setState({showForgetMeConfirm:!0})}},{key:"hideForgetMeConfirm",value:function(){this.setState({showForgetMeConfirm:!1})}},{key:"forgetMeSubmit",value:function(){var e=this,t=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+t,g.a.get(y+"forget-me").then(function(t){"error"===t.data.data.status?e.setState({forgetMeErrorShow:!0,forgetMeErrorMessage:t.data.message,showForgetMeConfirm:!1}):e.handleLogout()}).catch(function(e){console.log(e)})}},{key:"handleLogout",value:function(){sessionStorage.setItem("sessionActive",!1),sessionStorage.setItem("accessToken",""),sessionStorage.setItem("userName",""),z("",!1,"",!0),window.location.reload()}},{key:"loadItem",value:function(){var e=this,t=y+"user-profile",a=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+a,g.a.get(t).then(function(t){var a=t.data.data;e.setState({loading:!1,userName:a.name,userEmail:a.email,createdAt:a.created_at,numLetters:a.num_letters,numTranscriptions:a.num_transcriptions})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadItem(),Object(it.loadProgressBar)()}},{key:"render",value:function(){var e,t,a,s,r,i=this,l={label:"User profile",path:""};if("true"!==sessionStorage.getItem("sessionActive"))e=n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}),t=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:l}),n.a.createElement("h1",null,"User profile"),n.a.createElement("div",{className:"item-container"},e))));else if(this.state.loading)t=n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}));else{var o="error-container";this.state.forgetMeErrorShow&&(o="error-container-visible");var c="error-container";this.state.updateErrorShow&&(c="error-container-visible"),a=n.a.createElement(T.a,{show:this.state.showUpdateModal,onHide:this.handleUpdateModalClose,bsSize:"small"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,n.a.createElement("i",{className:"fa fa-user-circle"})," Update your information")),n.a.createElement(T.a.Body,null,n.a.createElement("form",{onSubmit:this.handleUpdateFormSubmit},n.a.createElement("div",{className:c},this.state.updateErrorMessage),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Name"),n.a.createElement("input",{name:"updateName",type:"text",className:"form-control",ref:function(e){i.nameInput=e},value:this.state.updateName,onChange:this.handleUpdateFormChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"E-mail"),n.a.createElement("input",{name:"updateEmail",type:"email",className:"form-control",ref:function(e){i.nameInput=e},value:this.state.updateEmail,onChange:this.handleUpdateFormChange})),n.a.createElement("button",{className:"btn btn-letters",type:"submit"},n.a.createElement("i",{className:"fa fa-save"})," Submit"))));var m="error-container";this.state.passwordErrorShow&&(m="error-container-visible"),s=n.a.createElement(T.a,{show:this.state.showPasswordModal,onHide:this.handlePasswordModalClose,bsSize:"small"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,"Update your password")),n.a.createElement(T.a.Body,null,n.a.createElement("form",{onSubmit:this.handlePasswordFormSubmit},n.a.createElement("div",{className:m},this.state.passwordErrorMessage),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{name:"updatePassword",type:"password",className:"form-control",ref:function(e){i.passwordInput=e},onChange:this.handlePasswordFormChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"password-strength"+this.state.strengthClass},n.a.createElement("div",{className:this.state.strengthClass}),n.a.createElement("div",{className:"password-text"},this.state.strengthLabel))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password confirm"),n.a.createElement("input",{name:"updatePasswordConfirm",type:"password",className:"form-control",ref:function(e){i.passwordConfirmInput=e},value:this.state.handlePasswordFormChange,onChange:this.handlePasswordFormChange})),n.a.createElement("button",{className:"btn btn-letters",type:"submit"},n.a.createElement("i",{className:"fa fa-save"})," Submit"))));var u=new Date(this.state.createdAt),d=["January","February","March","April","May","June","July","August","September","October","November","December"][u.getUTCMonth()]+" "+u.getUTCDate()+", "+u.getUTCFullYear();r=n.a.createElement(Ut,{headerText:"Forget me",bodyText:"All your personal information will be permanently removed from the system. This action cannot be undone. Continue?",buttonCancel:n.a.createElement("button",{type:"button",className:"pull-left btn btn-primary btn-sm",onClick:this.hideForgetMeConfirm},"Cancel"),buttonSuccess:n.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.forgetMeSubmit},n.a.createElement("i",{className:"fa fa-times"})," Forget me"),showModal:this.state.showForgetMeConfirm}),e=n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8"},n.a.createElement("h4",null,"Welcome ",this.state.userName),n.a.createElement("p",null,n.a.createElement("span",{className:"href-btn",onClick:this.handleUpdateModalShow},"Update user information"),n.a.createElement("br",null),n.a.createElement("span",{className:"href-btn",onClick:this.handlePasswordModalShow},"Update password"),n.a.createElement("br",null),n.a.createElement("span",{className:"href-btn",onClick:this.showForgetMeConfirm},"Forget me"),n.a.createElement("br",null))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},"Member since: ",d,n.a.createElement("br",null),"Letters added: ",this.state.numLetters,n.a.createElement("br",null),"Letters transcribed: ",this.state.numTranscriptions,n.a.createElement("br",null))),t=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:l}),n.a.createElement("h1",null,"User profile"),n.a.createElement("div",{className:"item-container"},n.a.createElement("div",{className:o},this.state.forgetMeErrorMessage),e))))}return n.a.createElement("div",null,t,a,s,r)}}]),t}(s.Component),Qt=a(400),zt=a(408),Ht=(a(854),a(401)),qt=a.n(Ht),Zt=a(1),Wt=a.n(Zt),Xt=a(96),Kt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={keywordsOptions:[],selectedOption:[]},a.loadKeywords=a.loadKeywords.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadKeywords",value:function(){if(null!==sessionStorage.getItem("uploaded_topics_list")&&sessionStorage.getItem("uploaded_topics_list").length>0){for(var e=JSON.parse(sessionStorage.getItem("uploaded_topics_list")),t=[],a=0;a<e.length;a++){var s=e[a],n=this.keywordItem(s,0);t.push(n)}this.setState({loading:!1,keywordsOptions:t})}else{var r=this;g.a.get(y+"topics").then(function(e){var t=e.data.data;sessionStorage.setItem("uploaded_topics_list",JSON.stringify(t));for(var a=[],s=0;s<t.length;s++){var n=t[s],i=r.keywordItem(n,0);a.push(i)}r.setState({loading:!1,keywordsOptions:a})}).catch(function(e){console.log(e)})}}},{key:"keywordItem",value:function(e,t){var a=e.children,s=[],n=[{label:e.name,value:e.id,topic_id:e.id,child:t}];return a.length>0&&(s=this.keywordChildren(a,1),n.push(s)),n}},{key:"keywordChildren",value:function(e,t){var a=[];if(e.length>0)for(var s=0;s<e.length;s++){var n=e[s],r=this.keywordItem(n,t);a.push(r)}return a}},{key:"componentDidMount",value:function(){this.loadKeywords()}},{key:"render",value:function(){var e=function e(t){return t.reduce(function(t,a){return Array.isArray(a)?t.concat(e(a)):t.concat(a)},[])}(this.state.keywordsOptions);return n.a.createElement(Xt.b,{name:this.props.elementName,value:this.props.selected,onChange:this.props.onChangeFunction,options:e,multi:this.props.multi,removeSelected:this.props.removeSelected,optionComponent:$t})}}]),t}(n.a.Component),$t=qt()({propTypes:{children:Wt.a.node,className:Wt.a.string,isDisabled:Wt.a.bool,isFocused:Wt.a.bool,isSelected:Wt.a.bool,onFocus:Wt.a.func,onSelect:Wt.a.func,option:Wt.a.object.isRequired},handleMouseDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)},handleMouseEnter:function(e){this.props.onFocus(this.props.option,e)},handleMouseMove:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)},render:function(){var e="";return parseInt(this.props.option.child,10)>0&&(e=" select-child"),n.a.createElement("div",{className:this.props.className+e,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,title:this.props.option.title,key:"select-"+this.props.option.label},this.props.children)}}),ea=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={selectOptions:[]},a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("upload_people_list")&&sessionStorage.getItem("upload_people_list").length>0){var e=JSON.parse(sessionStorage.getItem("upload_people_list"));this.setItems(e)}else{var t=this;g.a.get(y+"people").then(function(e){var a=e.data.data;t.setItems(a),sessionStorage.setItem("upload_people_list",JSON.stringify(a))}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],n={label:s,value:s};t.push(n)}this.setState({selectOptions:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e=this.state.selectOptions;return n.a.createElement(Xt.a,{name:this.props.elementName,value:this.props.selected,onChange:this.props.onChangeFunction,options:e,multi:this.props.multi,removeSelected:this.props.removeSelected})}}]),t}(n.a.Component),ta=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={selectOptions:[]},a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("upload_sources_list")&&sessionStorage.getItem("upload_sources_list").length>0){var e=JSON.parse(sessionStorage.getItem("upload_sources_list"));this.setItems(e)}else{var t=this;g.a.get(y+"sources").then(function(e){var a=e.data.data;t.setItems(a),sessionStorage.setItem("upload_sources_list",JSON.stringify(a))}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],n={label:s.source,value:s.source};t.push(n)}this.setState({selectOptions:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e=this.state.selectOptions;return n.a.createElement(Xt.a,{name:this.props.elementName,value:this.props.selected,onChange:this.props.onChangeFunction,options:e,multi:this.props.multi,removeSelected:this.props.removeSelected})}}]),t}(n.a.Component),aa=a(167),sa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={form:{title:"",additional_information:"",keywords:[],year:"1915",month:"",day:"",letter_from:"",creator_gender:"",letter_to:"",language:"",source:"",doc_collection:"",recipient_location:"",creator_location:"",year_of_death_of_author:"",notes:"",images:[],additional_img_info:["Letter"],terms_of_use:"",copyright_statement:"",pages:[]},errors:{title:!1,language:!1,source:!1,terms:!1,license:!1},filesErrorText:"",filesError:!1,imageBlocks:[],daysOptions:[],upload_loader:!1,progress_bar_text:"",progress_bar_width:0,redirect:!1,imagesPreview:[],updateBtnText:"Submit",terms_of_useChecked:!1,copyright_statementChecked1:!1,copyright_statementChecked2:!1,submitStatus:0,loading:!0,showDeleteConfirm:!1,deleteConfirmSubmit:"",showDeleteLetterConfirm:!1,deleteLetterConfirmSubmit:"",prevlocation:"",prevlocationpath:"",imagePaths:[],photoIndex:0,isOpen:!1,enableTranscription:!1},a.loadItem=a.loadItem.bind(Object(h.a)(Object(h.a)(a))),a.calculateDays=a.calculateDays.bind(Object(h.a)(Object(h.a)(a))),a.yearOfDeathList=a.yearOfDeathList.bind(Object(h.a)(Object(h.a)(a))),a.handleFormChange=a.handleFormChange.bind(Object(h.a)(Object(h.a)(a))),a.propChecked=a.propChecked.bind(Object(h.a)(Object(h.a)(a))),a.handleSelectFormChange=a.handleSelectFormChange.bind(Object(h.a)(Object(h.a)(a))),a.removeImageBlock=a.removeImageBlock.bind(Object(h.a)(Object(h.a)(a))),a.addImageBlock=a.addImageBlock.bind(Object(h.a)(Object(h.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(h.a)(Object(h.a)(a))),a.errorValidation=a.errorValidation.bind(Object(h.a)(Object(h.a)(a))),a.onDragEnd=a.onDragEnd.bind(Object(h.a)(Object(h.a)(a))),a.reorderPages=a.reorderPages.bind(Object(h.a)(Object(h.a)(a))),a.removeFormImage=a.removeFormImage.bind(Object(h.a)(Object(h.a)(a))),a.showDeleteConfirm=a.showDeleteConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideDeleteConfirm=a.hideDeleteConfirm.bind(Object(h.a)(Object(h.a)(a))),a.assignItemStateValues=a.assignItemStateValues.bind(Object(h.a)(Object(h.a)(a))),a.loadItemImages=a.loadItemImages.bind(Object(h.a)(Object(h.a)(a))),a.deleteLetter=a.deleteLetter.bind(Object(h.a)(Object(h.a)(a))),a.showDeleteLetterConfirm=a.showDeleteLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideDeleteLetterConfirm=a.hideDeleteLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.showBigImage=a.showBigImage.bind(Object(h.a)(Object(h.a)(a))),a.enableTranscription=a.enableTranscription.bind(Object(h.a)(Object(h.a)(a))),a.resetState=a.resetState.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleFormChange",value:function(e,t){var a=t.target,s="checkbox"===a.type?a.checked:a.value,n=a.name;if("month"===n){var r=parseInt(this.state.form.year,10),i=parseInt(s,10)-1;this.calculateDays(r,i)}if("year"===n){var l=parseInt(s,10);if(""!==this.state.form.month){var o=parseInt(this.state.form.month,10)-1;this.calculateDays(l,o)}}var c=Object.assign({},this.state);if("images"===n){var m=this.state.form.images;"undefined"===typeof m[e]?m.push(a.files[0]):m[e]=a.files[0],c.form[n]=m}else if("additional_img_info"===n){var u=this.state.form.additional_img_info;u[e]=s,c.form[n]=u}else c.form[n]=s;this.setState({newState:c}),"terms_of_use"!==n&&"copyright_statement"!==n||this.propChecked(n,s)}},{key:"propChecked",value:function(e,t){"terms_of_use"===e?this.setState({terms_of_useChecked:t}):"copyright_statement"===e&&("the Material is out of copyright protection (i.e. that you are aware that the author of the Material died prior to 1 January 1943);"===t?this.setState({copyright_statementChecked1:!0}):"you have the rights to upload the Material in question for use or you have the permission of the relevant rightholder(s) to do so as outlined in the Letters of 1916 Terms for User Contributions"===t&&this.setState({copyright_statementChecked2:!0})),this.value}},{key:"handleSelectFormChange",value:function(e,t,a){var s=Object.assign({},this.state);s.form[e]=a,this.setState({newState:s})}},{key:"deleteLetter",value:function(){var e=this.props.match.params.letterId,t=this,a=y+"delete-letter",s=sessionStorage.getItem("accessToken"),n={id:e};g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"DELETE",url:a,data:n,crossDomain:!0}).then(function(e){t.setState({redirect:!0})}).catch(function(e){console.log(e)})}},{key:"showDeleteLetterConfirm",value:function(){this.setState({showDeleteLetterConfirm:!0,deleteLetterConfirmSubmit:this.deleteLetter})}},{key:"hideDeleteLetterConfirm",value:function(){this.setState({showDeleteLetterConfirm:!1})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state.submitStatus;if(!0===this.errorValidation()){if(t>0)return!1;this.setState({submitStatus:1,updateBtnText:n.a.createElement("span",null,"Saving... ",n.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"}))});var a=this.props.match.params.letterId,s=this,r=Object.assign({},this.state.form),i=new FormData,l=0;r.images.length>0&&(l=1,r.images.forEach(function(e){i.append("data[]",e)})),r.images=[],i.set("form",JSON.stringify(r)),i.set("format","uploader"),i.set("letter_id",a);var o=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+o,s.setState({upload_loader:!0}),g()({method:"POST",url:y+"upload-letter/"+a,data:i,crossDomain:!0,config:{headers:{"Content-Type":"multipart/form-data"}},onUploadProgress:function(e){if(l>0){var t=Math.round(100*e.loaded/e.total),a="Uploading... "+parseFloat(t).toFixed(2)+"%",n=t+"%";s.setState({progress_bar_text:a,progress_bar_width:n})}}}).then(function(e){if(t=0,!0===e.data.status){var r=e.data.errors.files;if(r.length>0){for(var i="",l=0;l<r.length;l++){l>0&&(i+=", "),i+='"'+r[l].filename+'"'}var o="";1===r.length?o="The file "+i+" is not a valid image file and it will not be added to your letter.":r.length>1&&(o="The files "+i+" are not a valid image files and will not be added to your letter."),s.setState({filesErrorText:o,filesError:!0})}if(0===parseInt(a,10))s.setState({updateBtnText:n.a.createElement("span",null,"Saved successfully ",n.a.createElement("i",{className:"fa fa-check"}))}),setTimeout(function(){s.setState({upload_loader:!1,progress_bar_text:"",progress_bar_width:0,redirect:!0,updateBtnText:"Submit",submitStatus:0})},1e3);else if(parseInt(a,10)>0){var c=e.data.message;s.assignItemStateValues(e.data.data),s.setState({updateBtnText:n.a.createElement("span",null,c," ",n.a.createElement("i",{className:"fa fa-check"}))}),setTimeout(function(){s.setState({upload_loader:!1,progress_bar_text:"",progress_bar_width:0,updateBtnText:"Submit",submitStatus:0})},1e3)}}else if(!1===e.data.status){var m=[];for(var u in e.data.errors)m.push(n.a.createElement("div",null,e.data.errors[u]));s.setState({updateBtnText:n.a.createElement("span",null,"Error saving... ",n.a.createElement("i",{className:"fa fa-times"})),submitStatus:0,generic_error:m}),setTimeout(function(){s.setState({updateBtnText:"Submit"})},1e3)}}).catch(function(e){console.log(e)})}}},{key:"errorValidation",value:function(){var e=Object.assign({},this.state);return 0===this.state.form.title.trim().length?(e.errors.title=!0,this.titleInput.focus(),this.setState({newState:e}),!1):(e.errors.title=!1,""===this.state.form.language?(e.errors.language=!0,this.languageInput.focus(),this.setState({newState:e}),!1):(e.errors.language=!1,""===this.state.form.source||this.state.form.source===[]?(e.errors.source=!0,this.sourceInput.focus(),this.setState({newState:e}),!1):(e.errors.source=!1,""===this.state.form.terms_of_use||!1===this.state.form.terms_of_use?(e.errors.terms=!0,this.termsInput.focus(),this.setState({newState:e}),!1):(e.errors.terms=!1,""===this.state.form.copyright_statement||!1===this.state.form.copyright_statement?(e.errors.license=!0,this.licenseInput.focus(),this.setState({newState:e}),!1):(e.errors.license=!1,this.setState({newState:e}),!0)))))}},{key:"calculateDays",value:function(e,t){for(var a=function(e,t){var a=new Date(e,parseInt(t,10),1);return(new Date(e,parseInt(t,10)+1,1)-a)/864e5}(e,t),s=[n.a.createElement("option",{key:0,value:""}," -- ")],r=1;r<=a;r++){var i=r;r<10&&(i="0"+r),s.push(n.a.createElement("option",{key:r,value:i},i))}this.setState({daysOptions:s})}},{key:"yearOfDeathList",value:function(){var e=(new Date).getFullYear(),t=[];t.push(n.a.createElement("option",{value:"",key:0}," -- "));for(var a=1915;a<=e;a++)t.push(n.a.createElement("option",{key:a,value:a},a));return t}},{key:"onDragEnd",value:function(e){if(e.destination){var t=this.reorderPages(this.state.form.pages,e.source.index,e.destination.index);this.setState({imagesPreview:this.loadItemImages(t)});var a=this.props.match.params.letterId,s=y+"update-letter-pages-order/"+a,n=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+n,g()({method:"POST",url:s,data:{pages:t},crossDomain:!0}).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"reorderPages",value:function(e,t,a){var s=Array.from(e),n=s.splice(t,1),r=Object(zt.a)(n,1)[0];return s.splice(a,0,r),s}},{key:"showDeleteConfirm",value:function(e){this.setState({showDeleteConfirm:!0,deleteConfirmSubmit:this.removeFormImage.bind(this,e)})}},{key:"hideDeleteConfirm",value:function(){this.setState({showDeleteConfirm:!1})}},{key:"removeFormImage",value:function(e){var t=this.props.match.params.letterId,a=this,s=y+"delete-letter-page",n=sessionStorage.getItem("accessToken"),r={id:t,archive_filename:e};g.a.defaults.headers.common.Authorization="Bearer "+n,g()({method:"DELETE",url:s,data:r,crossDomain:!0}).then(function(e){var t=e.data.data;a.setState({imagesPreview:a.loadItemImages(t),showDeleteConfirm:!1}),a.loadItem()}).catch(function(e){console.log(e)})}},{key:"loadItem",value:function(){var e=this.props.match.params.letterId,t=this,a=y+"user-letter/"+e,s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g.a.get(a).then(function(e){var a=e.data.data;t.assignItemStateValues(a)}).catch(function(e){console.log(e)})}},{key:"assignItemStateValues",value:function(e){var t=e.date_created.split("-"),a=t[0],s="",n="";void 0!==typeof t[1]&&(s=t[1]),void 0!==typeof t[2]&&(this.calculateDays(a,s),n=t[2]);for(var r=[],i=e.topics,l=0;l<i.length;l++){var o=i[l];r.push({label:o.topic_name,value:o.topic_id})}var c=e.pages,m=this.loadItemImages(c),u=!1,d=!1;"the Material is out of copyright protection (i.e. that you are aware that the author of the Material died prior to 1 January 1943);"===e.copyright_statement&&(u=!0),"you have the rights to upload the Material in question for use or you have the permission of the relevant rightholder(s) to do so as outlined in the Letters of 1916 Terms for User Contributions"===e.copyright_statement&&(d=!0),this.setState({imagesPreview:m,terms_of_useChecked:e.terms_of_use,copyright_statementChecked1:u,copyright_statementChecked2:d,loading:!1,form:{title:e.title,additional_information:e.description,keywords:r,year:a,month:s,day:n,letter_from:e.creator,creator_gender:e.creator_gender,letter_to:e.recipient,language:e.language,source:e.source,doc_collection:e.doc_collection,recipient_location:e.recipient_location,creator_location:e.creator_location,year_of_death_of_author:e.year_of_death_of_author,notes:e.notes,images:[],additional_img_info:["Letter"],terms_of_use:e.terms_of_use,copyright_statement:e.copyright_statement,pages:c}})}},{key:"loadItemImages",value:function(e){var t=this;if(!(e.length>0))return[];var a=function(){for(var a=[],s=[],r=function(r){var i=Z(e[r].archive_filename),l=n.a.createElement(aa.b,{key:r,draggableId:"draggable-"+r,index:r},function(e,a){return n.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(a.isDragging,s=e.draggableProps.style,Object(Qt.a)({userSelect:"none",padding:16,margin:"0 ".concat(8,"px 0 0"),background:"#ffffff",position:"relative"},s))}),n.a.createElement("div",{className:"btn btn-danger btn-xs remove-form-img",onClick:t.showDeleteConfirm.bind(t,i)},n.a.createElement("i",{className:"fa fa-trash"})),n.a.createElement("img",{key:r,onClick:t.showBigImage.bind(t,r),className:"img-thumbnail img-responsive form-page-thumbnail",src:E+"/diyhistory/archive/square_thumbnails/"+i,alt:"thumbnail"}));var s});a.push(l),s.push(E+"/diyhistory/archive/fullsize/"+i)},i=0;i<e.length;i++)r(i);var l=n.a.createElement("div",{className:"form-pages-preview-container"},n.a.createElement("label",null,"Pages"),n.a.createElement(aa.a,{onDragEnd:t.onDragEnd},n.a.createElement(aa.c,{droppableId:"droppable-1",direction:"horizontal"},function(e,t){return n.a.createElement("div",Object.assign({ref:e.innerRef,style:(s=t.isDraggingOver,{background:s?"#f5f5f5":"#ffffff",display:"flex",padding:8,overflow:"auto"})},e.droppableProps),a);var s})));return t.setState({imagePaths:s}),{v:l}}();return"object"===typeof a?a.v:void 0}},{key:"removeImageBlock",value:function(){var e=this.state.imageBlocks;e.splice(-1,1);var t=this.state.form.additional_img_info;t.splice(-1,1),this.setState({imageBlocks:e,additional_img_info:t})}},{key:"addImageBlock",value:function(){var e=this.state.imageBlocks,t=e.length+1,a=n.a.createElement("div",{key:t,className:"letter-form-image-block"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Image file"),n.a.createElement("input",{name:"images",accept:"image/*",type:"file",onClick:function(e){e.target.value=null},onChange:this.handleFormChange.bind(this,t)})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Additional image information"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"additional_img_info",onInput:this.handleFormChange.bind(this,t)},n.a.createElement("option",{value:"Letter"},"Letter"),n.a.createElement("option",{value:"Envelope"},"Envelope"),n.a.createElement("option",{value:"Enclosure"},"Enclosure"),n.a.createElement("option",{value:"Photograph"},"Photograph")))))),s=this.state.form.additional_img_info;s.push("Letter"),e.push(a),this.setState({imageBlocks:e,additional_img_info:s})}},{key:"showBigImage",value:function(e){this.setState({isOpen:!0,photoIndex:e})}},{key:"enableTranscription",value:function(){var e=this.props.match.params.letterId,t=this,a=y+"update-letter-transcription-status/"+e,s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"POST",url:a,crossDomain:!0}).then(function(e){t.setState({redirect:!0})}).catch(function(e){console.log(e)})}},{key:"resetState",value:function(){this.setState({form:{title:"",additional_information:"",keywords:[],year:"1915",month:"",day:"",letter_from:"",creator_gender:"",letter_to:"",language:"",source:"",doc_collection:"",recipient_location:"",creator_location:"",year_of_death_of_author:"",notes:"",images:[],additional_img_info:["Letter"],terms_of_use:"",copyright_statement:"",pages:[]},errors:{title:!1,language:!1,source:!1,terms:!1,license:!1},filesErrorText:"",filesError:!1,imageBlocks:[],daysOptions:[],upload_loader:!1,progress_bar_text:"",progress_bar_width:0,redirect:!1,imagesPreview:[],updateBtnText:"Submit",terms_of_useChecked:!1,copyright_statementChecked1:!1,copyright_statementChecked2:!1,submitStatus:0,loading:!1,showDeleteConfirm:!1,deleteConfirmSubmit:"",showDeleteLetterConfirm:!1,deleteLetterConfirmSubmit:"",prevlocation:"",prevlocationpath:"",imagePaths:[],photoIndex:0,isOpen:!1,enableTranscription:!1})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.letterId;parseInt(e,10)>0?this.loadItem():0===parseInt(e,10)&&this.setState({loading:!1}),this.yearOfDeathList(),Object(it.loadProgressBar)(),"undefined"!==typeof this.props.history.location.prevlocation&&this.setState({prevlocation:this.props.history.location.prevlocation,prevlocationpath:this.props.history.location.prevlocationpath});var t=!1;this.props.isAdmin&&(t=!0),this.setState({enableTranscription:t})}},{key:"componentDidUpdate",value:function(e,t){e.match.params.letterId===this.props.match.params.letterId||0!==this.props.match.params.letterId&&"0"!==this.props.match.params.letterId||(console.log(1),this.resetState())}},{key:"render",value:function(){var e,t,a,s=this,r=[];if("true"!==sessionStorage.getItem("sessionActive"))e=n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}),a=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:r}),n.a.createElement("h1",null,t),n.a.createElement("div",{className:"item-container"},e))));else if(this.state.loading)a=n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0}));else{var i,l=this.state.photoIndex,o=this.state.isOpen,c=this.state.imagePaths,m=this.props.match.params.letterId,u=[];parseInt(m,10)>0&&(u=n.a.createElement("button",{type:"button",className:"btn btn-danger pull-right",onClick:this.showDeleteLetterConfirm},n.a.createElement("i",{className:"fa fa-trash"})," Delete")),!0===this.state.redirect&&(i=n.a.createElement(A.a,{to:{pathname:"/user-letters",state:{from:"user-letters/"+m}}}));var d="";this.state.errors.title&&(d=" error-container-visible");var h="";this.state.errors.language&&(h=" error-container-visible");var p="";this.state.errors.source&&(p=" error-container-visible");var g="";this.state.errors.source&&(g=" error-container-visible");var f="";this.state.errors.source&&(f=" error-container-visible");var b="";this.state.filesError&&(b=" error-container-visible");var v=this.yearOfDeathList();0===parseInt(m,10)?t="New Letter":parseInt(m,10)>0&&(t="Update Letter");var E,y="",S=this.state.progress_bar_width,N=this.state.progress_bar_text;!0===this.state.upload_loader&&(E={width:S},y=n.a.createElement("div",{className:"upload-status-container",id:"upload-xml-status"},n.a.createElement("div",{className:"upload-status-bar-inner",style:E}),n.a.createElement("div",{className:"upload-status-bar-text"},N)));var k=[];this.state.enableTranscription&&parseInt(this.props.match.params.letterId,10)>0&&(k=n.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.enableTranscription},n.a.createElement("i",{className:"fa fa-check"})," Enable transcription"));var O="error-container";this.state.generic_error&&(O="error-container-visible"),e=n.a.createElement("div",null,this.state.imagesPreview,n.a.createElement("form",{name:"edit-letter",encType:"multipart/form-data",onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+d},n.a.createElement("p",null,"Error Saving! Please enter the ",n.a.createElement("b",null,"Title/Caption")," of the letter to continue.")),n.a.createElement("label",null,n.a.createElement("sup",null,"*"),"Title/Caption"),n.a.createElement("input",{className:"form-control",type:"text",name:"title",value:this.state.form.title,onChange:this.handleFormChange.bind(this,0),ref:function(e){s.titleInput=e}}),n.a.createElement("p",{className:"letter-form-description"},"For example: \u201cLetter from Joseph MacDonagh to his sister Mary MacDonagh, 4 May 1916\u201d or \u201cLetter from Jennifer to her friend Ellen Martin [January 1916]\u201d. Brackets indicate that information is unclear.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Additional Information"),n.a.createElement("textarea",{className:"form-control",name:"additional_information",onChange:this.handleFormChange.bind(this,0),value:this.state.form.additional_information}),n.a.createElement("p",{className:"letter-form-description"},"Here you may provide a brief summary of the letter and biographical information about the correspondents. This field is optional.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Keywords"),n.a.createElement(Kt,{elementName:"keywords",onChangeFunction:this.handleSelectFormChange.bind(this,"keywords",!0),multi:!0,selected:this.state.form.keywords,removeSelected:!1}),n.a.createElement("p",{className:"letter-form-description"},"Choose keywords that best describe your letter. You may choose as many as are applicable.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Date the letter was written"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"year",onChange:this.handleFormChange.bind(this,0),value:this.state.form.year},n.a.createElement("option",{value:"1915"},"1915"),n.a.createElement("option",{value:"1916"},"1916"),n.a.createElement("option",{value:"1917"},"1917"),n.a.createElement("option",{value:"1918"},"1918"),n.a.createElement("option",{value:"1919"},"1919"),n.a.createElement("option",{value:"1920"},"1920"),n.a.createElement("option",{value:"1921"},"1921"),n.a.createElement("option",{value:"1922"},"1922"),n.a.createElement("option",{value:"1923"},"1923"))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"month",onChange:this.handleFormChange.bind(this,0),value:this.state.form.month},n.a.createElement("option",{value:""},"--"),n.a.createElement("option",{value:"01"},"January"),n.a.createElement("option",{value:"02"},"February"),n.a.createElement("option",{value:"03"},"March"),n.a.createElement("option",{value:"04"},"April"),n.a.createElement("option",{value:"05"},"May"),n.a.createElement("option",{value:"06"},"June"),n.a.createElement("option",{value:"07"},"July"),n.a.createElement("option",{value:"08"},"August"),n.a.createElement("option",{value:"09"},"September"),n.a.createElement("option",{value:"10"},"October"),n.a.createElement("option",{value:"11"},"November"),n.a.createElement("option",{value:"12"},"December"))),n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"day",onChange:this.handleFormChange.bind(this,0),value:this.state.form.day},this.state.daysOptions)))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Letter From"),n.a.createElement(ea,{elementName:"letter_from",onChangeFunction:this.handleSelectFormChange.bind(this,"letter_from",!1),multi:!1,selected:this.state.form.letter_from,removeSelected:!0}),n.a.createElement("p",{className:"letter-form-description"},"Select author\u2019s name from the list or add a new name. If you know the person\u2019s full name, please do not mention any titles (such as Mr, Mrs, Dr, Rev, Lord, Lady, Captain etc.) here but add them in the \u201ctitle\u201d field. Provide middle names if possible to help us identify individual authors.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Author's gender"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"creator_gender",onChange:this.handleFormChange.bind(this,0),value:this.state.form.creator_gender},n.a.createElement("option",{value:""},"--"),n.a.createElement("option",{value:"Female"},"Female"),n.a.createElement("option",{value:"Male"},"Male"))))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Letter To"),n.a.createElement(ea,{elementName:"letter_to",onChangeFunction:this.handleSelectFormChange.bind(this,"letter_to",!1),multi:!1,selected:this.state.form.letter_to,removeSelected:!0}),n.a.createElement("p",{className:"letter-form-description"},"Add recipient of letter, such as \u201cMary MacDonagh\u201d. If you know the person\u2019s full name, please do not mention any titles (such as Mr, Mrs, Dr, Rev, Lord, Lady, Captain etc.) here but add them in the \u201ctitle\u201d field. Provide middle names if possible to help us identify individual authors.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+h},n.a.createElement("p",null,"Error Saving! Please select the ",n.a.createElement("b",null,"Language the letter is written in")," of the letter to continue.")),n.a.createElement("label",null,n.a.createElement("sup",null,"*"),"Language the letter is written in"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"language",onChange:this.handleFormChange.bind(this,0),ref:function(e){s.languageInput=e},value:this.state.form.language},n.a.createElement("option",{value:""},"--"),n.a.createElement("option",{value:"Irish"},"Irish"),n.a.createElement("option",{value:"English"},"English"),n.a.createElement("option",{value:"French"},"French"),n.a.createElement("option",{value:"German"},"German"))))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+p},n.a.createElement("p",null,"Error Saving! Please enter the ",n.a.createElement("b",null,"Source")," of the letter to continue.")),n.a.createElement("label",{ref:function(e){s.sourceInput=e}},n.a.createElement("sup",null,"*"),"Source"),n.a.createElement(ta,{elementName:"source",onChangeFunction:this.handleSelectFormChange.bind(this,"source",!1),multi:!1,selected:this.state.form.source,removeSelected:!0}),n.a.createElement("p",{className:"letter-form-description"},"This may be a public institution, such as the \u201cNational Library of Ireland\u201d, or a private collection, such as the \u201cMacDonagh Family Collection\u201d.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Document Collection/Number"),n.a.createElement("input",{className:"form-control",type:"text",name:"doc_collection",onChange:this.handleFormChange.bind(this,0),value:this.state.form.doc_collection}),n.a.createElement("p",{className:"letter-form-description"},"If your letter comes from a catalogued collection, please add further information such as the collection name and fond / item numbers.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Place (letter sent to)"),n.a.createElement("input",{className:"form-control",type:"text",name:"recipient_location",onChange:this.handleFormChange.bind(this,0),value:this.state.form.recipient_location}),n.a.createElement("p",{className:"letter-form-description"},"e.g. \u201cParis, France\u201d Please add name of region wherever possible. Countries are treated as geographical rather than political entities. Use \u201cIreland\u201d for places in Ulster and \u201cEngland\u201d, \u201cScotland\u201d or \u201cWales\u201d for places in Great Britain.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Place (letter sent from)"),n.a.createElement("input",{className:"form-control",type:"text",name:"creator_location",onChange:this.handleFormChange.bind(this,0),value:this.state.form.creator_location}),n.a.createElement("p",{className:"letter-form-description"},"e.g. \u201cDublin, Ireland\u201d Please add name of region wherever possible. Countries are treated as geographical rather than political entities. Use \u201cIreland\u201d for places in Ulster and \u201cEngland\u201d, \u201cScotland\u201d or \u201cWales\u201d for places in Great Britain.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Year of death of author"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"year_of_death_of_author",onChange:this.handleFormChange.bind(this,0),value:this.state.form.year_of_death_of_author},v)))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Additional Notes"),n.a.createElement("textarea",{className:"form-control",name:"notes",onChange:this.handleFormChange.bind(this,0),value:this.state.form.notes}),n.a.createElement("p",{className:"letter-form-description"},"Please enter additional notes for the Letters 1916-1923 administrators, e.g. information about missing pages. If you are not part of the Letters 1916-1923 project and are uploading a letter(s) to the database and would allow us to get in touch with you at a later date, please add your name and email address here.")),n.a.createElement("hr",null),n.a.createElement("h4",null,"Upload Image"),n.a.createElement("div",{className:"letter-form-image-block"},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+b},n.a.createElement("p",null,this.state.filesErrorText)),n.a.createElement("label",null,"Image file"),n.a.createElement("input",{name:"images",accept:"image/*",type:"file",onClick:function(e){e.target.value=null},onChange:this.handleFormChange.bind(this,0)})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Additional image information"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-4"},n.a.createElement("select",{className:"form-control",name:"additional_img_info",onChange:this.handleFormChange.bind(this,0)},n.a.createElement("option",{value:"Letter"},"Letter"),n.a.createElement("option",{value:"Envelope"},"Envelope"),n.a.createElement("option",{value:"Enclosure"},"Enclosure"),n.a.createElement("option",{value:"Photograph"},"Photograph")))))),n.a.createElement("div",null,this.state.imageBlocks),n.a.createElement("button",{type:"button",className:"btn btn-xs btn-default",onClick:this.removeImageBlock},"remove image"),n.a.createElement("br",null),n.a.createElement("button",{type:"button",className:"btn btn-xs btn-default",onClick:this.addImageBlock},"add another image"),n.a.createElement("hr",null),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+g},n.a.createElement("p",null,"Error Saving! You must accept the ",n.a.createElement("b",null,"Terms of Use")," to continue.")),n.a.createElement("label",null,n.a.createElement("sup",null,"*"),"Terms of Use"),n.a.createElement("p",null,"Before you can submit digital material to the Letters of 1916 Project, you must agree to the Letters of 1916 Terms for User Contributions. These terms can be found here"),n.a.createElement("label",{style:{fontWeight:"normal"}},n.a.createElement("input",{ref:function(e){s.termsInput=e},name:"terms_of_use",type:"checkbox",value:"I accept the terms & conditions. If you do not want to accept these terms, then please do not contribute content or descriptive data to the Letters of 1916 Project",onChange:this.handleFormChange.bind(this,0),checked:this.state.terms_of_useChecked})," ",n.a.createElement("small",null,"I accept the terms & conditions. If you do not want to accept these terms, then please do not contribute content or descriptive data to the Letters of 1916 Project"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"error-container"+f},n.a.createElement("p",null,"Error Saving! You must confirm the ",n.a.createElement("b",null,"License and Consent")," to continue.")),n.a.createElement("label",null,n.a.createElement("sup",null,"*"),"LICENSE AND CONSENT"),n.a.createElement("p",null,"In submitting Material to the collection, Maynooth University asks you to confirm that:"),n.a.createElement("label",{style:{fontWeight:"normal"}},n.a.createElement("input",{ref:function(e){s.licenseInput=e},name:"copyright_statement",type:"radio",value:"the Material is out of copyright protection (i.e. that you are aware that the author of the Material died prior to 1 January 1943);",checked:this.state.copyright_statementChecked1,onChange:this.handleFormChange.bind(this,0)})," ",n.a.createElement("small",null,"the Material is out of copyright protection (i.e. that you are aware that the author of the Material died prior to 1 January 1943);")),n.a.createElement("label",{style:{fontWeight:"normal"}},n.a.createElement("input",{name:"copyright_statement",type:"radio",value:"you have the rights to upload the Material in question for use or you have the permission of the relevant rightholder(s) to do so as outlined in the Letters of 1916 Terms for User Contributions",checked:this.state.copyright_statementChecked2,onChange:this.handleFormChange.bind(this,0)})," ",n.a.createElement("small",null,"you have the rights to upload the Material in question for use or you have the permission of the relevant rightholder(s) to do so as outlined in the Letters of 1916 Terms for User Contributions"))),n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{type:"submit",className:"btn btn-letters pull-left"},n.a.createElement("i",{className:"fa fa-save"})," ",this.state.updateBtnText),k,u),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},y)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("div",{className:O},this.state.generic_error))),i),o&&n.a.createElement(ht.a,{mainSrc:c[l],nextSrc:c[(l+1)%c.length],prevSrc:c[(l+c.length-1)%c.length],onCloseRequest:function(){return s.setState({isOpen:!1})},onMovePrevRequest:function(){return s.setState({photoIndex:(l+c.length-1)%c.length})},onMoveNextRequest:function(){return s.setState({photoIndex:(l+1)%c.length})}}));var w={label:"User Letters",path:"/user-letters"};""!==this.state.prevlocation&&(w={label:this.state.prevlocation,path:this.state.prevlocationpath}),r.push(w),r.push({label:t,path:""}),a=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:r}),n.a.createElement("h1",null,t),n.a.createElement("div",{className:"item-container letter-form-container"},e))))}return n.a.createElement("div",null,a,n.a.createElement(Ut,{headerText:"Delete page",bodyText:"The page will be deleted. Continue?",buttonCancel:n.a.createElement("button",{type:"button",className:"pull-left btn btn-primary btn-sm",onClick:this.hideDeleteConfirm},"Cancel"),buttonSuccess:n.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.state.deleteConfirmSubmit},n.a.createElement("i",{className:"fa fa-trash-o"})," Delete"),showModal:this.state.showDeleteConfirm}),n.a.createElement(Ut,{headerText:"Delete letter",bodyText:"This letter will be deleted. Continue?",buttonCancel:n.a.createElement("button",{type:"button",className:"pull-left btn btn-primary btn-sm",onClick:this.hideDeleteLetterConfirm},"Cancel"),buttonSuccess:n.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.state.deleteLetterConfirmSubmit},n.a.createElement("i",{className:"fa fa-trash-o"})," Delete"),showModal:this.state.showDeleteLetterConfirm}))}}]),t}(s.Component),na=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,items:[],page:1,current_page:1,temp_page:1,total:0,sort:"desc",paginate:10,paginationHTML:[],length:0,firstLoad:1,letterName:"",showDeleteLetterConfirm:!1,deleteLetterId:0,showBtnDisabledConfirm:!1,btnDisabledText:""},a.updatePage=a.updatePage.bind(Object(h.a)(Object(h.a)(a))),a.updatePaginate=a.updatePaginate.bind(Object(h.a)(Object(h.a)(a))),a.updateSort=a.updateSort.bind(Object(h.a)(Object(h.a)(a))),a.updatePageNumber=a.updatePageNumber.bind(Object(h.a)(Object(h.a)(a))),a.pageNumberSubmit=a.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(a))),a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a.parseItems=a.parseItems.bind(Object(h.a)(Object(h.a)(a))),a.toggleTranscriptionStatus=a.toggleTranscriptionStatus.bind(Object(h.a)(Object(h.a)(a))),a.showDeleteLetterConfirm=a.showDeleteLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideDeleteLetterConfirm=a.hideDeleteLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.deleteLetter=a.deleteLetter.bind(Object(h.a)(Object(h.a)(a))),a.showBtnDisabledConfirm=a.showBtnDisabledConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideBtnDisabledConfirm=a.hideBtnDisabledConfirm.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updatePage",value:function(e){e>0&&e!==this.state.current_page&&this.setState({loading:!0,current_page:e,temp_page:e})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updateSort",value:function(e){e!==this.state.sort&&this.setState({sort:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({current_page:t,loading:!0})}},{key:"loadItems",value:function(){var e=this,t=y+"user-letters/",a={sort:this.state.sort,page:this.state.current_page,paginate:this.state.paginate},s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g.a.get(t,{params:a}).then(function(t){var a=t.data.data,s=a.data,r=[];r="undefined"!==typeof s&&s.length>0?e.parseItems(s):n.a.createElement(J,null);var i=a.current_page;a.last_page<a.current_page&&(i=a.last_page),e.setState({loading:!1,items:r,current_page:i,last_page:a.last_page,total:a.total,firstLoad:0})}).catch(function(e){console.log(e)})}},{key:"parseItems",value:function(e){for(var t=[],a="This letter has not been approved for transcription yet. Please select another item from the transcription desk.",s=0;s<e.length;s++){var r=e[s],i=JSON.parse(r.element),l=void 0;i.pages.length>0&&(l=n.a.createElement("img",{className:"list-thumbnail small img-responsive",src:E+"/diyhistory/archive/square_thumbnails/"+i.pages[0].archive_filename,alt:i.title}));var o=r.status,c=r.transcription_status,m=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Transcribe letter",onClick:this.showBtnDisabledConfirm.bind(this,a)},n.a.createElement("i",{className:"fa fa-file-text-o color-grey"}))),u=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Edit Letter",onClick:this.showBtnDisabledConfirm.bind(this,"The letter transcription is enabled. You cannot edit this letter.")},n.a.createElement("i",{className:"fa fa-pencil color-grey"}))),d=[],h=n.a.createElement("div",null,n.a.createElement(j.a,{to:"user-letter/"+r.id},l),n.a.createElement("h4",{className:"user-letters-heading"},n.a.createElement("small",{className:"pull-right"},r.created_at),n.a.createElement(j.a,{to:"user-letter/"+r.id},i.title)));0===o&&-1===c?u=n.a.createElement("li",null,n.a.createElement(j.a,{to:"user-letter/"+r.id,className:"action-button",title:"Edit letter"},n.a.createElement("i",{className:"fa fa-pencil color-blue"}))):0===o&&0===c&&(m=n.a.createElement("li",null,n.a.createElement(j.a,{to:"letter-transcribe/"+r.id,className:"action-button",title:"Transcribe letter"},n.a.createElement("i",{className:"fa fa-file-text-o"}))),h=n.a.createElement("div",null,l,n.a.createElement("h4",{className:"user-letters-heading"},n.a.createElement("small",{className:"pull-right"},r.created_at),i.title))),1!==o&&(d=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Delete letter",onClick:this.showDeleteLetterConfirm.bind(this,r.id,i.title)},n.a.createElement("i",{className:"fa fa-trash color-red"})))),0===i.pages.length&&(u=n.a.createElement("li",null,n.a.createElement(j.a,{to:"user-letter/"+r.id,className:"action-button",title:"Edit letter"},n.a.createElement("i",{className:"fa fa-pencil color-blue"}))),m=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Transcribe letter",onClick:this.showBtnDisabledConfirm.bind(this,a)},n.a.createElement("i",{className:"fa fa-file-text-o color-grey"}))));var p=n.a.createElement("li",{"data-id":r.id,key:s,className:"img-clearfix"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},h),n.a.createElement("div",{className:"col-sm-4 col-md-3"},n.a.createElement("ul",{className:"action-buttons-list"},m,u,d))));t.push(p)}return t}},{key:"toggleTranscriptionStatus",value:function(e){var t=this,a=y+"update-letter-transcription-status/"+e,s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"POST",url:a,crossDomain:!0}).then(function(e){t.loadItems()}).catch(function(e){console.log(e)})}},{key:"showDeleteLetterConfirm",value:function(e,t){this.setState({showDeleteLetterConfirm:!0,deleteLetterId:e,letterName:t})}},{key:"hideDeleteLetterConfirm",value:function(){this.setState({showDeleteLetterConfirm:!1})}},{key:"deleteLetter",value:function(){var e=this.state.deleteLetterId;if(e>0){var t=this,a=y+"delete-letter",s=sessionStorage.getItem("accessToken"),n={id:e};g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"DELETE",url:a,data:n,crossDomain:!0}).then(function(e){t.setState({showDeleteLetterConfirm:!1,deleteLetterId:0,letterName:""}),t.loadItems()}).catch(function(e){console.log(e)})}}},{key:"showBtnDisabledConfirm",value:function(e){this.setState({showBtnDisabledConfirm:!0,btnDisabledText:e})}},{key:"hideBtnDisabledConfirm",value:function(){this.setState({showBtnDisabledConfirm:!1,btnDisabledText:""})}},{key:"componentDidMount",value:function(){this.loadItems(),Object(it.loadProgressBar)()}},{key:"componentDidUpdate",value:function(e,t){t.current_page===this.state.current_page&&t.paginate===this.state.paginate&&t.sort===this.state.sort||this.loadItems()}},{key:"render",value:function(){var e=[];if("true"!==sessionStorage.getItem("sessionActive"))e=n.a.createElement("div",{className:"item-container"},n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}));else{var t;if(this.state.loading&&1===this.state.firstLoad){var a=F(11);t=n.a.createElement("ul",{className:"browse-items"},a)}else t=this.state.loading&&0===this.state.firstLoad?n.a.createElement("ul",{className:"browse-items blur"},this.state.items):n.a.createElement("ul",{className:"browse-items"},this.state.items);var s="",r="";"desc"===this.state.sort&&(s="active"),"asc"===this.state.sort&&(r="active");var i="",l="",o="";10===this.state.paginate&&(i="active"),25===this.state.paginate&&(l="active"),50===this.state.paginate&&(o="active");var c=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Sort",id:"sort-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updateSort.bind(this,"desc"),className:s},n.a.createElement("i",{className:"fa fa-sort-amount-desc"})," Desc"),n.a.createElement(M.a,{key:"2",onClick:this.updateSort.bind(this,"asc"),className:r},n.a.createElement("i",{className:"fa fa-sort-amount-asc"})," Asc")),n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:i},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:l},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:o},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.updatePage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"}))))));e=n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},c,n.a.createElement("div",{className:"list-items-container"},t),c)),n.a.createElement(Ut,{headerText:"Delete letter",bodyText:'The letter "'+this.state.letterName+'" will be deleted. Continue?',buttonCancel:n.a.createElement("button",{type:"button",className:"pull-left btn btn-primary btn-sm",onClick:this.hideDeleteLetterConfirm},"Cancel"),buttonSuccess:n.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.deleteLetter},n.a.createElement("i",{className:"fa fa-trash-o"})," Delete"),showModal:this.state.showDeleteLetterConfirm}),n.a.createElement(Ut,{headerText:"Notice",bodyText:n.a.createElement("div",{className:"text-center"},this.state.btnDisabledText),buttonCancel:n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.hideBtnDisabledConfirm},"Dismiss")),buttonSuccess:"",showModal:this.state.showBtnDisabledConfirm}))}return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"My Letters",path:""}]}),n.a.createElement("h1",null,n.a.createElement("span",null,"My Letters")),e)))}}]),t}(s.Component),ra=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,items:[],page:1,current_page:1,temp_page:1,total:0,sort:"desc",paginate:10,paginationHTML:[],length:0,firstLoad:1,letterName:"",showRemoveLetterConfirm:!1,removeLetterId:0,showBtnDisabledConfirm:!1,btnDisabledText:""},a.updatePage=a.updatePage.bind(Object(h.a)(Object(h.a)(a))),a.updatePaginate=a.updatePaginate.bind(Object(h.a)(Object(h.a)(a))),a.updateSort=a.updateSort.bind(Object(h.a)(Object(h.a)(a))),a.updatePageNumber=a.updatePageNumber.bind(Object(h.a)(Object(h.a)(a))),a.pageNumberSubmit=a.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(a))),a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a.parseItems=a.parseItems.bind(Object(h.a)(Object(h.a)(a))),a.toggleTranscriptionStatus=a.toggleTranscriptionStatus.bind(Object(h.a)(Object(h.a)(a))),a.showRemoveLetterConfirm=a.showRemoveLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideRemoveLetterConfirm=a.hideRemoveLetterConfirm.bind(Object(h.a)(Object(h.a)(a))),a.removeLetter=a.removeLetter.bind(Object(h.a)(Object(h.a)(a))),a.showBtnDisabledConfirm=a.showBtnDisabledConfirm.bind(Object(h.a)(Object(h.a)(a))),a.hideBtnDisabledConfirm=a.hideBtnDisabledConfirm.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updatePage",value:function(e){e>0&&e!==this.state.current_page&&this.setState({loading:!0,current_page:e,temp_page:e})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updateSort",value:function(e){e!==this.state.sort&&this.setState({sort:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({current_page:t,loading:!0})}},{key:"loadItems",value:function(){var e=this,t=y+"user-transcriptions/",a={sort:this.state.sort,page:this.state.current_page,paginate:this.state.paginate},s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g.a.get(t,{params:a}).then(function(t){var a=t.data.data,s=a.data,r=[];r="undefined"!==typeof s&&s.length>0?e.parseItems(s):n.a.createElement(J,null);var i=a.current_page;a.last_page<a.current_page&&(i=a.last_page),e.setState({loading:!1,items:r,current_page:i,last_page:a.last_page,total:a.total,firstLoad:0})}).catch(function(e){console.log(e)})}},{key:"parseItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=JSON.parse(s.element),i=void 0;r.pages.length>0&&(i=n.a.createElement("img",{className:"list-thumbnail small img-responsive",src:E+"/diyhistory/archive/square_thumbnails/"+r.pages[0].archive_filename,alt:r.title}));var l=s.status,o=s.transcription_status,c="letter-transcribe/"+s.id,m=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Delete letter",onClick:this.showRemoveLetterConfirm.bind(this,s.id,r.title)},n.a.createElement("i",{className:"fa fa-times"}))),u=n.a.createElement("li",null,n.a.createElement(j.a,{to:c,className:"action-button",title:"Edit letter"},n.a.createElement("i",{className:"fa fa-pencil color-blue"}))),d=n.a.createElement("div",null,n.a.createElement(j.a,{to:c},i),n.a.createElement("h4",{className:"user-letters-heading"},n.a.createElement("small",{className:"pull-right"},s.created_at),n.a.createElement(j.a,{to:c},r.title)));0===l&&0===o||(u=n.a.createElement("li",null,n.a.createElement("button",{className:"action-button",title:"Edit letter",onClick:this.showBtnDisabledConfirm.bind(this,"This letter is currently not available for transcription")},n.a.createElement("i",{className:"fa fa-pencil color-grey"}))),d=n.a.createElement("div",null,i,n.a.createElement("h4",{className:"user-letters-heading"},n.a.createElement("small",{className:"pull-right"},s.created_at))));var h=n.a.createElement("li",{"data-id":s.id,key:a,className:"img-clearfix"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},d),n.a.createElement("div",{className:"col-sm-4 col-md-3"},n.a.createElement("ul",{className:"action-buttons-list"},u,m))));t.push(h)}return t}},{key:"toggleTranscriptionStatus",value:function(e){var t=this,a=y+"update-letter-transcription-status/"+e,s=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"POST",url:a,crossDomain:!0}).then(function(e){t.loadItems()}).catch(function(e){console.log(e)})}},{key:"showRemoveLetterConfirm",value:function(e,t){this.setState({showRemoveLetterConfirm:!0,removeLetterId:e,letterName:t})}},{key:"hideRemoveLetterConfirm",value:function(){this.setState({showRemoveLetterConfirm:!1})}},{key:"removeLetter",value:function(){var e=this.state.removeLetterId;if(e>0){var t=this,a=y+"remove-transcription-association",s=sessionStorage.getItem("accessToken"),n={id:e};g.a.defaults.headers.common.Authorization="Bearer "+s,g()({method:"DELETE",url:a,data:n,crossDomain:!0}).then(function(e){t.setState({showRemoveLetterConfirm:!1,removeLetterId:0,letterName:""}),t.loadItems()}).catch(function(e){console.log(e)})}}},{key:"showBtnDisabledConfirm",value:function(e){this.setState({showBtnDisabledConfirm:!0,btnDisabledText:e})}},{key:"hideBtnDisabledConfirm",value:function(){this.setState({showBtnDisabledConfirm:!1,btnDisabledText:""})}},{key:"componentDidMount",value:function(){this.loadItems(),Object(it.loadProgressBar)()}},{key:"componentDidUpdate",value:function(e,t){t.current_page===this.state.current_page&&t.paginate===this.state.paginate&&t.sort===this.state.sort||this.loadItems()}},{key:"render",value:function(){var e;if(this.state.loading&&1===this.state.firstLoad){var t=F(11);e=n.a.createElement("ul",{className:"browse-items"},t)}else e=this.state.loading&&0===this.state.firstLoad?n.a.createElement("ul",{className:"browse-items blur"},this.state.items):n.a.createElement("ul",{className:"browse-items"},this.state.items);var a="",s="",r="";10===this.state.paginate&&(a="active"),25===this.state.paginate&&(s="active"),50===this.state.paginate&&(r="active");var i=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:a},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:s},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:r},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.updatePage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"})))))),l=n.a.createElement("div",null,i,n.a.createElement("div",{className:"list-items-container"},e),i);return"true"!==sessionStorage.getItem("sessionActive")&&(l=n.a.createElement("div",{className:"item-container"},n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"My Transcriptions",path:""}]}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("h2",null,"My Transcriptions"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},l)),n.a.createElement(Ut,{headerText:"Delete letter",bodyText:'The letter "'+this.state.letterName+'" will be removed from your list of transcriptions. Continue?',buttonCancel:n.a.createElement("button",{type:"button",className:"pull-left btn btn-primary btn-sm",onClick:this.hideRemoveLetterConfirm},"Cancel"),buttonSuccess:n.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:this.removeLetter},n.a.createElement("i",{className:"fa fa-times"})," Remove"),showModal:this.state.showRemoveLetterConfirm}),n.a.createElement(Ut,{headerText:"Notice",bodyText:n.a.createElement("div",{className:"text-center"},this.state.btnDisabledText),buttonCancel:n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.hideBtnDisabledConfirm},"Dismiss")),buttonSuccess:"",showModal:this.state.showBtnDisabledConfirm}))}}]),t}(s.Component),ia=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,topics:[],autocomplete_visible:!1,autocomplete_value:""},e.toggleElementChildren=e.toggleElementChildren.bind(Object(h.a)(Object(h.a)(e))),e.toggleAutocomplete=e.toggleAutocomplete.bind(Object(h.a)(Object(h.a)(e))),e.autocomplete=e.autocomplete.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggleElementChildren",value:function(e){e.preventDefault();var t=e.currentTarget;if(null===t.nextSibling)return!1;var a=t.attributes["data-toggle"].value,s="closed";"closed"===a&&(s="open"),t.setAttribute("data-toggle",s),B(t.nextSibling,a,s),B(t,a,s)}},{key:"loadTopics",value:function(){if(null!==sessionStorage.getItem("transcriptions_topics_list")&&sessionStorage.getItem("transcriptions_topics_list").length>0){for(var e=JSON.parse(sessionStorage.getItem("transcriptions_topics_list")),t=[],a=0;a<e.length;a++){var s=e[a],n=this.topicItem(s,a);t.push(n)}this.setState({loading:!1,topics:t})}else{var r=this;g.a.get(y+"topics").then(function(e){var t=e.data.data;sessionStorage.setItem("transcriptions_topics_list",JSON.stringify(t));for(var a=[],s=0;s<t.length;s++){var n=t[s],i=r.topicItem(n,s);a.push(i)}r.setState({loading:!1,topics:a})}).catch(function(e){console.log(e)})}}},{key:"topicItem",value:function(e,t){var a=e.children,s=[],r=[],i="";return a.length>0&&(s=this.topicChildren(a,t),r=n.a.createElement("span",{className:"toggle-children",onClick:this.toggleElementChildren,"data-toggle":"closed"},n.a.createElement("i",{className:"fa fa-angle-left"})),i=" has-children"),n.a.createElement("li",{key:t,"data-key":t},n.a.createElement("span",{className:"href-btn",onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},e.name),n.a.createElement("span",{className:"select-topic"},n.a.createElement("i",{className:"fa fa-circle-o","data-id":e.id})),n.a.createElement("span",{className:"topic-label"+i,"data-toggle":"closed"},e.name," (",n.a.createElement("span",{className:"count","data-default":e.count},e.count),")")),r,s)}},{key:"topicChildren",value:function(e,t){var a=[],s=[];if(e.length>0){for(var r=0;r<e.length;r++){var i=e[r],l=this.topicItem(i,t+"."+r);a.push(l)}s=n.a.createElement("ul",{className:"topics-list-children","data-parent":t},a)}return s}},{key:"toggleAutocomplete",value:function(){return!1}},{key:"autocomplete",value:function(e){this.setState({autocomplete_value:e.target.value})}},{key:"componentDidMount",value:function(){this.loadTopics()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",null,n.a.createElement("h5",{onClick:this.toggleAutocomplete},"Keywords"),n.a.createElement("ul",{className:"topics-list"},this.state.topics)),n.a.createElement("div",{className:"topics-container"},e)}}]),t}(n.a.Component),la=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("transcriptions_sources_list")&&sessionStorage.getItem("transcriptions_sources_list").length>0){var e=JSON.parse(sessionStorage.getItem("transcriptions_sources_list"));this.setItems(e)}else{var t=this;g.a.get(y+"sources").then(function(e){var a=e.data.data;sessionStorage.setItem("transcriptions_sources_list",JSON.stringify(a)),t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.source;""===s.source&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.source),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.source))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"sources-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Sources"),e)}}]),t}(n.a.Component),oa=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("transcriptions_authors_list")&&sessionStorage.getItem("transcriptions_authors_list").length>0){var e=JSON.parse(sessionStorage.getItem("transcriptions_authors_list"));this.setItems(e)}else{var t=this;g.a.get(y+"authors").then(function(e){var a=e.data.data;sessionStorage.setItem("transcriptions_authors_list",JSON.stringify(a)),t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.creator;""===s.creator&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.creator),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.creator))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"authors-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Authors"),e)}}]),t}(n.a.Component),ca=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("transcriptions_genders_list")&&sessionStorage.getItem("transcriptions_genders_list").length>0){var e=JSON.parse(sessionStorage.getItem("transcriptions_genders_list"));this.setItems(e)}else{var t=this;g.a.get(y+"genders").then(function(e){var a=e.data.data;sessionStorage.setItem("transcriptions_genders_list",JSON.stringify(a)),t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.gender;""===s.gender&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.gender),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.gender))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",null,n.a.createElement("h5",null,"Gender"),n.a.createElement("ul",{className:"genders-list"},this.state.items)),n.a.createElement("div",{className:"topics-container"},e)}}]),t}(n.a.Component),ma=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,items:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("transcriptions_languages_list")&&sessionStorage.getItem("transcriptions_languages_list").length>0){var e=JSON.parse(sessionStorage.getItem("transcriptions_languages_list"));this.setItems(e)}else{var t=this;g.a.get(y+"languages").then(function(e){var a=e.data.data;sessionStorage.setItem("transcriptions_languages_list",JSON.stringify(a)),t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=s.language;""===s.language&&(r="Unknown");var i=n.a.createElement("li",{key:a,onClick:this.props.returnfunction.bind(this)},n.a.createElement("span",{className:"hidden"},s.language),n.a.createElement("span",{className:"select-source"},n.a.createElement("i",{className:"fa fa-circle-o"},n.a.createElement("span",{className:"hidden"},s.language))),n.a.createElement("span",{className:"source-label"},r," (",n.a.createElement("span",{className:"count","data-default":s.count},s.count),")"));t.push(i)}this.setState({loading:!1,items:t})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("ul",{className:"languages-list"},this.state.items),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Language"),e)}}]),t}(n.a.Component),ua=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,startValue:null,endValue:null,startOpen:!1,endOpen:!1,calendarDates:[],excludedDates:[]},a.loadItems=a.loadItems.bind(Object(h.a)(Object(h.a)(a))),a.setItems=a.setItems.bind(Object(h.a)(Object(h.a)(a))),a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.startDateClear=a.startDateClear.bind(Object(h.a)(Object(h.a)(a))),a.endDateClear=a.endDateClear.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadItems",value:function(){if(null!==sessionStorage.getItem("transcriptions_date_created_list")&&sessionStorage.getItem("transcriptions_date_created_list").length>0){var e=JSON.parse(sessionStorage.getItem("transcriptions_date_created_list"));this.setItems(e)}else{var t=this;g.a.get(y+"date_created").then(function(e){var a=e.data.data;sessionStorage.setItem("transcriptions_date_created_list",JSON.stringify(a)),t.setItems(a)}).catch(function(e){console.log(e)})}}},{key:"setItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a].date_created;if(s.split("-").length>=2&&10===(s=s.replace("T00:00:00","")).length){var n=st()(s);t.includes(n)||t.push(n)}}this.setState({loading:!1,calendarDates:t})}},{key:"updateItems",value:function(e){for(var t=Object.keys(e).map(function(e){return e}),a=[],s=0;s<t.length;s++){var n=t[s];if(n.split("-").length>=2&&10===(n=n.replace("T00:00:00","")).length){var r=st()(n);a.includes(r)||a.push(r)}}this.setState({loading:!1,calendarDates:a})}},{key:"onChange",value:function(e,t){if("endValue"===e&&null!==this.state.startValue){var a=st()(this.state.startValue);st()(t)<a&&(t=this.state.startValue)}this.setState(Object(x.a)({},e,t))}},{key:"startDateClear",value:function(){this.setState({startValue:null})}},{key:"endDateClear",value:function(){this.setState({endValue:null})}},{key:"componentDidMount",value:function(){this.loadItems()}},{key:"componentDidUpdate",value:function(e,t){if(t.startValue!==this.state.startValue||t.endValue!==this.state.endValue){var a=null,s=null;null!==this.state.startValue&&(a=st()(this.state.startValue).format("YYYY-MM-DD")),null!==this.state.endValue&&(s=st()(this.state.endValue).format("YYYY-MM-DD"));var n={startValue:a,endValue:s};this.props.returnfunction(n)}e.availableDates!==this.props.availableDates&&this.updateItems(this.props.availableDates)}},{key:"render",value:function(){var e;return e=this.state.loading?n.a.createElement("div",{className:"loader-container"},n.a.createElement(we.a,{type:"spinningBubbles",color:"#738759",height:60,width:60,delay:0})):n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(nt,{placeholder:"From",value:this.state.startValue,onChange:this.onChange.bind(this,"startValue"),clearFunction:this.startDateClear,dates:this.state.calendarDates})),n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(nt,{placeholder:"To",value:this.state.endValue,onChange:this.onChange.bind(this,"endValue"),clearFunction:this.endDateClear,dates:this.state.calendarDates}))),n.a.createElement("div",{className:"topics-container"},n.a.createElement("h5",null,"Date sent"),e)}}]),t}(n.a.Component),da=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={loading:!0,browseItems:[],page:1,current_page:1,temp_page:1,total:0,paginate:10,paginationHTML:[],length:0,firstLoad:1,selectedTopics:[],keywords_ids:[],sources:[],authors:[],genders:[],languages:[],date_sent:[],date_start:[],date_end:[],queryStatus:0,queryTranscriptionStatus:0,sort:"asc"},e.updatePage=e.updatePage.bind(Object(h.a)(Object(h.a)(e))),e.showPage=e.showPage.bind(Object(h.a)(Object(h.a)(e))),e.updatePaginate=e.updatePaginate.bind(Object(h.a)(Object(h.a)(e))),e.updateSort=e.updateSort.bind(Object(h.a)(Object(h.a)(e))),e.updatePageNumber=e.updatePageNumber.bind(Object(h.a)(Object(h.a)(e))),e.pageNumberSubmit=e.pageNumberSubmit.bind(Object(h.a)(Object(h.a)(e))),e.topicFilter=e.topicFilter.bind(Object(h.a)(Object(h.a)(e))),e.filterContent=e.filterContent.bind(Object(h.a)(Object(h.a)(e))),e.browserItems=e.browserItems.bind(Object(h.a)(Object(h.a)(e))),e.sourcesFilter=e.sourcesFilter.bind(Object(h.a)(Object(h.a)(e))),e.authorsFilter=e.authorsFilter.bind(Object(h.a)(Object(h.a)(e))),e.gendersFilter=e.gendersFilter.bind(Object(h.a)(Object(h.a)(e))),e.languagesFilter=e.languagesFilter.bind(Object(h.a)(Object(h.a)(e))),e.datecreatedFilter=e.datecreatedFilter.bind(Object(h.a)(Object(h.a)(e))),e.transcriptionStatus=e.transcriptionStatus.bind(Object(h.a)(Object(h.a)(e))),e.setSessionStorage=e.setSessionStorage.bind(Object(h.a)(Object(h.a)(e))),e.checkSessionStorage=e.checkSessionStorage.bind(Object(h.a)(Object(h.a)(e))),e.clearFilters=e.clearFilters.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updatePage",value:function(e){e>0&&e!==this.state.current_page&&this.setState({loading:!0,current_page:e,temp_page:e})}},{key:"updatePaginate",value:function(e){e!==this.state.paginate&&this.setState({paginate:e,loading:!0})}},{key:"updateSort",value:function(e){e!==this.state.sort&&this.setState({sort:e,loading:!0})}},{key:"updatePageNumber",value:function(e){this.setState({temp_page:e.target.value})}},{key:"pageNumberSubmit",value:function(e){e.preventDefault();var t=this.state.temp_page;parseInt(t,10)!==this.state.current_page&&this.setState({current_page:t,loading:!0})}},{key:"topicFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-topic")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".topic-label")[0],n=a.className,r=this.state.selectedTopics,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.getAttribute("data-id");if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}this.setState({loading:!0,selectedTopics:i,keywords_ids:i}),B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active")}},{key:"sourcesFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.sources,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,sources:i})}},{key:"authorsFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.authors,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,authors:i})}},{key:"gendersFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.genders,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,genders:i})}},{key:"languagesFilter",value:function(e){e.preventDefault();for(var t=e.currentTarget,a=t.querySelectorAll(".select-source")[0].querySelectorAll("i")[0],s=t.querySelectorAll(".source-label")[0],n=a.className,r=this.state.languages,i=[],l=0;l<r.length;l++)i.push(r[l]);var o=a.children[0].innerText;if("fa fa-circle-o"===n)-1===i.indexOf(o)&&i.push(o);else if(i.indexOf(o)>-1){var c=i.indexOf(o);i.splice(c,1)}B(a,"fa-circle-o","fa-check-circle-o"),B(s,"","active"),this.setState({loading:!0,languages:i})}},{key:"datecreatedFilter",value:function(e){var t=e.startValue,a=e.endValue;this.setState({loading:!0,date_start:t,date_end:a})}},{key:"selectedTopicsToggleChildren",value:function(e,t){var a=this.state.selectedTopics,s=i.a.findDOMNode(e).children;if("object"===typeof s[3])for(var n=s[3],r=i.a.findDOMNode(n).children,l=0;l<r.length;l++){var o=i.a.findDOMNode(r[l]).children,c=i.a.findDOMNode(o[0]).children,m=c[0].getAttribute("data-id");if("fa fa-circle-o"===t)-1===a.indexOf(m)&&a.push(m);else if(a.indexOf(m)>-1){var u=a.indexOf(m);a.splice(u,1)}if("object"===typeof o[3]){var d=i.a.findDOMNode(o[3]).parentNode;this.selectedTopicsToggleChildren(d,t)}var h="fa-check-circle-o",p="fa-circle-o";"fa fa-circle-o"===t&&(h="fa-circle-o",p="fa-check-circle-o"),P(c[0],h,p)}this.setState({selectedTopics:a})}},{key:"filterContent",value:function(){var e=this,t=y+"transcriptionsdeskfiltered";g.a.get(t,{params:{sort:this.state.sort,page:this.state.current_page,paginate:this.state.paginate,keywords:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,status:this.state.queryStatus,transcription_status:this.state.queryTranscriptionStatus}}).then(function(t){var a=t.data.data,s=a.data,r=[];r="undefined"!==typeof s&&s.length>0?e.browserItems(s):n.a.createElement(J,null);var i=a.current_page;a.last_page<a.current_page?(i=a.last_page,e.setState({loading:!1,current_page:i,browseItems:r,last_page:a.last_page,total:a.total,firstLoad:0})):e.setState({loading:!1,browseItems:r,last_page:a.last_page,total:a.total,firstLoad:0}),Y(e.state.keywords_ids),G("sources-list",e.state.sources),G("authors-list",e.state.authors),G("genders-list",e.state.genders),G("languages-list",e.state.languages)}).catch(function(e){console.log(e)})}},{key:"updateFilters",value:function(){var e=this,t=y+"indexfilteredfilters";g.a.get(t,{params:{sort:this.state.sort,page:1,paginate:this.state.paginate,keywords:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,status:this.state.queryStatus,transcription_status:this.state.queryTranscriptionStatus}}).then(function(t){var a=t.data.data;L(a.keywords),R("sources-list",a.sources),R("authors-list",a.authors),R("genders-list",a.genders),R("languages-list",a.languages),e.setState({dates_sent:a.dates_sent})}).catch(function(e){console.log(e)})}},{key:"clearFilters",value:function(){this.state.selectedTopics===[]&&this.state.keywords_ids===[]&&this.state.sources===[]&&this.state.authors===[]&&this.state.genders===[]&&this.state.languages===[]&&this.state.date_start===[]&&this.state.date_end===[]||this.setState({loading:!0,selectedTopics:[],keywords_ids:[],sources:[],authors:[],genders:[],languages:[],date_start:[],date_end:[]})}},{key:"showPage",value:function(){var e=this,t=this.state.path;g.a.get(t,{params:{page:this.state.current_page,sort:this.state.sort,paginate:this.state.paginate}}).then(function(t){var a=t.data.data,s=a.data,n=[];"undefined"!==typeof s&&(n=e.browserItems(s)),e.setState({loading:!1,browseItems:n,current_page:a.current_page,last_page:a.last_page,total:a.total,firstLoad:0})}).catch(function(e){console.log(e)})}},{key:"browserItems",value:function(e){for(var t=[],a=0;a<e.length;a++){var s=e[a],r=JSON.parse(s.element),i=void 0;if(r.pages.length>0){var l=Z(E+"/diyhistory/archive/square_thumbnails/"+r.pages[0].archive_filename);i=n.a.createElement("img",{className:"img-responsive",src:l,alt:r.title})}for(var o=[],c=0;c<r.topics.length;c++){var m=r.topics[c],u="";c>0&&(u=", ");var d=n.a.createElement("span",{"data-id":m.topic_id,key:c},u,m.topic_name);o.push(d)}var h="";if(r.pages.length>0){var p=s.completed+"%";if("undefined"!==typeof r.pages[0].transcription&&""!==r.pages[0].transcription&&null!==r.pages[0].transcription){var g=r.pages[0].transcription.replace(/<[^>]+>/gi," ");g=W(g,"&amp;","&"),(g=W(g,"&#39;","'")).length>300&&(g=g.substring(0,300)),h=g+"..."}var f={pathname:"/letter-transcribe/"+s.id,prevlocation:"Transcription Desk",prevlocationpath:"/transcriptions-desk"},b=n.a.createElement("li",{"data-id":s.id,key:a,className:"img-clearfix"},n.a.createElement("div",{className:"list-thumbnail"},n.a.createElement(j.a,{to:f},i),n.a.createElement("div",{className:"clearfix"},n.a.createElement("small",{className:"pull-left"},"Completed"),n.a.createElement("small",{className:"pull-right"},p)),n.a.createElement("div",{className:"progress xs"},n.a.createElement("div",{className:"progress-bar progress-bar-green",style:{width:p}}))),n.a.createElement("h4",null,n.a.createElement(j.a,{to:f},r.title)),n.a.createElement("span",{className:"browse-item-keywords"},"Keywords: ",o),n.a.createElement("p",null,h));t.push(b)}}return t}},{key:"transcriptionStatus",value:function(e){for(var t=e.length,a=0,s=0;s<t;s++){var n=e[s].transcription_status;parseInt(n,10)>0&&a++}var r="0%";if(a>0){var i=a/t*100;r=Math.round(parseFloat(i,10)).toFixed(0)+"%"}return r}},{key:"checkSessionStorage",value:function(){if(null!==sessionStorage.getItem("transcriptions_desk")){var e=JSON.parse(sessionStorage.getItem("transcriptions_desk"));this.setState({sort:e.sort,current_page:e.current_page,paginate:e.paginate,keywords_ids:e.keywords_ids,sources:e.sources,authors:e.authors,genders:e.genders,languages:e.languages,date_start:e.date_start,date_end:e.date_end,queryStatus:e.queryStatus,queryTranscriptionStatus:e.queryTranscriptionStatus})}}},{key:"setSessionStorage",value:function(){var e={sort:this.state.sort,current_page:this.state.current_page,paginate:this.state.paginate,keywords_ids:this.state.keywords_ids,sources:this.state.sources,authors:this.state.authors,genders:this.state.genders,languages:this.state.languages,date_start:this.state.date_start,date_end:this.state.date_end,queryStatus:this.state.queryStatus,queryTranscriptionStatus:this.state.queryTranscriptionStatus};sessionStorage.setItem("transcriptions_desk",JSON.stringify(e))}},{key:"componentDidMount",value:function(){if("true"===sessionStorage.getItem("sessionActive")){Object(it.loadProgressBar)(),this.checkSessionStorage();var e=this;setTimeout(function(){e.filterContent(),e.updateFilters()},500)}}},{key:"componentDidUpdate",value:function(e,t){if(sessionStorage.getItem("sessionActive")&&t.loading!==this.state.loading&&(t.current_page!==this.state.current_page||t.paginate!==this.state.paginate||t.sort!==this.state.sort||t.keywords_ids!==this.state.keywords_ids||t.sources!==this.state.sources||t.authors!==this.state.authors||t.genders!==this.state.genders||t.languages!==this.state.languages||t.date_sent!==this.state.date_sent)){this.setSessionStorage();var a=this;setTimeout(function(){a.filterContent(),a.updateFilters()},500)}}},{key:"render",value:function(){var e,t,a=[];if("true"!==sessionStorage.getItem("sessionActive"))e=n.a.createElement(bt,{loginModalOpen:this.props.loginModalOpen}),t=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:a}),n.a.createElement("h1",null,"Transcription Desk"),n.a.createElement("div",{className:"item-container"},e))));else{var s;if(a=[{label:"Transcription Desk",path:""}],this.state.loading&&1===this.state.firstLoad){var r=F(11);s=n.a.createElement("ul",{className:"browse-items"},r)}else s=this.state.loading&&0===this.state.firstLoad?n.a.createElement("ul",{className:"browse-items blur"},this.state.browseItems):n.a.createElement("ul",{className:"browse-items"},this.state.browseItems);var i="",l="";"desc"===this.state.sort&&(i="active"),"asc"===this.state.sort&&(l="active");var o="",c="",m="";10===this.state.paginate&&(o="active"),25===this.state.paginate&&(c="active"),50===this.state.paginate&&(m="active");var u=n.a.createElement("div",{className:"browse-filters"},n.a.createElement(D.a,{title:"Sort",id:"sort-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updateSort.bind(this,"asc"),className:l},n.a.createElement("i",{className:"fa fa-sort-amount-asc"})," Completed Asc"),n.a.createElement(M.a,{key:"2",onClick:this.updateSort.bind(this,"desc"),className:i},n.a.createElement("i",{className:"fa fa-sort-amount-desc"})," Completed Desc")),n.a.createElement(D.a,{title:"Limit",id:"limit-filter"},n.a.createElement(M.a,{key:"1",onClick:this.updatePaginate.bind(this,10),className:o},"10"),n.a.createElement(M.a,{key:"2",onClick:this.updatePaginate.bind(this,25),className:c},"25"),n.a.createElement(M.a,{key:"3",onClick:this.updatePaginate.bind(this,50),className:m},"50")),n.a.createElement(ze,{paginate:this.state.paginate,current_page:this.state.current_page,total_pages:this.state.last_page,pagination_function:this.updatePage}),n.a.createElement("form",{onSubmit:this.pageNumberSubmit,className:"pagination-form"},n.a.createElement("div",{className:"input-group input-group-sm go-to-page"},n.a.createElement("input",{className:"form-control",name:"go-to-page",onChange:this.updatePageNumber,value:this.state.temp_page}),n.a.createElement("span",{className:"input-group-addon"},"/ ",this.state.last_page),n.a.createElement("span",{className:"input-group-btn"},n.a.createElement("button",{type:"submit",className:"btn btn-default btn-flat"},n.a.createElement("i",{className:"fa fa-chevron-right"}))))));t=n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:a}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement("h3",{className:"column-title"},"Filters",n.a.createElement("small",{className:"pull-right",style:{cursor:"pointer"},onClick:this.clearFilters,title:"Clear all filters"},"clear all ",n.a.createElement("i",{className:"fa fa-times-circle-o"})))),n.a.createElement("div",{className:"col-xs-12 col-sm-9"},n.a.createElement("h2",null,"Transcription Desk"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-sm-3"},n.a.createElement(ia,{returnfunction:this.topicFilter}),n.a.createElement(la,{returnfunction:this.sourcesFilter}),n.a.createElement(oa,{returnfunction:this.authorsFilter}),n.a.createElement(ca,{returnfunction:this.gendersFilter}),n.a.createElement(ma,{returnfunction:this.languagesFilter}),n.a.createElement(ua,{returnfunction:this.datecreatedFilter,availableDates:this.state.dates_sent})),n.a.createElement("div",{className:"col-xs-12 col-sm-9"},u,n.a.createElement("div",{className:"list-items-container"},s),u)))}return n.a.createElement("div",null,t)}}]),t}(s.Component),ha=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement(Qe,{items:[{label:"Page Not Found",path:""}]}),n.a.createElement("h1",null,"Page Not Found"))),n.a.createElement("div",{className:"item-container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12"},n.a.createElement("div",{style:{padding:"30px 0 50px 0"}},n.a.createElement("h3",null,"The requested page does not exist."),n.a.createElement("p",null,"If you entered a web address please check it was correct."),n.a.createElement("p",null,"You can search through ",n.a.createElement(j.a,{href:"/fullsearch",to:"/fullsearch"},"Letters 1916-1923")," or go back to our ",n.a.createElement(j.a,{to:"/",href:"/"},"homepage"),"."))))))}}]),t}(s.Component),pa=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={isAdmin:!1,loginModalVisile:!1},e.checkAdminState=e.checkAdminState.bind(Object(h.a)(Object(h.a)(e))),e.loginModalOpen=e.loginModalOpen.bind(Object(h.a)(Object(h.a)(e))),e.loginModalHide=e.loginModalHide.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"checkAdminState",value:function(){if(sessionStorage.getItem("sessionActive")){var e=this,t=sessionStorage.getItem("accessToken");g.a.defaults.headers.common.Authorization="Bearer "+t,g.a.get(y+"user-profile").then(function(t){var a=t.data.status;if(void 0!==typeof a&&!0===a){for(var s=t.data.data.roles,n=!1,r=0;r<s.length;r++){1===s[r].is_admin&&(n=!0)}e.setState({isAdmin:n})}}).catch(function(e){e.response&&401===e.response.status&&"true"===H("letterssessionactive")&&(sessionStorage.setItem("sessionActive",!1),sessionStorage.setItem("accessToken",""),sessionStorage.setItem("userName",""),z("",!1,"",!0),setTimeout(function(){window.location.reload()},2e3))})}}},{key:"componentWillMount",value:function(){!function(){if("true"===H("letterssessionactive")){var e=H("lettersusername"),t=H("lettersaccesstoken");sessionStorage.setItem("userName",e),sessionStorage.setItem("sessionActive",!0),sessionStorage.setItem("accessToken",t)}else sessionStorage.setItem("userName",""),sessionStorage.setItem("sessionActive",!1),sessionStorage.setItem("accessToken","")}(),this.checkAdminState()}},{key:"componentDidMount",value:function(){_()}},{key:"loginModalHide",value:function(){this.setState({loginModalVisile:!1})}},{key:"loginModalOpen",value:function(){this.setState({loginModalVisile:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement(f.a,{basename:"/"},n.a.createElement("div",{className:"App"},n.a.createElement(w.Helmet,{htmlAttributes:{lang:"en"}}),n.a.createElement($,{loginModalVisile:this.state.loginModalVisile,loginModalHide:this.loginModalHide,loginModalOpen:this.loginModalOpen}),n.a.createElement(ve,null),n.a.createElement("div",{className:"wrapper main-body"},n.a.createElement(b.a,null,n.a.createElement(v.a,{exact:!0,path:"/",component:Ve}),n.a.createElement(v.a,{path:"/blank",component:It}),n.a.createElement(v.a,{path:"/browse",component:lt}),n.a.createElement(v.a,{path:"/contact-form",component:Bt}),n.a.createElement(v.a,{path:"/content/:contentName",component:At}),n.a.createElement(v.a,{path:"/fullsearch/:term",component:Ze}),n.a.createElement(v.a,{path:"/fullsearch",component:Ze}),n.a.createElement(v.a,{path:"/item/:itemId",component:function(t){return n.a.createElement(ft,Object.assign({isAdmin:e.state.isAdmin},t))}}),n.a.createElement(v.a,{path:"/letter/:letterId",component:function(t){return n.a.createElement(ft,Object.assign({isAdmin:e.state.isAdmin},t))}}),n.a.createElement(v.a,{path:"/letter-transcribe/:itemId",component:function(t){return n.a.createElement(Gt,Object.assign({isAdmin:e.state.isAdmin,loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/password-restore",component:ot}),n.a.createElement(v.a,{path:"/password-reset/:token",component:ct}),n.a.createElement(v.a,{path:"/register",component:mt}),n.a.createElement(v.a,{path:"/verify-account/:activation_code",component:ut}),n.a.createElement(v.a,{path:"/transcriptions-desk",component:function(t){return n.a.createElement(da,Object.assign({loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/upload-xml",component:function(t){return n.a.createElement(vt,Object.assign({isAdmin:e.state.isAdmin,loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/user-letter/:letterId",component:function(t){return n.a.createElement(sa,Object.assign({isAdmin:e.state.isAdmin,loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/user-letters",component:function(t){return n.a.createElement(na,Object.assign({loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/user-profile",component:function(t){return n.a.createElement(Vt,Object.assign({loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/user-transcriptions",component:function(t){return n.a.createElement(ra,Object.assign({loginModalVisile:e.state.loginModalVisile,loginModalHide:e.loginModalHide,loginModalOpen:e.loginModalOpen},t))}}),n.a.createElement(v.a,{path:"/vizualizations/:type",component:Mt}),n.a.createElement(v.a,{path:"/wp-post/:slug",component:_t}),n.a.createElement(v.a,{path:"/wp-category/:slug",component:jt}),n.a.createElement(v.a,{path:"/wp-page/:slug",component:Ct}),n.a.createElement(v.a,{path:"/404",component:ha}),n.a.createElement(A.a,{to:"/404"}))),n.a.createElement(ce,null),n.a.createElement(Ne,null),n.a.createElement(Se,null)))}}]),t}(s.Component),ga=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fa(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(n.a.createElement(pa,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ga?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fa(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):fa(e)})}}()}},[[409,2,1]]]);
//# sourceMappingURL=main.167a44e6.chunk.js.map